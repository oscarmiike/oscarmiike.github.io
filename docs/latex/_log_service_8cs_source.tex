\doxysection{Log\+Service.\+cs}
\hypertarget{_log_service_8cs_source}{}\label{_log_service_8cs_source}\index{C:/Users/STRIDER/source/repos/AinslieAPI/Services/LogService.cs@{C:/Users/STRIDER/source/repos/AinslieAPI/Services/LogService.cs}}
\mbox{\hyperlink{_log_service_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }Microsoft.Extensions.Options;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }Microsoft.AspNetCore.Http;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }Newtonsoft.Json;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00004}00004\ \textcolor{keyword}{using\ }System.IO;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00005}00005\ \textcolor{keyword}{using\ }System;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_ainslie_a_p_i_1_1_data_1_1_contexts}{AinslieAPI.Data.Contexts}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00007}00007\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_ainslie_a_p_i_1_1_data_1_1_models}{AinslieAPI.Data.Models}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00008}00008\ \textcolor{keyword}{using\ }System.Diagnostics;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00009}00009\ \textcolor{keyword}{using\ }System.Reflection;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00010}00010\ \textcolor{keyword}{using\ }System.Runtime.CompilerServices;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00011}00011\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_ainslie_a_p_i_1_1_helpers}{AinslieAPI.Helpers}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00012}00012\ \textcolor{keyword}{using\ }RestSharp;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00013}00013\ \textcolor{keyword}{using\ }Microsoft.EntityFrameworkCore;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00014}00014\ \textcolor{keyword}{using\ }System.Linq;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00015}00015\ \textcolor{keyword}{using\ }Microsoft.Data.SqlClient;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00017}00017\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_ainslie_a_p_i_1_1_services}{AinslieAPI.Services}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00018}00018\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00019}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service}{00019}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service}{LogService}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00020}00020\ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00021}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{00021}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00022}00022\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00023}00023\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aaa603905470e2a5b8c13e96b579ef0dba}{Debug}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00024}00024\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aaa82be0f551b8708bc08eb33cd9ded0cf}{Information}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00025}00025\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab47f6a6092c5d7e4bffec12dff309c3b}{Err}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00026}00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab0d4998a26f5b5742ad38c4af8817e32}{Exception}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00027}00027\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00028}00028\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00029}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{00029}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00030}00030\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00031}00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6ac6ef9642548f75729bf2383425199c21}{LogService}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00032}00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a309ed88c39a0e339b4af5bebab22b233}{OpenIdConnect}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00033}00033\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a45e5dd0147074ecbde12b1fe13e90d81}{GreenIdController}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00034}00034\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a83f4b0dc9e1a61acebee47e5d2b386c8}{InternalApiService}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00035}00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6ad7c88e60e20f7e5ab1fb821d37c8a5e8}{LogsController}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00036}00036\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a2d76774b11a88deed56787a23e6ce5b3}{ProductsController}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a3345cbb110adb764169dc8770be4329f}{AssetsController}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00038}00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6a66a1de7383afb0323b4e73093f6d3b5d}{TdcrController}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6aecdbad7c5e409738c220a90832fac19f}{CacheDataHelper}},}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_aw_api_service}{AwApiService}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00041}00041\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00043}00043\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_contexts_1_1_local_context}{LocalContext}}\ \_context;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00044}00044\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_app_settings}{AppSettings}}\ \_settings;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00046}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a55cde5c9926f48bad2708600723aa934}{00046}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a55cde5c9926f48bad2708600723aa934}{LogService}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_contexts_1_1_local_context}{LocalContext}}\ context,\ IOptions<AppSettings>\ ainslieApiSettings)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00047}00047\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00048}00048\ \ \ \ \ \ \ \ \ \_context\ =\ context;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00049}00049\ \ \ \ \ \ \ \ \ \_settings\ =\ ainslieApiSettings.Value;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00050}00050\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00052}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a9898f5cd3f6b2ea29e40c885721f4a63}{00052}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a9898f5cd3f6b2ea29e40c885721f4a63}{LogDebug}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}\ logSource,\ params\ \textcolor{keywordtype}{object}[]\ dataList)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00053}00053\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00054}00054\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_settings.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_app_settings_afbce144b7ab28f6830d88b7e644ff955}{SQLLoggerSettings}}.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_s_q_l_logger_settings_a37af8ba1fd0728aee03d32821d29e727}{LogDebug}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};\ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00055}00055\ \ \ \ \ \ \ \ \ var\ threadID\ =\ System.Environment.CurrentManagedThreadId;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{InsertLog}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Debug,\ threadID,\ logSource,\ dataList);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00057}00057\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00059}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a917b9af360c0c6521ce36f4acbc72023}{00059}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a917b9af360c0c6521ce36f4acbc72023}{LogInformation}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}\ logSource,\ params\ \textcolor{keywordtype}{object}[]\ dataList)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00060}00060\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\_settings.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_app_settings_afbce144b7ab28f6830d88b7e644ff955}{SQLLoggerSettings}}.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_s_q_l_logger_settings_a99a0b8df6d162ae514519f9a26b8be40}{LogInformation}})\ \{\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};\ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00062}00062\ \ \ \ \ \ \ \ \ var\ threadID\ =\ System.Environment.CurrentManagedThreadId;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{InsertLog}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Information,\ threadID,\ logSource,\ dataList);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00064}00064\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00066}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a9bf79a218e0884ac9cabd3ac87b81321}{00066}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a9bf79a218e0884ac9cabd3ac87b81321}{LogError}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}\ logSource,\ params\ \textcolor{keywordtype}{object}[]\ dataList)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00067}00067\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00068}00068\ \ \ \ \ \ \ \ \ var\ threadID\ =\ System.Environment.CurrentManagedThreadId;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00069}00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{InsertLog}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Err,\ threadID,\ logSource,\ dataList);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00070}00070\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00072}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a83bbf569dea7ea5a40e02fca200aad8c}{00072}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a83bbf569dea7ea5a40e02fca200aad8c}{LogException}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}\ logSource,\ params\ \textcolor{keywordtype}{object}[]\ dataList)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00073}00073\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00074}00074\ \ \ \ \ \ \ \ \ var\ threadID\ =\ System.Environment.CurrentManagedThreadId;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{InsertLog}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Exception,\ threadID,\ logSource,\ dataList);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00076}00076\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00084}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{00084}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a3c2dce5ed306365dfa416f700e5360cf}{InsertLog}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}\ logType,\ \textcolor{keywordtype}{int}\ threadID,\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}\ logSource,\ params\ \textcolor{keywordtype}{object}[]\ DataList)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00085}00085\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00086}00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}\ logEntry;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00087}00087\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00088}00088\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//try\ to\ create\ log\ entry\ by\ deserialising\ objects\ in\ param\ array\ datalist}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ logEntry\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}()}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00091}00091\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Created\ =\ DateTime.Now,}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Type\ =\ logType.ToString(),}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ThreadID\ =\ threadID,}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Source\ =\ logSource.ToString(),}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Data\ =\ JsonConvert.SerializeObject(DataList,\ \textcolor{keyword}{new}\ JsonSerializerSettings}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00097}00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ReferenceLoopHandling\ =\ ReferenceLoopHandling.Ignore}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \})}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00101}00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00102}00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab0d4998a26f5b5742ad38c4af8817e32}{Exception}}\ ex)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00103}00103\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//create\ new\ logentry\ with\ exception}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ logEntry\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_models_1_1_log_entry}{LogEntry}}()}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Created\ =\ DateTime.Now,}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Type\ =\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Exception.ToString(),}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ThreadID\ =\ threadID,}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Source\ =\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}.LogService.ToString(),}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Data\ =\ \$\textcolor{stringliteral}{"{}Exception\ creating\ logEntry:\ \{ex.ToString()\}"{}}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00113}00113\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00114}00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00115}00115\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00116}00116\ \ \ \ \ \ \ \ \ \ \ \ \ \_context.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_data_1_1_contexts_1_1_local_context_a07ac1cd14ee90d7465dd18a3669e0fa4}{LogEntries}}.Add(logEntry);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00117}00117\ \ \ \ \ \ \ \ \ \ \ \ \ \_context.SaveChanges();}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00118}00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ logEntry;}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00119}00119\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00120}00120\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab0d4998a26f5b5742ad38c4af8817e32}{Exception}}\ ex)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00121}00121\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00122}00122\ \ \ \ \ \ \ \ \ \ \ \ \ WriteLog(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}.Exception,\ \textcolor{stringliteral}{"{}LogService"{}},\ \$\textcolor{stringliteral}{"{}Exception\ trying\ to\ insert\ log.\ \ Exception:\ \{ex.ToString()\}"{}});}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00123}00123\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00124}00124\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{null};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00125}00125\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00126}00126\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00130}00130\ \ \ \ \ \textcolor{keyword}{private}\ \textcolor{keywordtype}{void}\ WriteLog(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847a}{LogTypes}}\ Type,\ \textcolor{keywordtype}{string}\ Source,\ \textcolor{keywordtype}{string}\ Description)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00131}00131\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00132}00132\ \ \ \ \ \ \ \ \ var\ LogPath\ =\ \$\textcolor{stringliteral}{"{}\{AppDomain.CurrentDomain.BaseDirectory\}/Log/"{}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00133}00133\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Directory.Exists(LogPath))}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ Directory.CreateDirectory(LogPath);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00135}00135\ \ \ \ \ \ \ \ \ var\ LogFile\ =\ \$\textcolor{stringliteral}{"{}AinslieAPI.Log"{}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00136}00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00137}00137\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ StreamWriter\ SW\ =\ File.AppendText(LogPath\ +\ LogFile);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ SW.WriteLine(\$\textcolor{stringliteral}{"{}\{DateTime.Now.ToString()\}\ [\{Type.ToString()\}]\ \{Description\}"{}});}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ SW.Close();}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00141}00141\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00142}00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab0d4998a26f5b5742ad38c4af8817e32}{Exception}}\ ex)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00143}00143\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00144}00144\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00145}00145\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00147}\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_aea52f6628afd6bcb55105bd0a2f1d8da}{00147}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{object}\ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_aea52f6628afd6bcb55105bd0a2f1d8da}{TrimLogs}}()}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00148}00148\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00149}00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00150}00150\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \_context.Database.SetCommandTimeout(TimeSpan.FromMinutes(2));}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ var\ deleteCount\ =\ \_context.Database.ExecuteSqlRaw(\textcolor{stringliteral}{"{}DELETE\ FROM\ LogEntries\ WHERE\ Created\ <\ @cutOff"{}},\ \textcolor{keyword}{new}\ SqlParameter(\textcolor{stringliteral}{"{}@cutOff"{}},\ DateTime.Now.AddDays(-\/\_settings.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_app_settings_ac5d8eb3593c0b360319c10c22cc3dea8}{GeneralSettings}}.\mbox{\hyperlink{class_ainslie_a_p_i_1_1_helpers_1_1_general_settings_a25d689b56613693dc6f5201dd66f06d7}{DaysToKeepLogs}})));}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \{\ error\ =\ \textcolor{keyword}{false},\ message\ =\ \$\textcolor{stringliteral}{"{}deleted\ \{deleteCount\}\ logs"{}}\ \};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00154}00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00155}00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ad84b4e28e72830a4e61727a4b16a847aab0d4998a26f5b5742ad38c4af8817e32}{Exception}}\ ex)}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00156}00156\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00157}00157\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ errMsg\ =\ \$\textcolor{stringliteral}{"{}exception\ trimming\ logs\ on\ ainslie\ api\ \{ex\}"{}};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00158}00158\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_a83bbf569dea7ea5a40e02fca200aad8c}{LogException}}(\mbox{\hyperlink{class_ainslie_a_p_i_1_1_services_1_1_log_service_ab557dc1394f5cf56cfb78c765fdfffe6}{LogSources}}.LogService,\ errMsg);}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00159}00159\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{new}\ \{\ error\ =\ \textcolor{keyword}{true},\ message\ =\ errMsg\ \};}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00160}00160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00161}00161\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_log_service_8cs_source_l00162}00162\ \}}

\end{DoxyCode}
