<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AinslieAPI: AinslieAPI.Services.InternalApiService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AinslieAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_ainslie_a_p_i.html">AinslieAPI</a></li><li class="navelem"><a class="el" href="namespace_ainslie_a_p_i_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service.html">InternalApiService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AinslieAPI.Services.InternalApiService Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provides services for interacting with Internal API, particularly for retrieving Green ID customer data.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa12cb20e0b39fccf99037e24cec32cda" id="r_aa12cb20e0b39fccf99037e24cec32cda"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa12cb20e0b39fccf99037e24cec32cda">InternalApiService</a> (IOptions&lt; <a class="el" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html">AppSettings</a> &gt; appSettings, <a class="el" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html">LogService</a> logService)</td></tr>
<tr class="memdesc:aa12cb20e0b39fccf99037e24cec32cda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises a new instance of the InternalApiService with application settings and a logging service.  <br /></td></tr>
<tr class="separator:aa12cb20e0b39fccf99037e24cec32cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac96a3e52c78c6b67de6a0f244fd70a60" id="r_ac96a3e52c78c6b67de6a0f244fd70a60"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer.html">GreenIdCustomer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac96a3e52c78c6b67de6a0f244fd70a60">GetGreenIdCustomer</a> (string branch, string userId)</td></tr>
<tr class="memdesc:ac96a3e52c78c6b67de6a0f244fd70a60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves Green ID customer data from Internal API based on the specified branch and user ID.  <br /></td></tr>
<tr class="separator:ac96a3e52c78c6b67de6a0f244fd70a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a070bb565246fb698283432930d9cd1" id="r_a7a070bb565246fb698283432930d9cd1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7a070bb565246fb698283432930d9cd1">PostNetsuiteCustomer</a> (<a class="el" href="class_internal_a_p_i_1_1_dto_1_1_netsuite_1_1_netsuite_customer_request.html">NetsuiteCustomerRequest</a> netsuiteCustomerRequest)</td></tr>
<tr class="memdesc:a7a070bb565246fb698283432930d9cd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Submits customer data to Netsuite via Internal API and retrieves the Netsuite customer ID.  <br /></td></tr>
<tr class="separator:a7a070bb565246fb698283432930d9cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c183f663dbc4061a007aee4e5cf28e" id="r_aa8c183f663dbc4061a007aee4e5cf28e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8c183f663dbc4061a007aee4e5cf28e">UpdateGreenIdDbNetsuiteId</a> (string greenIdRef, int netsuiteId)</td></tr>
<tr class="memdesc:aa8c183f663dbc4061a007aee4e5cf28e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Netsuite ID associated with a specific Green ID record in the database.  <br /></td></tr>
<tr class="separator:aa8c183f663dbc4061a007aee4e5cf28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af507e96372a12f14e6ae166a5d495ef2" id="r_af507e96372a12f14e6ae166a5d495ef2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af507e96372a12f14e6ae166a5d495ef2">SendEmail</a> (<a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_internal_api_1_1_email_post.html">EmailPost</a> email)</td></tr>
<tr class="memdesc:af507e96372a12f14e6ae166a5d495ef2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an email using the details provided in the EmailPost object via Internal API.  <br /></td></tr>
<tr class="separator:af507e96372a12f14e6ae166a5d495ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4c5cccb2233540343e36fe0e8a0acc" id="r_a0c4c5cccb2233540343e36fe0e8a0acc"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_priceapp_1_1_product_price.html">ProductPrice</a> &gt;?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c4c5cccb2233540343e36fe0e8a0acc">GetProductPricing</a> ()</td></tr>
<tr class="memdesc:a0c4c5cccb2233540343e36fe0e8a0acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches the current product pricing from the internal API and deserialises the response into a list of ProductPrice objects.  <br /></td></tr>
<tr class="separator:a0c4c5cccb2233540343e36fe0e8a0acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c4662b56f1cf03cfecb9928e1e884a" id="r_a09c4662b56f1cf03cfecb9928e1e884a"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_priceapp_1_1_asset_price.html">AssetPrice</a> &gt;?&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a09c4662b56f1cf03cfecb9928e1e884a">GetAssetPricing</a> ()</td></tr>
<tr class="memdesc:a09c4662b56f1cf03cfecb9928e1e884a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current asset pricing from Internal API and deserialises the response into a list of AssetPrice objects.  <br /></td></tr>
<tr class="separator:a09c4662b56f1cf03cfecb9928e1e884a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="properties" name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:ad618f887f10a20cc6822d67b26851795" id="r_ad618f887f10a20cc6822d67b26851795"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html">AppSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a><code> [get, set]</code></td></tr>
<tr class="separator:ad618f887f10a20cc6822d67b26851795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd98fe339f6ab003ff4d86a233a556e" id="r_acfd98fe339f6ab003ff4d86a233a556e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html">LogService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a><code> [get, set]</code></td></tr>
<tr class="separator:acfd98fe339f6ab003ff4d86a233a556e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides services for interacting with Internal API, particularly for retrieving Green ID customer data. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa12cb20e0b39fccf99037e24cec32cda" name="aa12cb20e0b39fccf99037e24cec32cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa12cb20e0b39fccf99037e24cec32cda">&#9670;&#160;</a></span>InternalApiService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AinslieAPI.Services.InternalApiService.InternalApiService </td>
          <td>(</td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html">AppSettings</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>appSettings</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html">LogService</a></td>          <td class="paramname"><span class="paramname"><em>logService</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises a new instance of the InternalApiService with application settings and a logging service. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">appSettings</td><td>Application settings for configuration.</td></tr>
    <tr><td class="paramname">logService</td><td>Service for logging errors and information.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   29</span>        {</div>
<div class="line"><span class="lineno">   30</span>            <a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a> = appSettings.Value;</div>
<div class="line"><span class="lineno">   31</span>            <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a> = logService;</div>
<div class="line"><span class="lineno">   32</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_services_1_1_internal_api_service_html_acfd98fe339f6ab003ff4d86a233a556e"><div class="ttname"><a href="#acfd98fe339f6ab003ff4d86a233a556e">AinslieAPI.Services.InternalApiService._logger</a></div><div class="ttdeci">LogService _logger</div><div class="ttdef"><b>Definition</b> InternalApiService.cs:20</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_services_1_1_internal_api_service_html_ad618f887f10a20cc6822d67b26851795"><div class="ttname"><a href="#ad618f887f10a20cc6822d67b26851795">AinslieAPI.Services.InternalApiService._appSettings</a></div><div class="ttdeci">AppSettings _appSettings</div><div class="ttdef"><b>Definition</b> InternalApiService.cs:19</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a09c4662b56f1cf03cfecb9928e1e884a" name="a09c4662b56f1cf03cfecb9928e1e884a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09c4662b56f1cf03cfecb9928e1e884a">&#9670;&#160;</a></span>GetAssetPricing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_priceapp_1_1_asset_price.html">AssetPrice</a> &gt;? AinslieAPI.Services.InternalApiService.GetAssetPricing </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the current asset pricing from Internal API and deserialises the response into a list of AssetPrice objects. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of AssetPrice objects, or null if the request fails or encounters an error.</dd></dl>
<p>Initiates a GET request to Internal API's asset list endpoint. Errors during the request or deserialisation process are logged. </p>
<div class="fragment"><div class="line"><span class="lineno">  285</span>        {</div>
<div class="line"><span class="lineno">  286</span>            List&lt;AssetPrice&gt;? priceList = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  287</span>            var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">  288</span>            var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a387a97c92a494cb529c4a9ff5acc1013">Endpoint_PriceappAssetList</a>, RestSharp.Method.Get);</div>
<div class="line"><span class="lineno">  289</span>            RestResponse response;</div>
<div class="line"><span class="lineno">  290</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  291</span>            {</div>
<div class="line"><span class="lineno">  292</span>                response = client.Execute(request);</div>
<div class="line"><span class="lineno">  293</span>                <span class="keywordflow">if</span> (response?.Content != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  294</span>                {</div>
<div class="line"><span class="lineno">  295</span>                    <span class="keywordflow">if</span> (response.IsSuccessful)</div>
<div class="line"><span class="lineno">  296</span>                    {</div>
<div class="line"><span class="lineno">  297</span>                        priceList = JsonConvert.DeserializeObject&lt;List&lt;AssetPrice&gt;&gt;(response.Content);</div>
<div class="line"><span class="lineno">  298</span>                    }</div>
<div class="line"><span class="lineno">  299</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  300</span>                    {</div>
<div class="line"><span class="lineno">  301</span>                        <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  302</span>                            $<span class="stringliteral">&quot;error deserialising asset pricing from internal api asset list&quot;</span>,</div>
<div class="line"><span class="lineno">  303</span>                            $<span class="stringliteral">&quot;StatusCode: {(int)response.StatusCode}&quot;</span>,</div>
<div class="line"><span class="lineno">  304</span>                            $<span class="stringliteral">&quot;StatusDescription: {response.StatusDescription}&quot;</span>,</div>
<div class="line"><span class="lineno">  305</span>                            $<span class="stringliteral">&quot;Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">  306</span>                    }</div>
<div class="line"><span class="lineno">  307</span>                }</div>
<div class="line"><span class="lineno">  308</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  309</span>                {</div>
<div class="line"><span class="lineno">  310</span>                    <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  311</span>                        $<span class="stringliteral">&quot;error getting asset list from internal api, response object is null&quot;</span>);</div>
<div class="line"><span class="lineno">  312</span>                }</div>
<div class="line"><span class="lineno">  313</span>            }</div>
<div class="line"><span class="lineno">  314</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  315</span>            {</div>
<div class="line"><span class="lineno">  316</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;exception getting asset list from internal api&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  317</span>            }</div>
<div class="line"><span class="lineno">  318</span>            <span class="keywordflow">return</span> priceList;</div>
<div class="line"><span class="lineno">  319</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_app_settings_html_a51ac79da86ec47d7825bef5a33339cb9"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">AinslieAPI.Helpers.AppSettings.InternalApiSettings</a></div><div class="ttdeci">InternalApiSettings InternalApiSettings</div><div class="ttdef"><b>Definition</b> AppSettings.cs:9</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a387a97c92a494cb529c4a9ff5acc1013"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a387a97c92a494cb529c4a9ff5acc1013">AinslieAPI.Helpers.InternalApiSettings.Endpoint_PriceappAssetList</a></div><div class="ttdeci">string Endpoint_PriceappAssetList</div><div class="ttdef"><b>Definition</b> AppSettings.cs:49</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a7ea819d8b324872a0ec9458348ceae97"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">AinslieAPI.Helpers.InternalApiSettings.BaseUrl</a></div><div class="ttdeci">string BaseUrl</div><div class="ttdef"><b>Definition</b> AppSettings.cs:43</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_services_1_1_log_service_html_a83bbf569dea7ea5a40e02fca200aad8c"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">AinslieAPI.Services.LogService.LogException</a></div><div class="ttdeci">LogEntry LogException(LogSources logSource, params object[] dataList)</div><div class="ttdef"><b>Definition</b> LogService.cs:72</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_services_1_1_log_service_html_a9bf79a218e0884ac9cabd3ac87b81321"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">AinslieAPI.Services.LogService.LogError</a></div><div class="ttdeci">LogEntry LogError(LogSources logSource, params object[] dataList)</div><div class="ttdef"><b>Definition</b> LogService.cs:66</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a09c4662b56f1cf03cfecb9928e1e884a_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a09c4662b56f1cf03cfecb9928e1e884a_icgraph.svg" width="466" height="120"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac96a3e52c78c6b67de6a0f244fd70a60" name="ac96a3e52c78c6b67de6a0f244fd70a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac96a3e52c78c6b67de6a0f244fd70a60">&#9670;&#160;</a></span>GetGreenIdCustomer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer.html">GreenIdCustomer</a> AinslieAPI.Services.InternalApiService.GetGreenIdCustomer </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>branch</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>userId</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves Green ID customer data from Internal API based on the specified branch and user ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">branch</td><td>The branch identifier for the customer data request.</td></tr>
    <tr><td class="paramname">userId</td><td>The user ID associated with the Green ID customer data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A GreenIdCustomer object containing the customer's details, or null if no data is found or an error occurs.</dd></dl>
<p>Makes a GET request to Internal API using branch and user ID as parameters. Logs detailed errors if the request fails. </p>
<div class="fragment"><div class="line"><span class="lineno">   47</span>        {</div>
<div class="line"><span class="lineno">   48</span>            <a class="code hl_class" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer.html">GreenIdCustomer</a> greenIdCustomer = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">   49</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(branch) || <span class="keywordtype">string</span>.IsNullOrEmpty(userId))</div>
<div class="line"><span class="lineno">   50</span>                <span class="keywordflow">return</span> greenIdCustomer;</div>
<div class="line"><span class="lineno">   51</span>            var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">   52</span>            var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a3b3c81d65b952ce0d7530e2da69bcf2b">Endpoint_GreenIdCustomer</a>, RestSharp.Method.Get);</div>
<div class="line"><span class="lineno">   53</span>            request.AddUrlSegment(<span class="stringliteral">&quot;branch&quot;</span>, branch);</div>
<div class="line"><span class="lineno">   54</span>            request.AddUrlSegment(<span class="stringliteral">&quot;userid&quot;</span>, userId);</div>
<div class="line"><span class="lineno">   55</span>            RestResponse response = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">   56</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">   57</span>            {</div>
<div class="line"><span class="lineno">   58</span>                response = client.Execute(request);</div>
<div class="line"><span class="lineno">   59</span>                <span class="keywordflow">if</span> (response != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">   60</span>                {</div>
<div class="line"><span class="lineno">   61</span>                    <span class="keywordflow">if</span> (response.IsSuccessful)</div>
<div class="line"><span class="lineno">   62</span>                    {</div>
<div class="line"><span class="lineno">   63</span>                        greenIdCustomer = JsonConvert.DeserializeObject&lt;<a class="code hl_class" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer.html">GreenIdCustomer</a>&gt;(response.Content);</div>
<div class="line"><span class="lineno">   64</span>                    }</div>
<div class="line"><span class="lineno">   65</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   66</span>                    {</div>
<div class="line"><span class="lineno">   67</span>                        <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">   68</span>                            $<span class="stringliteral">&quot;error getting greenid customer from internal api&quot;</span>,</div>
<div class="line"><span class="lineno">   69</span>                            $<span class="stringliteral">&quot;StatusCode: {(int)response.StatusCode}&quot;</span>,</div>
<div class="line"><span class="lineno">   70</span>                            $<span class="stringliteral">&quot;StatusDescription: {response.StatusDescription}&quot;</span>,</div>
<div class="line"><span class="lineno">   71</span>                            $<span class="stringliteral">&quot;Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">   72</span>                    }</div>
<div class="line"><span class="lineno">   73</span>                }</div>
<div class="line"><span class="lineno">   74</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   75</span>                {</div>
<div class="line"><span class="lineno">   76</span>                    <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">   77</span>                        $<span class="stringliteral">&quot;error getting greenid customer from internal api, response object is null&quot;</span>);</div>
<div class="line"><span class="lineno">   78</span>                }</div>
<div class="line"><span class="lineno">   79</span>            }</div>
<div class="line"><span class="lineno">   80</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">   81</span>            {</div>
<div class="line"><span class="lineno">   82</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;Exception getting green id customer from internal api&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">   83</span>            }</div>
<div class="line"><span class="lineno">   84</span>            <span class="keywordflow">return</span> greenIdCustomer;</div>
<div class="line"><span class="lineno">   85</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer_html"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_d_t_o_1_1_green_id_1_1_green_id_customer.html">AinslieAPI.DTO.GreenId.GreenIdCustomer</a></div><div class="ttdef"><b>Definition</b> GreenID.cs:4</div></div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a3b3c81d65b952ce0d7530e2da69bcf2b"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a3b3c81d65b952ce0d7530e2da69bcf2b">AinslieAPI.Helpers.InternalApiSettings.Endpoint_GreenIdCustomer</a></div><div class="ttdeci">string Endpoint_GreenIdCustomer</div><div class="ttdef"><b>Definition</b> AppSettings.cs:45</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_ac96a3e52c78c6b67de6a0f244fd70a60_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_ac96a3e52c78c6b67de6a0f244fd70a60_icgraph.svg" width="454" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0c4c5cccb2233540343e36fe0e8a0acc" name="a0c4c5cccb2233540343e36fe0e8a0acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4c5cccb2233540343e36fe0e8a0acc">&#9670;&#160;</a></span>GetProductPricing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_priceapp_1_1_product_price.html">ProductPrice</a> &gt;? AinslieAPI.Services.InternalApiService.GetProductPricing </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fetches the current product pricing from the internal API and deserialises the response into a list of ProductPrice objects. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of ProductPrice objects, or null if the request fails or encounters an error.</dd></dl>
<p>Sends a GET request to the internal API's product list endpoint. Logs errors or exceptions to aid in diagnosing issues with fetching or deserialising the data. </p>
<div class="fragment"><div class="line"><span class="lineno">  239</span>        {</div>
<div class="line"><span class="lineno">  240</span>            List&lt;ProductPrice&gt;? priceList = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  241</span>            var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">  242</span>            var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a2a7258c704e05db98eb9bb29dab3db68">Endpoint_ABWebProductList</a>, RestSharp.Method.Get);</div>
<div class="line"><span class="lineno">  243</span>            RestResponse response;</div>
<div class="line"><span class="lineno">  244</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  245</span>            {</div>
<div class="line"><span class="lineno">  246</span>                response = client.Execute(request);</div>
<div class="line"><span class="lineno">  247</span>                <span class="keywordflow">if</span> (response?.Content != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  248</span>                {</div>
<div class="line"><span class="lineno">  249</span>                    <span class="keywordflow">if</span> (response.IsSuccessful)</div>
<div class="line"><span class="lineno">  250</span>                    {</div>
<div class="line"><span class="lineno">  251</span>                        priceList = JsonConvert.DeserializeObject&lt;List&lt;ProductPrice&gt;&gt;(response.Content);</div>
<div class="line"><span class="lineno">  252</span>                    }</div>
<div class="line"><span class="lineno">  253</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  254</span>                    {</div>
<div class="line"><span class="lineno">  255</span>                        <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  256</span>                            $<span class="stringliteral">&quot;error deserialising product pricing from internal api product list&quot;</span>,</div>
<div class="line"><span class="lineno">  257</span>                            $<span class="stringliteral">&quot;StatusCode: {(int)response.StatusCode}&quot;</span>,</div>
<div class="line"><span class="lineno">  258</span>                            $<span class="stringliteral">&quot;StatusDescription: {response.StatusDescription}&quot;</span>,</div>
<div class="line"><span class="lineno">  259</span>                            $<span class="stringliteral">&quot;Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">  260</span>                    }</div>
<div class="line"><span class="lineno">  261</span>                }</div>
<div class="line"><span class="lineno">  262</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  263</span>                {</div>
<div class="line"><span class="lineno">  264</span>                    <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  265</span>                        $<span class="stringliteral">&quot;error getting product list from internal api, response object is null&quot;</span>);</div>
<div class="line"><span class="lineno">  266</span>                }</div>
<div class="line"><span class="lineno">  267</span>            }</div>
<div class="line"><span class="lineno">  268</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  269</span>            {</div>
<div class="line"><span class="lineno">  270</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;exception getting product list from internal api&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  271</span>            }</div>
<div class="line"><span class="lineno">  272</span>            <span class="keywordflow">return</span> priceList;</div>
<div class="line"><span class="lineno">  273</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a2a7258c704e05db98eb9bb29dab3db68"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a2a7258c704e05db98eb9bb29dab3db68">AinslieAPI.Helpers.InternalApiSettings.Endpoint_ABWebProductList</a></div><div class="ttdeci">string Endpoint_ABWebProductList</div><div class="ttdef"><b>Definition</b> AppSettings.cs:48</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a0c4c5cccb2233540343e36fe0e8a0acc_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a0c4c5cccb2233540343e36fe0e8a0acc_icgraph.svg" width="488" height="120"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7a070bb565246fb698283432930d9cd1" name="a7a070bb565246fb698283432930d9cd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a070bb565246fb698283432930d9cd1">&#9670;&#160;</a></span>PostNetsuiteCustomer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AinslieAPI.Services.InternalApiService.PostNetsuiteCustomer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_internal_a_p_i_1_1_dto_1_1_netsuite_1_1_netsuite_customer_request.html">NetsuiteCustomerRequest</a></td>          <td class="paramname"><span class="paramname"><em>netsuiteCustomerRequest</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Submits customer data to Netsuite via Internal API and retrieves the Netsuite customer ID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">netsuiteCustomerRequest</td><td>The customer data to be submitted to Netsuite.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The Netsuite customer ID on success, or 0 if the submission fails.</dd></dl>
<p>This method attempts to post the provided customer data to Netsuite using an API call. It handles errors and exceptions by logging detailed messages for troubleshooting. Success or failure is determined by the response status. </p>
<div class="fragment"><div class="line"><span class="lineno">  100</span>        {</div>
<div class="line"><span class="lineno">  101</span>            <span class="keywordtype">int</span> netsuiteCustomerId = 0;</div>
<div class="line"><span class="lineno">  102</span>            <span class="keywordflow">if</span> (netsuiteCustomerRequest == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  103</span>            {</div>
<div class="line"><span class="lineno">  104</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;error posting customer to netsuite via internal api, netsuite customer is null&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>                <span class="keywordflow">return</span> netsuiteCustomerId;</div>
<div class="line"><span class="lineno">  106</span>            }</div>
<div class="line"><span class="lineno">  107</span>            var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">  108</span>            var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a0476e4cb564fcb4a92e84a51d9208f53">Endpoint_NetsuiteCustomer</a>, RestSharp.Method.Post);</div>
<div class="line"><span class="lineno">  109</span>            request.AddJsonBody(JsonConvert.SerializeObject( netsuiteCustomerRequest));</div>
<div class="line"><span class="lineno">  110</span>            RestResponse response = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  112</span>            {</div>
<div class="line"><span class="lineno">  113</span>                response = client.Execute(request);</div>
<div class="line"><span class="lineno">  114</span>                <span class="keywordflow">if</span> (response != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  115</span>                {</div>
<div class="line"><span class="lineno">  116</span>                    <span class="keywordflow">if</span> (response.IsSuccessful)</div>
<div class="line"><span class="lineno">  117</span>                    {</div>
<div class="line"><span class="lineno">  118</span>                        netsuiteCustomerId = JsonConvert.DeserializeObject&lt;<span class="keywordtype">int</span>&gt;(response.Content);</div>
<div class="line"><span class="lineno">  119</span>                    }</div>
<div class="line"><span class="lineno">  120</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  121</span>                    {</div>
<div class="line"><span class="lineno">  122</span>                        <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  123</span>                            $<span class="stringliteral">&quot;error posting customer to netsuite via internal api&quot;</span>,</div>
<div class="line"><span class="lineno">  124</span>                            $<span class="stringliteral">&quot;StatusCode: {(int)response.StatusCode}&quot;</span>,</div>
<div class="line"><span class="lineno">  125</span>                            $<span class="stringliteral">&quot;StatusDescription: {response.StatusDescription}&quot;</span>,</div>
<div class="line"><span class="lineno">  126</span>                            $<span class="stringliteral">&quot;Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">  127</span>                    }</div>
<div class="line"><span class="lineno">  128</span>                }</div>
<div class="line"><span class="lineno">  129</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  130</span>                {</div>
<div class="line"><span class="lineno">  131</span>                    <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  132</span>                        $<span class="stringliteral">&quot;error posting customer to netsuite via internal api, response object is null&quot;</span>);</div>
<div class="line"><span class="lineno">  133</span>                }</div>
<div class="line"><span class="lineno">  134</span>            }</div>
<div class="line"><span class="lineno">  135</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  136</span>            {</div>
<div class="line"><span class="lineno">  137</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;Exception posting customer to netsuite via internal api&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  138</span>            }</div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">return</span> netsuiteCustomerId;</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a0476e4cb564fcb4a92e84a51d9208f53"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a0476e4cb564fcb4a92e84a51d9208f53">AinslieAPI.Helpers.InternalApiSettings.Endpoint_NetsuiteCustomer</a></div><div class="ttdeci">string Endpoint_NetsuiteCustomer</div><div class="ttdef"><b>Definition</b> AppSettings.cs:46</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a7a070bb565246fb698283432930d9cd1_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_a7a070bb565246fb698283432930d9cd1_icgraph.svg" width="463" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af507e96372a12f14e6ae166a5d495ef2" name="af507e96372a12f14e6ae166a5d495ef2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af507e96372a12f14e6ae166a5d495ef2">&#9670;&#160;</a></span>SendEmail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AinslieAPI.Services.InternalApiService.SendEmail </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_ainslie_a_p_i_1_1_d_t_o_1_1_internal_api_1_1_email_post.html">EmailPost</a></td>          <td class="paramname"><span class="paramname"><em>email</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an email using the details provided in the EmailPost object via Internal API. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">email</td><td>The email details, including recipients, subject, and body.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool indicating success <code>(true)</code> or failure <code>(false)</code></dd></dl>
<p>Executes a POST request to Internal API's email endpoint, serialising the EmailPost object as JSON in the request body. Logs errors or exceptions encountered during the process. </p>
<div class="fragment"><div class="line"><span class="lineno">  209</span>        {</div>
<div class="line"><span class="lineno">  210</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  211</span>            {</div>
<div class="line"><span class="lineno">  212</span>                var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">  213</span>                var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#abf628e305958d76a6b0f1769ce132d1e">Endpoint_Email</a>, RestSharp.Method.Post);</div>
<div class="line"><span class="lineno">  214</span>                request.AddJsonBody(email);</div>
<div class="line"><span class="lineno">  215</span>                RestResponse response = client.Execute(request);</div>
<div class="line"><span class="lineno">  216</span>                <span class="keywordflow">if</span> (response.IsSuccessStatusCode)</div>
<div class="line"><span class="lineno">  217</span>                {</div>
<div class="line"><span class="lineno">  218</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  219</span>                }</div>
<div class="line"><span class="lineno">  220</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService, <span class="stringliteral">&quot;unsuccessful response sending email through internal api&quot;</span>, $<span class="stringliteral">&quot;StatusCode: {response.StatusCode} Description: {response.StatusDescription} Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">  221</span>            }</div>
<div class="line"><span class="lineno">  222</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  223</span>            {</div>
<div class="line"><span class="lineno">  224</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, <span class="stringliteral">&quot;exception sending email through internal api&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  225</span>            }</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  227</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_abf628e305958d76a6b0f1769ce132d1e"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#abf628e305958d76a6b0f1769ce132d1e">AinslieAPI.Helpers.InternalApiSettings.Endpoint_Email</a></div><div class="ttdeci">string Endpoint_Email</div><div class="ttdef"><b>Definition</b> AppSettings.cs:44</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_af507e96372a12f14e6ae166a5d495ef2_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa8c183f663dbc4061a007aee4e5cf28e" name="aa8c183f663dbc4061a007aee4e5cf28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c183f663dbc4061a007aee4e5cf28e">&#9670;&#160;</a></span>UpdateGreenIdDbNetsuiteId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool AinslieAPI.Services.InternalApiService.UpdateGreenIdDbNetsuiteId </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>greenIdRef</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>netsuiteId</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the Netsuite ID associated with a specific Green ID record in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">greenIdRef</td><td>The reference identifier for the Green ID record.</td></tr>
    <tr><td class="paramname">netsuiteId</td><td>The Netsuite ID to associate with the Green ID record.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool indicating success <code>(true)</code> or failure <code>(false)</code></dd></dl>
<p>Attempts to update the Green ID database record with the specified Netsuite ID via Internal API call. </p>
<div class="fragment"><div class="line"><span class="lineno">  155</span>        {</div>
<div class="line"><span class="lineno">  156</span>            dynamic? result = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  157</span>            <span class="keywordflow">if</span> (netsuiteId == 0) </div>
<div class="line"><span class="lineno">  158</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  159</span>            var client = <span class="keyword">new</span> RestClient(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a7ea819d8b324872a0ec9458348ceae97">BaseUrl</a>);</div>
<div class="line"><span class="lineno">  160</span>            var request = <span class="keyword">new</span> RestRequest(<a class="code hl_property" href="#ad618f887f10a20cc6822d67b26851795">_appSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html#a51ac79da86ec47d7825bef5a33339cb9">InternalApiSettings</a>.<a class="code hl_property" href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a8e7987d305669a17e80368284203ccac">Endpoint_UpdateGreenIdDbNetsuiteId</a>, RestSharp.Method.Get);</div>
<div class="line"><span class="lineno">  161</span>            request.AddUrlSegment(<span class="stringliteral">&quot;greenidref&quot;</span>, greenIdRef);</div>
<div class="line"><span class="lineno">  162</span>            request.AddQueryParameter(<span class="stringliteral">&quot;netsuiteid&quot;</span>, netsuiteId);</div>
<div class="line"><span class="lineno">  163</span>            RestResponse response;</div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  165</span>            {</div>
<div class="line"><span class="lineno">  166</span>                response = client.Execute(request);</div>
<div class="line"><span class="lineno">  167</span>                <span class="keywordflow">if</span> (response != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  168</span>                {</div>
<div class="line"><span class="lineno">  169</span>                    <span class="keywordflow">if</span> (response.IsSuccessful)</div>
<div class="line"><span class="lineno">  170</span>                    {</div>
<div class="line"><span class="lineno">  171</span>                        result = JsonConvert.DeserializeObject&lt;dynamic&gt;(response.Content ?? <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  172</span>                    }</div>
<div class="line"><span class="lineno">  173</span>                    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  174</span>                    {</div>
<div class="line"><span class="lineno">  175</span>                        <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  176</span>                            $<span class="stringliteral">&quot;error updating greeniddb customer with netsuiteid&quot;</span>,</div>
<div class="line"><span class="lineno">  177</span>                            $<span class="stringliteral">&quot;StatusCode: {(int)response.StatusCode}&quot;</span>,</div>
<div class="line"><span class="lineno">  178</span>                            $<span class="stringliteral">&quot;StatusDescription: {response.StatusDescription}&quot;</span>,</div>
<div class="line"><span class="lineno">  179</span>                            $<span class="stringliteral">&quot;Content: {response.Content}&quot;</span>);</div>
<div class="line"><span class="lineno">  180</span>                    }</div>
<div class="line"><span class="lineno">  181</span>                }</div>
<div class="line"><span class="lineno">  182</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  183</span>                {</div>
<div class="line"><span class="lineno">  184</span>                    <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a9bf79a218e0884ac9cabd3ac87b81321">LogError</a>(LogService.LogSources.InternalApiService,</div>
<div class="line"><span class="lineno">  185</span>                        $<span class="stringliteral">&quot;error updating greeniddb customer with netsuiteid, response object is null&quot;</span>);</div>
<div class="line"><span class="lineno">  186</span>                }</div>
<div class="line"><span class="lineno">  187</span>            }</div>
<div class="line"><span class="lineno">  188</span>            <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  189</span>            {</div>
<div class="line"><span class="lineno">  190</span>                <a class="code hl_property" href="#acfd98fe339f6ab003ff4d86a233a556e">_logger</a>.<a class="code hl_function" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html#a83bbf569dea7ea5a40e02fca200aad8c">LogException</a>(LogService.LogSources.InternalApiService, $<span class="stringliteral">&quot;exception updating greeniddb customer with netsuiteid&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  191</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  192</span>            }</div>
<div class="line"><span class="lineno">  193</span>            <span class="keywordflow">return</span> result?.success == <span class="keyword">true</span> ? true : <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  194</span>        }</div>
<div class="ttc" id="aclass_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings_html_a8e7987d305669a17e80368284203ccac"><div class="ttname"><a href="class_ainslie_a_p_i_1_1_helpers_1_1_internal_api_settings.html#a8e7987d305669a17e80368284203ccac">AinslieAPI.Helpers.InternalApiSettings.Endpoint_UpdateGreenIdDbNetsuiteId</a></div><div class="ttdeci">string Endpoint_UpdateGreenIdDbNetsuiteId</div><div class="ttdef"><b>Definition</b> AppSettings.cs:47</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_aa8c183f663dbc4061a007aee4e5cf28e_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_ainslie_a_p_i_1_1_services_1_1_internal_api_service_aa8c183f663dbc4061a007aee4e5cf28e_icgraph.svg" width="492" height="120"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="ad618f887f10a20cc6822d67b26851795" name="ad618f887f10a20cc6822d67b26851795"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad618f887f10a20cc6822d67b26851795">&#9670;&#160;</a></span>_appSettings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ainslie_a_p_i_1_1_helpers_1_1_app_settings.html">AppSettings</a> AinslieAPI.Services.InternalApiService._appSettings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   19</span>{ <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a id="acfd98fe339f6ab003ff4d86a233a556e" name="acfd98fe339f6ab003ff4d86a233a556e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd98fe339f6ab003ff4d86a233a556e">&#9670;&#160;</a></span>_logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ainslie_a_p_i_1_1_services_1_1_log_service.html">LogService</a> AinslieAPI.Services.InternalApiService._logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">set</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   20</span>{ <span class="keyword">get</span>; <span class="keyword">set</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/STRIDER/source/repos/AinslieAPI/Services/<a class="el" href="_internal_api_service_8cs.html">InternalApiService.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
