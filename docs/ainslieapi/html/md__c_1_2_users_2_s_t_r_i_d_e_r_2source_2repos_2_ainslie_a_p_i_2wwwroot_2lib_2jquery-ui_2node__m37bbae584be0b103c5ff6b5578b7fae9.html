<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AinslieAPI: lru cache</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AinslieAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md__c_1_2_users_2_s_t_r_i_d_e_r_2source_2repos_2_ainslie_a_p_i_2wwwroot_2lib_2jquery-ui_2node__m37bbae584be0b103c5ff6b5578b7fae9.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">lru cache</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md3189"></a> A cache object that deletes the least-recently-used items.</p>
<h1><a class="anchor" id="autotoc_md3190"></a>
Usage:</h1>
<div class="fragment"><div class="line">var LRU = require(&quot;lru-cache&quot;)</div>
<div class="line">  , options = { max: 500</div>
<div class="line">              , length: function (n) { return n * 2 }</div>
<div class="line">              , dispose: function (key, n) { n.close() }</div>
<div class="line">              , maxAge: 1000 * 60 * 60 }</div>
<div class="line">  , cache = LRU(options)</div>
<div class="line">  , otherCache = LRU(50) // sets just the max size</div>
<div class="line"> </div>
<div class="line">cache.set(&quot;key&quot;, &quot;value&quot;)</div>
<div class="line">cache.get(&quot;key&quot;) // &quot;value&quot;</div>
<div class="line"> </div>
<div class="line">cache.reset()    // empty the cache</div>
</div><!-- fragment --><p>If you put more stuff in it, then items will fall out.</p>
<p>If you try to put an oversized thing in it, then it'll fall out right away.</p>
<h1><a class="anchor" id="autotoc_md3191"></a>
Keys should always be Strings or Numbers</h1>
<p>Note: this module will print warnings to <code>console.error</code> if you use a key that is not a String or Number. Because items are stored in an object, which coerces keys to a string, it won't go well for you if you try to use a key that is not a unique string, it'll cause surprise collisions. For example:</p>
<div class="fragment"><div class="line">// Bad Example!  Dont&#39; do this!</div>
<div class="line">var cache = LRU()</div>
<div class="line">var a = {}</div>
<div class="line">var b = {}</div>
<div class="line">cache.set(a, &#39;this is a&#39;)</div>
<div class="line">cache.set(b, &#39;this is b&#39;)</div>
<div class="line">console.log(cache.get(a)) // prints: &#39;this is b&#39;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3192"></a>
Options</h1>
<ul>
<li><code>max</code> The maximum size of the cache, checked by applying the length function to all values in the cache. Not setting this is kind of silly, since that's the whole purpose of this lib, but it defaults to <code>Infinity</code>.</li>
<li><code>maxAge</code> Maximum age in ms. Items are not pro-actively pruned out as they age, but if you try to get an item that is too old, it'll drop it and return undefined instead of giving it to you.</li>
<li><code>length</code> Function that is used to calculate the length of stored items. If you're storing strings or buffers, then you probably want to do something like <code>function(n){return n.length}</code>. The default is <code>function(n){return 1}</code>, which is fine if you want to store <code>max</code> like-sized things.</li>
<li><code>dispose</code> Function that is called on items when they are dropped from the cache. This can be handy if you want to close file descriptors or do other cleanup tasks when items are no longer accessible. Called with <code>key, value</code>. It's called <em>before</em> actually removing the item from the internal cache, so if you want to immediately put it back in, you'll have to do that in a <code>nextTick</code> or <code>setTimeout</code> callback or it won't do anything.</li>
<li><code>stale</code> By default, if you set a <code>maxAge</code>, it'll only actually pull stale items out of the cache when you <code>get(key)</code>. (That is, it's not pre-emptively doing a <code>setTimeout</code> or anything.) If you set <code>stale:true</code>, it'll return the stale value before deleting it. If you don't set this, then it'll return <code>undefined</code> when you try to get a stale entry, as if it had already been deleted.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3193"></a>
API</h1>
<ul>
<li><code>set(key, value, maxAge)</code></li>
<li><p class="startli"><code>get(key) =&gt; value</code></p>
<p class="startli">Both of these will update the "recently used"-ness of the key. They do what you think. <code>max</code> is optional and overrides the cache <code>max</code> option if provided.</p>
</li>
<li><p class="startli"><code>peek(key)</code></p>
<p class="startli">Returns the key value (or <code>undefined</code> if not found) without updating the "recently used"-ness of the key.</p>
<p class="startli">(If you find yourself using this a lot, you <em>might</em> be using the wrong sort of data structure, but there are some use cases where it's handy.)</p>
</li>
<li><p class="startli"><code>del(key)</code></p>
<p class="startli">Deletes a key out of the cache.</p>
</li>
<li><p class="startli"><code>reset()</code></p>
<p class="startli">Clear the cache entirely, throwing away all values.</p>
</li>
<li><p class="startli"><code>has(key)</code></p>
<p class="startli">Check if a key is in the cache, without updating the recent-ness or deleting it for being stale.</p>
</li>
<li><p class="startli"><code>forEach(function(value,key,cache), [thisp])</code></p>
<p class="startli">Just like <code>Array.prototype.forEach</code>. Iterates over all the keys in the cache, in order of recent-ness. (Ie, more recently used items are iterated over first.)</p>
</li>
<li><p class="startli"><code>keys()</code></p>
<p class="startli">Return an array of the keys in the cache.</p>
</li>
<li><p class="startli"><code>values()</code></p>
<p class="startli">Return an array of the values in the cache.</p>
</li>
<li><p class="startli"><code>length()</code></p>
<p class="startli">Return total length of objects in cache taking into account <code>length</code> options function.</p>
</li>
<li><p class="startli"><code>itemCount</code></p>
<p class="startli">Return total quantity of objects currently in cache. Note, that <code>stale</code> (see options) items are returned as part of this item count.</p>
</li>
<li><p class="startli"><code>dump()</code></p>
<p class="startli">Return an array of the cache entries ready for serialization and usage with 'destinationCache.load(arr)`.</p>
</li>
<li><p class="startli"><code>load(cacheEntriesArray)</code></p>
<p class="startli">Loads another cache entries array, obtained with <code>sourceCache.dump()</code>, into the cache. The destination cache is reset before loading new entries </p>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
