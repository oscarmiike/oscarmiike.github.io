<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InternalAPI: Commitplease</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">InternalAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Commitplease</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md5568"></a> <a href="http://travis-ci.org/jzaefferer/commitplease"><img src="https://img.shields.io/travis/jzaefferer/commitplease.svg?maxAge=2592000" alt="Travis" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/commitplease"><img src="https://img.shields.io/npm/dm/commitplease.svg?maxAge=2592000" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/commitplease"><img src="https://img.shields.io/npm/v/commitplease.svg?maxAge=2592000" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/commitplease"><img src="https://img.shields.io/npm/l/commitplease.svg?maxAge=2592000" alt="npm" style="pointer-events: none;" class="inline"/></a></p>
<p>This <a href="http://nodejs.org/">node.js</a> module makes sure your git commit messages consistently follow one of these style guides:</p><ol type="1">
<li><a href="http://contribute.jquery.org/commits-and-pull-requests/#commit-guidelines">jQuery Commit Guidelines</a></li>
<li><a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit">AngularJS Commit Guidelines</a></li>
</ol>
<p>You can also make customized validation rules based on those styles.</p>
<h1><a class="anchor" id="autotoc_md5569"></a>
Installation</h1>
<p>Commitplease can be installed locally or globally (or both):</p>
<p>Repo-local install (adds a git hook that runs automatically upon <code>git commit</code>): </p><div class="fragment"><div class="line">cd path/to/your/repo</div>
<div class="line">npm install commitplease --save-dev</div>
</div><!-- fragment --><p>Global install (adds a system-wide executable to be run manually): </p><div class="fragment"><div class="line">npm install -g commitplease</div>
</div><!-- fragment --><p>A git version of 1.8.5 or newer is recommended. If you use <code>git commit --verbose</code>, it is required. Also, currently we do not support custom <code>core.commentchar</code>, so let us know if you set one.</p>
<p>You could also install a global commitplease executable and put it into a <code>package.json</code> script or as a git hook of your choice. Here is an example with a <code>pre-push</code> hook:</p>
<div class="fragment"><div class="line">#!/bin/sh</div>
<div class="line"> </div>
<div class="line">npm run commitplease --silent</div>
</div><!-- fragment --><p>And <code>chmod +x .git/hooks/pre-push</code>. Now each time you do a <code>git push</code>, the hook will be checking <b>all</b> commits on current branch.</p>
<h1><a class="anchor" id="autotoc_md5570"></a>
Usage</h1>
<p>The following ways to begin a commit message are special and always valid:</p>
<ol type="1">
<li><code>0.0.1</code> or any other semantic version</li>
</ol>
<ol type="1">
<li><code>WIP</code>, <code>Wip</code> or <code>wip</code> which means "work in progress"</li>
</ol>
<ol type="1">
<li><code>Merge branch [...]</code> or <code>Merge &lt;commitish&gt; into &lt;commitish&gt;</code></li>
</ol>
<ol type="1">
<li><code>fixup!</code> or <code>squash!</code>, as generated by <code>git commit --fixup</code> and <code>--squash</code>, but any content afterwards is accepted</li>
</ol>
<p>Other ways to make your commit messages special and bypass style checks are described below.</p>
<p>Non-special commit messages must follow one of the style guides (<a href="http://contribute.jquery.org/commits-and-pull-requests/#commit-guidelines">jQuery Commit Guidelines</a> by default)</p>
<h2><a class="anchor" id="autotoc_md5571"></a>
Repo-local install</h2>
<p>Commit as usual. Git will trigger commitplease to check your commit message for errors. Invalid messages will prevent the commit, with details about what went wrong and a copy of the input.</p>
<h2><a class="anchor" id="autotoc_md5572"></a>
Global install</h2>
<p>Navigate to your repository and run the global commitplease executable. By default, it will check all the commit messages. Other examples include (just anything you can pass to <code>git log</code> really):</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Use case   </th><th class="markdownTableHeadNone">command    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Check all commits on branch <code>master</code>   </td><td class="markdownTableBodyNone"><code>commitplease master</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Check all commits on branch <code>feature</code> that are not on <code>master</code>   </td><td class="markdownTableBodyNone"><code>commitplease master..feature</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Check all commits on current branch that are not on <code>master</code>   </td><td class="markdownTableBodyNone"><code>commitplease master..HEAD</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Check the latest 1 commit   </td><td class="markdownTableBodyNone"><code>commitplease -1</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Check all commits between <code>84991d</code> and <code>2021ce</code>   </td><td class="markdownTableBodyNone"><code>commitplease 84991d..2021ce</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Check all commits starting with <code>84991d</code>   </td><td class="markdownTableBodyNone"><code>commitplease 84991d..</code>   </td></tr>
</table>
<p><a href="https://git-scm.com/book/en/v2/Git-Tools-Revision-Selection#Commit-Ranges">Here you can read</a> more about git commit ranges</p>
<h1><a class="anchor" id="autotoc_md5573"></a>
Setup</h1>
<p>You can configure commitplease from <code>package.json</code> of your project. Here are the options common for all style guidelines:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;limits&quot;: {</div>
<div class="line">      &quot;firstLine&quot;: &quot;72&quot;,</div>
<div class="line">      &quot;otherLine&quot;: &quot;80&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;nohook&quot;: false,</div>
<div class="line">    &quot;markerPattern&quot;: &quot;^(clos|fix|resolv)(e[sd]|ing)&quot;,</div>
<div class="line">    &quot;actionPattern&quot;: &quot;^([Cc]los|[Ff]ix|[Rr]esolv)(e[sd]|ing)\\s+[^\\s\\d]+(\\s|$)&quot;,</div>
<div class="line">    &quot;ticketPattern&quot;: &quot;^(Closes|Fixes) (.*#|gh-|[A-Z]{2,}-)[0-9]+&quot;,</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>limits.firstLine</code> and <code>limits.otherLine</code> are the hard limits for the number of symbols on the first line and on other lines of the commit message, respectively.</li>
<li><code>"nohook": false</code> tells commitplease to install its <code>commit-msg</code> hook. Setting <code>"nohook": true</code> makes commitplease skip installing the hook or skip running the hook if it has already been installed. This can be used when wrapping the commitplease validation API into another module, like a <a href="https://github.com/rxaviers/grunt-commitplease/">grunt plugin</a> or husky. This setting does not affect the global commitplease executable, only repo-local.</li>
</ul>
<p>The following options are experimental and are subject to change:</p>
<ul>
<li><code>markerPattern</code>: A (intentionally loose) RegExp that indicates that the line might be a ticket reference. Case insensitive.</li>
<li><code>actionPattern</code>: A RegExp that makes a line marked by <code>markerPattern</code> valid even if the line does not fit <code>ticketPattern</code></li>
<li><code>ticketPattern</code>: A RegExp that detects ticket references: <code>Closes gh-1</code>, <code>Fixes gh-42</code>, <code>WEB-451</code> and similar.</li>
</ul>
<p>The ticket reference match will fail only if <code>markerPattern</code> succeeds and <b>both</b> <code>ticketPattern</code> and <code>actionPattern</code> fail.</p>
<p>When overwriting these patterns in <code>package.json</code>, remember to escape special characters.</p>
<h2><a class="anchor" id="autotoc_md5574"></a>
jQuery</h2>
<p>Here is how to configure validation for <a href="http://contribute.jquery.org/commits-and-pull-requests/#commit-guidelines">jQuery Commit Guidelines</a>:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;style&quot;: &quot;jquery&quot;,</div>
<div class="line">    &quot;component&quot;: true,</div>
<div class="line">    &quot;components&quot;: []</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>"style": "jquery"</code> selects <a href="http://contribute.jquery.org/commits-and-pull-requests/#commit-guidelines">jQuery Commit Guidelines</a></li>
<li><code>"component": true</code> requires a component followed by a colon, like <code>Test:</code> or <code>Docs:</code></li>
<li><code>"components": []</code> is a list of valid components. Example: <code>"components": ["Test", "Docs"]</code>. Members of this list are surrounded by <code>^</code> and <code>$</code> and are treated as a regular expression. When this list is empty, anything followed by a colon is considered to be a valid component name.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5575"></a>
AngularJS</h2>
<p>Here is how to configure validation for <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit">AngularJS Commit Guidelines</a></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;style&quot;: &quot;angular&quot;,</div>
<div class="line">    &quot;types&quot;: [</div>
<div class="line">      &quot;feat&quot;, &quot;fix&quot;, &quot;docs&quot;, &quot;style&quot;, &quot;refactor&quot;, &quot;perf&quot;, &quot;test&quot;, &quot;chore&quot;</div>
<div class="line">    ],</div>
<div class="line">    &quot;scope&quot;: &quot;\\S+.*&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>"style": "angular"</code> selects <a href="https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit">AngularJS Commit Guidelines</a></li>
<li><code>"types"</code> is an array of allowed types</li>
<li><code>"scope": "\\S+.*"</code> is a string that is the regexp for scope. By default it means "at least one non-space character"</li>
</ul>
<h1><a class="anchor" id="autotoc_md5576"></a>
Skip style check</h1>
<p>This paragraph assumes that you would like to skip the style check that happens during <code>git commit</code>. One way to do so is to type <code>git commit --no-verify</code> that will skip a few git hooks, including the one used by commitplease. If skipping many hooks is not what you want or you find yourself doing it too many times, just set the <code>nohook</code> option. You could set that inside <code>package.json</code> as described at the beginning of the setup section. However, if modifying <code>package.json</code> is not possible, just set it in <code>.npmrc</code> (it will overwrite <code>package.json</code>) like so:</p>
<div class="fragment"><div class="line">[commitplease]</div>
<div class="line">nohook = true</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5577"></a>
Husky</h1>
<p>When using commitplease together with <a href="https://github.com/typicode/husky">husky</a>, the following will let husky manage all the hooks and trigger commitplease:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;scripts&quot;: {</div>
<div class="line">    &quot;commitmsg&quot;: &quot;commitplease .git/COMMIT_EDITMSG&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;nohook&quot;: true</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>However, since husky does not use npm in silent mode (and there is <a href="https://github.com/typicode/husky/pull/47">no easy way</a> to make it <a href="https://github.com/npm/npm/issues/5452">do so</a>), there will be a lot of additional output when a message fails validation. Moreover, husky will run your <code>scripts</code> entry and nothing more, so you have to <a href="https://github.com/jzaefferer/commitplease/issues/100">specify everything yourself</a> (e.g. the path to the commit message file). Therefore, using commitplease alone is recommended.</p>
<h1><a class="anchor" id="autotoc_md5578"></a>
API</h1>
<div class="fragment"><div class="line">var validate = require(&#39;commitplease/lib/validate&#39;);</div>
<div class="line">var errors = validate(commit.message);</div>
<div class="line">if (errors.length) {</div>
<div class="line">  postComment(&#39;This commit has &#39; + errors.length + &#39; problems!&#39;);</div>
<div class="line">}</div>
</div><!-- fragment --><p><code>validate(message[, options])</code>, returns <code>Array</code></p>
<ul>
<li><code>message</code> (<code>String</code>): the commit message to validate. Must use LF (<code>\n</code>) as line breaks.</li>
<li><code>options</code> (<code>Object</code>, optional): use this to override the default settings</li>
<li>returns <code>Array</code>: empty for valid messages, one or more items as <code>String</code> for each problem found</li>
</ul>
<h1><a class="anchor" id="autotoc_md5579"></a>
Examples</h1>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;name&quot;: &quot;awesomeproject&quot;,</div>
<div class="line">  &quot;description&quot;: &quot;described&quot;,</div>
<div class="line">  &quot;devDependencies&quot;: {</div>
<div class="line">    &quot;commitplease&quot;: &quot;latest&quot;,</div>
<div class="line">  },</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;style&quot;: &quot;jquery&quot;,</div>
<div class="line">    &quot;components&quot;: [&quot;Docs&quot;, &quot;Tests&quot;, &quot;Build&quot;, &quot;...&quot;],</div>
<div class="line">    &quot;markerPattern&quot;: &quot;^((clos|fix|resolv)(e[sd]|ing))|(refs?)&quot;,</div>
<div class="line">    &quot;ticketPattern&quot;: &quot;^((Closes|Fixes) ([a-zA-Z]{2,}-)[0-9]+)|(Refs? [^#])&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;name&quot;: &quot;awesomeproject&quot;,</div>
<div class="line">  &quot;description&quot;: &quot;described&quot;,</div>
<div class="line">  &quot;devDependencies&quot;: {</div>
<div class="line">    &quot;commitplease&quot;: &quot;latest&quot;,</div>
<div class="line">  },</div>
<div class="line">  &quot;commitplease&quot;: {</div>
<div class="line">    &quot;style&quot;: &quot;angular&quot;,</div>
<div class="line">    &quot;markerPattern&quot;: &quot;^((clos|fix|resolv)(e[sd]|ing))|(refs?)&quot;,</div>
<div class="line">    &quot;ticketPattern&quot;: &quot;^((Closes|Fixes) ([a-zA-Z]{2,}-)[0-9]+)|(Refs? [^#])&quot;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5580"></a>
Uninstall</h1>
<p>Remove your configurations of commitplease from your package.json, if any.</p>
<p>If you are running <code>npm 2.x</code>, then:</p>
<div class="fragment"><div class="line">npm uninstall commitplease --save-dev</div>
</div><!-- fragment --><p>If you are running <code>npm 3.x</code>, you will have to remove the hook manually:</p>
<div class="fragment"><div class="line">rm .git/hooks/commit-msg</div>
<div class="line">npm uninstall commitplease --save-dev</div>
</div><!-- fragment --><p>There is <a href="https://github.com/npm/npm/issues/13381">an open issue</a> to npm about this.</p>
<h1><a class="anchor" id="autotoc_md5581"></a>
License</h1>
<p>Copyright Jörn Zaefferer <br  />
 Released under the terms of the MIT license.</p>
<hr  />
<p>Support this project by <a href="https://gratipay.com/jzaefferer/">donating on Gratipay</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
