<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InternalAPI: sntp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">InternalAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">sntp</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md4592"></a> An SNTP v4 client (RFC4330) for node. Simpy connects to the NTP or SNTP server requested and returns the server time along with the roundtrip duration and clock offset. To adjust the local time to the NTP time, add the returned <code>t</code> offset to the local time.</p>
<p><a href="http://travis-ci.org/hueniverse/sntp"><img src="https://secure.travis-ci.org/hueniverse/sntp.png" alt="Build Status" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md4593"></a>
Usage</h1>
<div class="fragment"><div class="line">var Sntp = require(&#39;sntp&#39;);</div>
<div class="line"> </div>
<div class="line">// All options are optional</div>
<div class="line"> </div>
<div class="line">var options = {</div>
<div class="line">    host: &#39;nist1-sj.ustiming.org&#39;,  // Defaults to pool.ntp.org</div>
<div class="line">    port: 123,                      // Defaults to 123 (NTP)</div>
<div class="line">    resolveReference: true,         // Default to false (not resolving)</div>
<div class="line">    timeout: 1000                   // Defaults to zero (no timeout)</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// Request server time</div>
<div class="line"> </div>
<div class="line">Sntp.time(options, function (err, time) {</div>
<div class="line"> </div>
<div class="line">    if (err) {</div>
<div class="line">        console.log(&#39;Failed: &#39; + err.message);</div>
<div class="line">        process.exit(1);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    console.log(&#39;Local clock is off by: &#39; + time.t + &#39; milliseconds&#39;);</div>
<div class="line">    process.exit(0);</div>
<div class="line">});</div>
</div><!-- fragment --><p>If an application needs to maintain continuous time synchronization, the module provides a stateful method for querying the current offset only when the last one is too old (defaults to daily).</p>
<div class="fragment"><div class="line">// Request offset once</div>
<div class="line"> </div>
<div class="line">Sntp.offset(function (err, offset) {</div>
<div class="line"> </div>
<div class="line">    console.log(offset);                    // New (served fresh)</div>
<div class="line"> </div>
<div class="line">    // Request offset again</div>
<div class="line"> </div>
<div class="line">    Sntp.offset(function (err, offset) {</div>
<div class="line"> </div>
<div class="line">        console.log(offset);                // Identical (served from cache)</div>
<div class="line">    });</div>
<div class="line">});</div>
</div><!-- fragment --><p>To set a background offset refresh, start the interval and use the provided now() method. If for any reason the client fails to obtain an up-to-date offset, the current system clock is used.</p>
<div class="fragment"><div class="line">var before = Sntp.now();                    // System time without offset</div>
<div class="line"> </div>
<div class="line">Sntp.start(function () {</div>
<div class="line"> </div>
<div class="line">    var now = Sntp.now();                   // With offset</div>
<div class="line">    Sntp.stop();</div>
<div class="line">});</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
