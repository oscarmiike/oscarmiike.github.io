\doxysection{Logs\+Controller.\+cs}
\hypertarget{_logs_controller_8cs_source}{}\label{_logs_controller_8cs_source}\index{C:/Users/STRIDER/source/repos/TaskAPI/Controllers/LogsController.cs@{C:/Users/STRIDER/source/repos/TaskAPI/Controllers/LogsController.cs}}
\mbox{\hyperlink{_logs_controller_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_contexts}{TaskAPI.Contexts}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_services}{TaskAPI.Services}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }Microsoft.AspNetCore.Http;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00004}00004\ \textcolor{keyword}{using\ }Microsoft.AspNetCore.Mvc;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00005}00005\ \textcolor{keyword}{using\ }Microsoft.EntityFrameworkCore;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }System.Runtime;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00007}00007\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_helpers}{TaskAPI.Helpers}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00008}00008\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i}{TaskAPI.Models.DTO.InternalAPI}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00009}00009\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_models}{TaskAPI.Models}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00010}00010\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_helpers_1_1_settings}{TaskAPI.Helpers.Settings}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00011}00011\ \textcolor{keyword}{using\ }Microsoft.Extensions.Options;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00012}00012\ \textcolor{keyword}{using\ }Microsoft.AspNetCore.Mvc.Rendering;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00013}00013\ \textcolor{keyword}{using\ }NBitcoin.Secp256k1;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00014}00014\ \textcolor{keyword}{using\ }Nethereum.Model;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00015}00015\ \textcolor{keyword}{using\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_models_1_1_d_t_o}{TaskAPI.Models.DTO}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00016}00016\ \textcolor{keyword}{using\ }Newtonsoft.Json;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00017}00017\ \textcolor{keyword}{using\ }System.Text;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00018}00018\ \textcolor{keyword}{using\ }static\ \mbox{\hyperlink{namespace_task_a_p_i}{TaskAPI}}.\mbox{\hyperlink{namespace_task_a_p_i_1_1_helpers}{Helpers}}.\mbox{\hyperlink{namespace_task_a_p_i_1_1_helpers_1_1_settings}{Settings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings}{TaskAPISettings}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00019}00019\ \textcolor{keyword}{using\ }static\ \mbox{\hyperlink{namespace_task_a_p_i}{TaskAPI}}.\mbox{\hyperlink{namespace_task_a_p_i_1_1_controllers}{Controllers}}.\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller}{LogsController}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00020}00020\ \textcolor{keyword}{using\ }Microsoft.Identity.Client;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00021}00021\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00022}00022\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespace_task_a_p_i_1_1_controllers}{TaskAPI.Controllers}};}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00024}00024\ [Route(\textcolor{stringliteral}{"{}[controller]"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00025}00025\ [ApiController]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00026}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller}{00026}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller}{LogsController}}\ :\ ControllerBase}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00027}00027\ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00028}00028\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}\ \_logService;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00029}00029\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service}{InternalAPIService}}\ \_iapiService;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00030}00030\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings}{TaskAPISettings}}\ \_settings;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00031}00031\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context}{TaskAPIContext}}\ \_context;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00032}00032\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_alert_helper}{AlertHelper}}\ \_alertHelper;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00033}00033\ \ \ \ \ \textcolor{keyword}{private}\ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_log_notifications_settings}{LogNotificationsSettings}}\ \_logNotificationsSettings;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00034}00034\ \ \ \ \ \textcolor{keyword}{private}\ readonly\ IWebHostEnvironment\ \_env;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00036}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_aa3ff1ef899107537f53be4b06f342d05}{00036}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_aa3ff1ef899107537f53be4b06f342d05}{LogsController}}(}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00037}00037\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}\ logService,}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00038}00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service}{InternalAPIService}}\ internalAPIService,}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00039}00039\ \ \ \ \ \ \ \ \ IOptions<TaskAPISettings>\ settings,}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context}{TaskAPIContext}}\ context,}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00041}00041\ \ \ \ \ \ \ \ \ IOptions<LogNotificationsSettings>\ logNotificationsSettings,}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00042}00042\ \ \ \ \ \ \ \ \ IWebHostEnvironment\ env)}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00043}00043\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ \_logService\ =\ logService;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00045}00045\ \ \ \ \ \ \ \ \ \_iapiService\ =\ internalAPIService;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00046}00046\ \ \ \ \ \ \ \ \ \_settings\ =\ settings.Value;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00047}00047\ \ \ \ \ \ \ \ \ \_context\ =\ context;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00048}00048\ \ \ \ \ \ \ \ \ \_logNotificationsSettings\ =\ logNotificationsSettings.Value;\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00049}00049\ \ \ \ \ \ \ \ \ \_alertHelper\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_alert_helper}{AlertHelper}}(logService,\ internalAPIService,\ settings,\ context,\ logNotificationsSettings);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00050}00050\ \ \ \ \ \ \ \ \ \_env\ =\ env;}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00051}00051\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00053}00053\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00054}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request}{00054}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request}{LogRequest}}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00055}00055\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00056}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a57f3d4c12c6a72e57b8304b5e0807b0a}{00056}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a57f3d4c12c6a72e57b8304b5e0807b0a}{fromUnixUTCMilli}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00057}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a43a9919f7bdf2c60a61d5d37cd94773e}{00057}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ DateTime\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a43a9919f7bdf2c60a61d5d37cd94773e}{dateRangeStartUTC}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00058}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a39e2c1d23cc207fe01c4f6502e8abfea}{00058}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ DateTime\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a39e2c1d23cc207fe01c4f6502e8abfea}{dateRangeEndUTC}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00059}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a6c212a85ca5c9ae8781c1ebdde11b1df}{00059}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a6c212a85ca5c9ae8781c1ebdde11b1df}{initial}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00060}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_ac7a1f2dc684ba5078d3777a446701020}{00060}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_ac7a1f2dc684ba5078d3777a446701020}{startHour}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00061}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_ae8f5e27cccbb742d4703aaecc1ccff81}{00061}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_ae8f5e27cccbb742d4703aaecc1ccff81}{maxLogs}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00062}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_aafabd7b8c6afb47e6f72e600b4b074d0}{00062}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ List<string>?\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_aafabd7b8c6afb47e6f72e600b4b074d0}{logType}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00063}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a79fcc8334ff8ba1ff4fd9c7937e37778}{00063}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ List<string>?\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a79fcc8334ff8ba1ff4fd9c7937e37778}{logSource}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00064}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a63c2e150db7006d9efee4f08d29193e8}{00064}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}?\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request_a63c2e150db7006d9efee4f08d29193e8}{searchString}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00067}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert}{00067}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert}{Alert}}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00068}00068\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00069}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_ab7f09e5c69502424626407b1381a5bd6}{00069}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_ab7f09e5c69502424626407b1381a5bd6}{LogSource}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00070}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a2bcb3a6d79c0860947bb56bc3a0793e9}{00070}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a2bcb3a6d79c0860947bb56bc3a0793e9}{LogType}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00071}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a86843fb39194e1231bfc0ed5efa70eaf}{00071}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a86843fb39194e1231bfc0ed5efa70eaf}{Count}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00072}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a6cfe9f5995f1cc9a7e2badc16d1a27dc}{00072}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ List<LogEntry>\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_alert_a6cfe9f5995f1cc9a7e2badc16d1a27dc}{TriggeringLogs}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00074}00074\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00075}00075\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00076}00076\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00077}00077\ \ \ \ \ [HttpPost(\textcolor{stringliteral}{"{}getlogs"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00078}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_a7b16dda3feb664234c4307c88b54dbc5}{00078}}\ \ \ \ \ \textcolor{keyword}{public}\ IActionResult\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_a7b16dda3feb664234c4307c88b54dbc5}{GetLogs}}([FromBody]\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_1_1_log_request}{LogRequest}}\ logRequest)}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00079}00079\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00080}00080\ \ \ \ \ \ \ \ \ var\ logs\ =\ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a6fd34cc69d8b24f60a73f155365a9357}{FetchLogs}}(logRequest);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00081}00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(logs);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00082}00082\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00084}00084\ \ \ \ \ [HttpGet(\textcolor{stringliteral}{"{}getlogsources"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00085}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_a12e6a10e13d0182e8d356f0679bb85b1}{00085}}\ \ \ \ \ \textcolor{keyword}{public}\ IActionResult\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_a12e6a10e13d0182e8d356f0679bb85b1}{GetLogSources}}()}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00086}00086\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00087}00087\ \ \ \ \ \ \ \ \ var\ logSources\ =\ \_context.\mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context_af1d10bb6168269c37fefcdbd864f97e3}{LogEntries}}.AsNoTracking().Select(le\ =>\ le.Source).Distinct();}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00088}00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(logSources);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00089}00089\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00091}00091\ \ \ \ \ [HttpGet(\textcolor{stringliteral}{"{}getlogtypes"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00092}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_acbc81c5d0d03a76497d699754de63afd}{00092}}\ \ \ \ \ \textcolor{keyword}{public}\ IActionResult\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_acbc81c5d0d03a76497d699754de63afd}{GetLogTypes}}()}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00093}00093\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00094}00094\ \ \ \ \ \ \ \ \ var\ logTypes\ =\ \_context.\mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context_af1d10bb6168269c37fefcdbd864f97e3}{LogEntries}}.AsNoTracking().Select(le\ =>\ le.Type).Distinct();}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(logTypes);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00096}00096\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00098}00098\ \ \ \ \ [HttpGet(\textcolor{stringliteral}{"{}trimlogs"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00099}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_af8b7f41074892eb4a70a447d64a055c6}{00099}}\ \ \ \ \ \textcolor{keyword}{public}\ ActionResult<LogTrimResult>\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_af8b7f41074892eb4a70a447d64a055c6}{TrimLogs}}()}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00100}00100\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00101}00101\ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a5c2a67dbd8beb6f821c46b8d052d59ea}{LogInformation}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.LogsController,\ \textcolor{stringliteral}{"{}task\ api\ log\ trim\ initiated"{}});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00102}00102\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result}{LogTrimResult}}\ result\ =\ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a1b84e4b268d6eb8f21ee2569e562fceb}{TrimLogs}}();}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00103}00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result.\mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result_ac0dcb80f3d1f49fc0fdc79aca9faf210}{error}})}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00104}00104\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \_iapiService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_aeffeb1d3d59aeeab65dfe72691d21600}{SendEmail}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_email_post}{EmailPost}}()}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ EmailFrom\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_ac0a0b89d2e7cf7f820e5663a1a4cffbf}{NotificationEmailFrom}},}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ EmailTo\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_a25434a5471214771ae507f7152073898}{NotificationEmailTo}},}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00109}00109\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NameFrom\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_a082a8e92b97a7d83196f1d0056241042}{NotificationEmailName}},}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00110}00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Subject\ =\ \textcolor{stringliteral}{"{}Error\ trimming\ task\ api\ logs"{}},}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00111}00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HTMLBody\ =\ \$\textcolor{stringliteral}{"{}Task\ API\ was\ unable\ to\ trim\ task\ api\ logs<br><br>\{result\}"{}}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00112}00112\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00113}00113\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00114}00114\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00115}00115\ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a5c2a67dbd8beb6f821c46b8d052d59ea}{LogInformation}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.LogsController,\ \textcolor{stringliteral}{"{}task\ api\ log\ trim\ successful"{}},\ result);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00116}00116\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(result);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00117}00117\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00132}00132\ \ \ \ \ [HttpGet(\textcolor{stringliteral}{"{}CheckForAlerts"{}})]}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00133}\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_aa1bbb95b5f70e8d5a457fdca962479e3}{00133}}\ \ \ \ \ \textcolor{keyword}{public}\ IActionResult\ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_logs_controller_aa1bbb95b5f70e8d5a457fdca962479e3}{CheckForAllAlerts}}()}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00134}00134\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00135}00135\ \ \ \ \ \ \ \ \ var\ processedSources\ =\ \textcolor{keyword}{new}\ List<string>();}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00136}00136\ \ \ \ \ \ \ \ \ var\ failedSources\ =\ \textcolor{keyword}{new}\ List<string>();}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00138}00138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_logNotificationsSettings?.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_log_notifications}{LogNotifications}}?.ApiSources\ ==\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00139}00139\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a46dc9bf58bc9605c7e17dfee38b94354}{LogError}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.LogsController,\ \$\textcolor{stringliteral}{"{}Error\ LogNotificationsSettings.\{\_env.EnvironmentName\}.json\ not\ found"{}});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ StatusCode(500,\ \textcolor{keyword}{new}\ \{\ Message\ =\ \textcolor{stringliteral}{"{}LogNotificationsSettings\ not\ found."{}}\ \});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00142}00142\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00143}00143\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00144}00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (var\ apiConfig\ \textcolor{keywordflow}{in}\ \_logNotificationsSettings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_log_notifications_settings_ad241f792ec89b6ab436064bb2ae572ac}{LogNotifications}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_log_notifications_ae7300dad9396cfa9a40cd971ba611f05}{ApiSources}})}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00145}00145\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00147}00147\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Use\ AlertHelper\ to\ process\ the\ API\ source}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00149}00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_alertHelper.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_alert_helper_acddc980d442b4344a8d9df5ba056276a}{ProcessApiSource}}(apiConfig);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ processedSources.Add(apiConfig.Name);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00151}00151\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ ex)}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a78c9df658858fa3099eed69421423898}{LogException}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.LogsController,\ \$\textcolor{stringliteral}{"{}Error\ processing\ \{apiConfig.Name\}:\ \{ex\}"{}});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ failedSources.Add(apiConfig.Name);}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00157}00157\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00158}00158\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (failedSources.Any())}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00160}00160\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00161}00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ StatusCode(500,\ \textcolor{keyword}{new}\ \{\ Message\ =\ \textcolor{stringliteral}{"{}Some\ API\ sources\ failed\ to\ process."{}},\ ProcessedSources\ =\ processedSources,\ FailedSources\ =\ failedSources\ \});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00162}00162\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00164}00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(\textcolor{keyword}{new}\ \{\ Message\ =\ \$\textcolor{stringliteral}{"{}All\ API\ sources\ processed\ for\ alerts.\ -\/-\/\ \{\_env.EnvironmentName\}"{}},\ ProcessedSources\ =\ processedSources\ \});}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00165}00165\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00166}00166\ }
\DoxyCodeLine{\Hypertarget{_logs_controller_8cs_source_l00167}00167\ \}}

\end{DoxyCode}
