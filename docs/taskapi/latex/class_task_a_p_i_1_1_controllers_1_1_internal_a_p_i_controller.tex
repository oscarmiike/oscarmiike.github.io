\doxysection{Task\+API.\+Controllers.\+Internal\+APIController Class Reference}
\hypertarget{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller}{}\label{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller}\index{TaskAPI.Controllers.InternalAPIController@{TaskAPI.Controllers.InternalAPIController}}


Manages log trimming and email notifications for Internal API.  




Inheritance diagram for Task\+API.\+Controllers.\+Internal\+APIController\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Task\+API.\+Controllers.\+Internal\+APIController\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=217pt]{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller__coll__graph}
\end{center}
\end{figure}
\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_a4f25b0291848d91a8e6db0437abcbd8b}{Internal\+APIController}} (\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{Log\+Service}} log\+Service, \mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context}{Task\+APIContext}} context, \mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service}{Internal\+APIService}} internal\+APIService, IOptions$<$ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings}{Task\+APISettings}} $>$ settings)
\begin{DoxyCompactList}\small\item\em Initialises a new instance of the Internal\+APIController class. \end{DoxyCompactList}\item 
Action\+Result$<$ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result}{Log\+Trim\+Result}} $>$ \mbox{\hyperlink{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_ad77c1d71a0a8ba5393ee56bff0b81df1}{Trim\+Logs}} ()
\begin{DoxyCompactList}\small\item\em Trims logs for Internal API based on predefined criteria. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Manages log trimming and email notifications for Internal API. 

\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_a4f25b0291848d91a8e6db0437abcbd8b}\label{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_a4f25b0291848d91a8e6db0437abcbd8b} 
\index{TaskAPI.Controllers.InternalAPIController@{TaskAPI.Controllers.InternalAPIController}!InternalAPIController@{InternalAPIController}}
\index{InternalAPIController@{InternalAPIController}!TaskAPI.Controllers.InternalAPIController@{TaskAPI.Controllers.InternalAPIController}}
\doxysubsubsection{\texorpdfstring{InternalAPIController()}{InternalAPIController()}}
{\footnotesize\ttfamily Task\+API.\+Controllers.\+Internal\+APIController.\+Internal\+APIController (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{Log\+Service}}}]{log\+Service,  }\item[{\mbox{\hyperlink{class_task_a_p_i_1_1_contexts_1_1_task_a_p_i_context}{Task\+APIContext}}}]{context,  }\item[{\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service}{Internal\+APIService}}}]{internal\+APIService,  }\item[{IOptions$<$ \mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings}{Task\+APISettings}} $>$}]{settings }\end{DoxyParamCaption})}



Initialises a new instance of the Internal\+APIController class. 


\begin{DoxyParams}{Parameters}
{\em log\+Service} & The logging service.\\
\hline
{\em context} & The database context.\\
\hline
{\em internal\+APIService} & The internal API service.\\
\hline
{\em settings} & The application settings.\\
\hline
\end{DoxyParams}

\begin{DoxyCode}{0}
\DoxyCodeLine{00040\ \ \ \ \ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \_logService\ =\ logService;}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \_context\ =\ context;}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \_iapiService\ =\ internalAPIService;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \_settings\ =\ settings.Value;}
\DoxyCodeLine{00045\ \ \ \ \ \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\Hypertarget{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_ad77c1d71a0a8ba5393ee56bff0b81df1}\label{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_ad77c1d71a0a8ba5393ee56bff0b81df1} 
\index{TaskAPI.Controllers.InternalAPIController@{TaskAPI.Controllers.InternalAPIController}!TrimLogs@{TrimLogs}}
\index{TrimLogs@{TrimLogs}!TaskAPI.Controllers.InternalAPIController@{TaskAPI.Controllers.InternalAPIController}}
\doxysubsubsection{\texorpdfstring{TrimLogs()}{TrimLogs()}}
{\footnotesize\ttfamily Action\+Result$<$ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result}{Log\+Trim\+Result}} $>$ Task\+API.\+Controllers.\+Internal\+APIController.\+Trim\+Logs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Trims logs for Internal API based on predefined criteria. 

This method initiates the log trimming process for Internal API and handles any errors that occur during the process. 

\begin{DoxyReturn}{Returns}
An Action\+Result$<$\+T$>$ containing the result of the log trimming operation.
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a5c2a67dbd8beb6f821c46b8d052d59ea}{LogInformation}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.InternalAPIController,\ \textcolor{stringliteral}{"{}internal\ api\ log\ trim\ initiated"{}});}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result}{LogTrimResult}}\ result\ =\ \_iapiService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_a0a18917a9a9834b9d1f62d96b3798912}{InternalAPITrimLogs}}();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (result.\mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_log_trim_result_ac0dcb80f3d1f49fc0fdc79aca9faf210}{error}})}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \_iapiService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_aeffeb1d3d59aeeab65dfe72691d21600}{SendEmail}}(\textcolor{keyword}{new}\ \mbox{\hyperlink{class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_email_post}{EmailPost}}()}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ EmailFrom\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_ac0a0b89d2e7cf7f820e5663a1a4cffbf}{NotificationEmailFrom}},}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ EmailTo\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_a25434a5471214771ae507f7152073898}{NotificationEmailTo}},}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ NameFrom\ =\ \_settings.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_af39dc0933cd608b26e7bc4f82951d356}{GeneralSettings}}.\mbox{\hyperlink{class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_a082a8e92b97a7d83196f1d0056241042}{NotificationEmailName}},}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Subject\ =\ \textcolor{stringliteral}{"{}Error\ trimming\ internap\ api\ logs"{}},}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HTMLBody\ =\ \$\textcolor{stringliteral}{"{}Task\ API\ was\ unable\ to\ trim\ internal\ api\ logs<br><br>\{JsonConvert.SerializeObject(result)\}"{}}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00070\ \ \ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \_logService.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_a5c2a67dbd8beb6f821c46b8d052d59ea}{LogInformation}}(\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service}{LogService}}.\mbox{\hyperlink{class_task_a_p_i_1_1_services_1_1_log_service_ac2b08e94307168cb702773d148d166ba}{LogSources}}.InternalAPIController,\ \$\textcolor{stringliteral}{"{}internal\ api\ log\ trim\ completed"{}},\ result);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Ok(result);}
\DoxyCodeLine{00073\ \ \ \ \ \}}

\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_task_a_p_i_1_1_controllers_1_1_internal_a_p_i_controller_ad77c1d71a0a8ba5393ee56bff0b81df1_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/\+STRIDER/source/repos/\+Task\+API/\+Controllers/\mbox{\hyperlink{_internal_a_p_i_controller_8cs}{Internal\+APIController.\+cs}}\end{DoxyCompactItemize}
