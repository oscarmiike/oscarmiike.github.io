<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TaskAPI: TaskAPI.Helpers.SpotHelper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TaskAPI
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_task_a_p_i.html">TaskAPI</a></li><li class="navelem"><a class="el" href="namespace_task_a_p_i_1_1_helpers.html">Helpers</a></li><li class="navelem"><a class="el" href="class_task_a_p_i_1_1_helpers_1_1_spot_helper.html">SpotHelper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_task_a_p_i_1_1_helpers_1_1_spot_helper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">TaskAPI.Helpers.SpotHelper Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Helper class for managing operations related to spot prices.  
 <a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for TaskAPI.Helpers.SpotHelper:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae5d7f0ba6759749953e94555c9557cfb" id="r_ae5d7f0ba6759749953e94555c9557cfb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5d7f0ba6759749953e94555c9557cfb">SpotHelper</a> (<a class="el" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a> logService, <a class="el" href="class_task_a_p_i_1_1_services_1_1_forex_service.html">ForexService</a> forexService, <a class="el" href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html">AlchemyService</a> alchemyService, <a class="el" href="class_task_a_p_i_1_1_services_1_1_binance_service.html">BinanceService</a> binanceService, IOptions&lt; <a class="el" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html">TaskAPISettings</a> &gt; taskAPISettings, <a class="el" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html">PriceappContext</a> context, <a class="el" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html">InternalAPIService</a> iapiService, IWebHostEnvironment env)</td></tr>
<tr class="memdesc:ae5d7f0ba6759749953e94555c9557cfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises a new instance of the SpotHelper class.  <br /></td></tr>
<tr class="separator:ae5d7f0ba6759749953e94555c9557cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b75f44b3310036d4de7f0f2956bbac1" id="r_a7b75f44b3310036d4de7f0f2956bbac1"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b75f44b3310036d4de7f0f2956bbac1">PullSaveTrim</a> ()</td></tr>
<tr class="memdesc:a7b75f44b3310036d4de7f0f2956bbac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls, saves, and trims spot data from various sources.  <br /></td></tr>
<tr class="separator:a7b75f44b3310036d4de7f0f2956bbac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b975ced6fddc4826a8950c8a250b926" id="r_a6b975ced6fddc4826a8950c8a250b926"><td class="memItemLeft" align="right" valign="top">bool? object Result&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b975ced6fddc4826a8950c8a250b926">SaveDailySpot</a> ()</td></tr>
<tr class="separator:a6b975ced6fddc4826a8950c8a250b926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a665897ed47f9b7065ce771100b83c" id="r_a89a665897ed47f9b7065ce771100b83c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89a665897ed47f9b7065ce771100b83c">CanSync</a> ()</td></tr>
<tr class="memdesc:a89a665897ed47f9b7065ce771100b83c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether synchronisation with the market is possible based on the current market status.  <br /></td></tr>
<tr class="separator:a89a665897ed47f9b7065ce771100b83c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a1d8458171af3cac5a7fc1fc1f35de115" id="r_a1d8458171af3cac5a7fc1fc1f35de115"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d8458171af3cac5a7fc1fc1f35de115">Error</a></td></tr>
<tr class="memdesc:a1d8458171af3cac5a7fc1fc1f35de115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves daily spot data to the database and exports chart data.  <br /></td></tr>
<tr class="separator:a1d8458171af3cac5a7fc1fc1f35de115"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a072bb87250d0da4285bfe85c69fa479c" id="r_a072bb87250d0da4285bfe85c69fa479c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a> { <a class="el" href="#a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3">ForceClosed</a> = 0
, <a class="el" href="#a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289">UseMarket</a> = 1
, <a class="el" href="#a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a">ForceOpen</a> = 2
 }</td></tr>
<tr class="separator:a072bb87250d0da4285bfe85c69fa479c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2ad64affbfeec15e4217d8bfccd982ff" id="r_a2ad64affbfeec15e4217d8bfccd982ff"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2ad64affbfeec15e4217d8bfccd982ff">PullPolygonOracleData</a> (DateTime pullTime)</td></tr>
<tr class="memdesc:a2ad64affbfeec15e4217d8bfccd982ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls spot data from Polygon Oracle for each specified asset.  <br /></td></tr>
<tr class="separator:a2ad64affbfeec15e4217d8bfccd982ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51135865d712678dee52479c109a61fb" id="r_a51135865d712678dee52479c109a61fb"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51135865d712678dee52479c109a61fb">PullForexData</a> (DateTime pullTime)</td></tr>
<tr class="memdesc:a51135865d712678dee52479c109a61fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">pull data from forexfeed in one hit, check single time variation is within threshold add items to spotlist, 0 value if time threshold error  <br /></td></tr>
<tr class="separator:a51135865d712678dee52479c109a61fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd06a80c097c9b6fcd5ddd8b1889c18" id="r_a0fd06a80c097c9b6fcd5ddd8b1889c18"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fd06a80c097c9b6fcd5ddd8b1889c18">PullOandaData</a> (DateTime pullTime)</td></tr>
<tr class="memdesc:a0fd06a80c097c9b6fcd5ddd8b1889c18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves spot data from Oanda for each specified asset.  <br /></td></tr>
<tr class="separator:a0fd06a80c097c9b6fcd5ddd8b1889c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701fc9c0beaecff83beb2c806b8581d5" id="r_a701fc9c0beaecff83beb2c806b8581d5"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a701fc9c0beaecff83beb2c806b8581d5">PullBinanceData</a> (DateTime pullTime)</td></tr>
<tr class="memdesc:a701fc9c0beaecff83beb2c806b8581d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves spot data from Binance for each specified asset.  <br /></td></tr>
<tr class="separator:a701fc9c0beaecff83beb2c806b8581d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5da5f529f7ec58c18cefb373466d99" id="r_a2d5da5f529f7ec58c18cefb373466d99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d5da5f529f7ec58c18cefb373466d99">GenerateSpecialData</a> (DateTime pullTime, List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; finalSpotList)</td></tr>
<tr class="memdesc:a2d5da5f529f7ec58c18cefb373466d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates special spot data entries and adds them to the final spot list.  <br /></td></tr>
<tr class="separator:a2d5da5f529f7ec58c18cefb373466d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95400211c9214b34c8427e09776449a9" id="r_a95400211c9214b34c8427e09776449a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95400211c9214b34c8427e09776449a9">RecyclePreviousSpot</a> (<a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs)</td></tr>
<tr class="memdesc:a95400211c9214b34c8427e09776449a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recycles the previous spot data for the given BaseSpot from the database.  <br /></td></tr>
<tr class="separator:a95400211c9214b34c8427e09776449a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeeda07d908e3644d9ba13213077d205" id="r_adeeda07d908e3644d9ba13213077d205"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adeeda07d908e3644d9ba13213077d205">TrimSpotData</a> ()</td></tr>
<tr class="memdesc:adeeda07d908e3644d9ba13213077d205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes spot data entries older than a specified number of days from the database.  <br /></td></tr>
<tr class="separator:adeeda07d908e3644d9ba13213077d205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a13962d034427b5047452856eb3198d" id="r_a0a13962d034427b5047452856eb3198d"><td class="memItemLeft" align="right" valign="top">bool? object Result&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a13962d034427b5047452856eb3198d">ExportChartData</a> ()</td></tr>
<tr class="separator:a0a13962d034427b5047452856eb3198d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8840f6557abefd786be545a44454e246" id="r_a8840f6557abefd786be545a44454e246"><td class="memItemLeft" align="right" valign="top">decimal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8840f6557abefd786be545a44454e246">ConvertChartDataCurrency</a> (string convertTo, <a class="el" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a> convertItem, List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a> &gt; metalPrices)</td></tr>
<tr class="memdesc:a8840f6557abefd786be545a44454e246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the spot price of chart data to the specified currency.  <br /></td></tr>
<tr class="separator:a8840f6557abefd786be545a44454e246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a249585457b73bcd269d8644a8120465e" id="r_a249585457b73bcd269d8644a8120465e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a249585457b73bcd269d8644a8120465e">IsMarketOpen</a> ()</td></tr>
<tr class="memdesc:a249585457b73bcd269d8644a8120465e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the market for a specific instrument is currently open.  <br /></td></tr>
<tr class="separator:a249585457b73bcd269d8644a8120465e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ff886c42d0b6aba649b98f9935772bc" id="r_a7ff886c42d0b6aba649b98f9935772bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ff886c42d0b6aba649b98f9935772bc">MarketStatusOverride</a> ()</td></tr>
<tr class="memdesc:a7ff886c42d0b6aba649b98f9935772bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the current market status override from an external service.  <br /></td></tr>
<tr class="separator:a7ff886c42d0b6aba649b98f9935772bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a49deee18d15ec2cb2b1dd2dd9058cd1f" id="r_a49deee18d15ec2cb2b1dd2dd9058cd1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a></td></tr>
<tr class="separator:a49deee18d15ec2cb2b1dd2dd9058cd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a7675b28528fddd0add10e0daceb3a" id="r_a47a7675b28528fddd0add10e0daceb3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_services_1_1_forex_service.html">ForexService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47a7675b28528fddd0add10e0daceb3a">_forexService</a></td></tr>
<tr class="separator:a47a7675b28528fddd0add10e0daceb3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6e63479696a9f01dc08d8bcf7fe6038" id="r_ac6e63479696a9f01dc08d8bcf7fe6038"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html">AlchemyService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac6e63479696a9f01dc08d8bcf7fe6038">_alchemyService</a></td></tr>
<tr class="separator:ac6e63479696a9f01dc08d8bcf7fe6038"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2c3fbeea2c16cbaa6206ff9aaebb5fe" id="r_ae2c3fbeea2c16cbaa6206ff9aaebb5fe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_services_1_1_binance_service.html">BinanceService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae2c3fbeea2c16cbaa6206ff9aaebb5fe">_binanceService</a></td></tr>
<tr class="separator:ae2c3fbeea2c16cbaa6206ff9aaebb5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2160130492346bd22d7ce8a4ede1bf67" id="r_a2160130492346bd22d7ce8a4ede1bf67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html">TaskAPISettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a></td></tr>
<tr class="separator:a2160130492346bd22d7ce8a4ede1bf67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa365640b2ac3e3f84df34e8a27817f81" id="r_aa365640b2ac3e3f84df34e8a27817f81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html">PriceappContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a></td></tr>
<tr class="separator:aa365640b2ac3e3f84df34e8a27817f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bbe8203a7ccd78f59b904ab1c6389bb" id="r_a7bbe8203a7ccd78f59b904ab1c6389bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html">InternalAPIService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a></td></tr>
<tr class="separator:a7bbe8203a7ccd78f59b904ab1c6389bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91a44041fb2de73102a3319f9edf4258" id="r_a91a44041fb2de73102a3319f9edf4258"><td class="memItemLeft" align="right" valign="top">IWebHostEnvironment&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91a44041fb2de73102a3319f9edf4258">_env</a></td></tr>
<tr class="separator:a91a44041fb2de73102a3319f9edf4258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1fe67d03462035d8a1c48897dd2104" id="r_adf1fe67d03462035d8a1c48897dd2104"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adf1fe67d03462035d8a1c48897dd2104">marketOpen</a></td></tr>
<tr class="separator:adf1fe67d03462035d8a1c48897dd2104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc630a604ed0b8c9e1090e965363e841" id="r_adc630a604ed0b8c9e1090e965363e841"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adc630a604ed0b8c9e1090e965363e841">marketStatusOverride</a></td></tr>
<tr class="separator:adc630a604ed0b8c9e1090e965363e841"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aef6b7b6e86e3a962f65aa9f929b8f49a" id="r_aef6b7b6e86e3a962f65aa9f929b8f49a"><td class="memItemLeft" align="right" valign="top">const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef6b7b6e86e3a962f65aa9f929b8f49a">tOzGrams</a> = 31.1035</td></tr>
<tr class="separator:aef6b7b6e86e3a962f65aa9f929b8f49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Helper class for managing operations related to spot prices. </p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a072bb87250d0da4285bfe85c69fa479c" name="a072bb87250d0da4285bfe85c69fa479c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a072bb87250d0da4285bfe85c69fa479c">&#9670;&#160;</a></span>MarketStatusOverrides</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">TaskAPI.Helpers.SpotHelper.MarketStatusOverrides</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3" name="a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3"></a>ForceClosed&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289" name="a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289"></a>UseMarket&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a" name="a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a"></a>ForceOpen&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">   39</span>    {</div>
<div class="line"><span class="lineno">   40</span>        <a class="code hl_enumvalue" href="#a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3">ForceClosed</a> = 0,</div>
<div class="line"><span class="lineno">   41</span>        <a class="code hl_enumvalue" href="#a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289">UseMarket</a> = 1,</div>
<div class="line"><span class="lineno">   42</span>        <a class="code hl_enumvalue" href="#a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a">ForceOpen</a> = 2</div>
<div class="line"><span class="lineno">   43</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289"><div class="ttname"><a href="#a072bb87250d0da4285bfe85c69fa479ca2660a1b21997f580b332f076d5c3a289">TaskAPI.Helpers.SpotHelper.MarketStatusOverrides.UseMarket</a></div><div class="ttdeci">@ UseMarket</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3"><div class="ttname"><a href="#a072bb87250d0da4285bfe85c69fa479caa283c513b6e585afe879ec049fd5a7a3">TaskAPI.Helpers.SpotHelper.MarketStatusOverrides.ForceClosed</a></div><div class="ttdeci">@ ForceClosed</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a"><div class="ttname"><a href="#a072bb87250d0da4285bfe85c69fa479caf50776d312645720efdea21abfc7b98a">TaskAPI.Helpers.SpotHelper.MarketStatusOverrides.ForceOpen</a></div><div class="ttdeci">@ ForceOpen</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae5d7f0ba6759749953e94555c9557cfb" name="ae5d7f0ba6759749953e94555c9557cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5d7f0ba6759749953e94555c9557cfb">&#9670;&#160;</a></span>SpotHelper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskAPI.Helpers.SpotHelper.SpotHelper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a></td>          <td class="paramname"><span class="paramname"><em>logService</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_services_1_1_forex_service.html">ForexService</a></td>          <td class="paramname"><span class="paramname"><em>forexService</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html">AlchemyService</a></td>          <td class="paramname"><span class="paramname"><em>alchemyService</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_services_1_1_binance_service.html">BinanceService</a></td>          <td class="paramname"><span class="paramname"><em>binanceService</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOptions&lt; <a class="el" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html">TaskAPISettings</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>taskAPISettings</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html">PriceappContext</a></td>          <td class="paramname"><span class="paramname"><em>context</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html">InternalAPIService</a></td>          <td class="paramname"><span class="paramname"><em>iapiService</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IWebHostEnvironment</td>          <td class="paramname"><span class="paramname"><em>env</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises a new instance of the SpotHelper class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">logService</td><td>The log service.</td></tr>
    <tr><td class="paramname">forexService</td><td>The forex service.</td></tr>
    <tr><td class="paramname">alchemyService</td><td>The alchemy service.</td></tr>
    <tr><td class="paramname">binanceService</td><td>The binance service.</td></tr>
    <tr><td class="paramname">taskAPISettings</td><td>The task API settings.</td></tr>
    <tr><td class="paramname">context</td><td>The priceapp context.</td></tr>
    <tr><td class="paramname">iapiService</td><td>The internal API service.</td></tr>
    <tr><td class="paramname">env</td><td>The hosting environment.</td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">   57</span>    {</div>
<div class="line"><span class="lineno">   58</span>        <a class="code hl_variable" href="#ac6e63479696a9f01dc08d8bcf7fe6038">_alchemyService</a> = alchemyService;</div>
<div class="line"><span class="lineno">   59</span>        <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a> = taskAPISettings.Value;</div>
<div class="line"><span class="lineno">   60</span>        <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a> = logService;</div>
<div class="line"><span class="lineno">   61</span>        <a class="code hl_variable" href="#a47a7675b28528fddd0add10e0daceb3a">_forexService</a> = forexService;</div>
<div class="line"><span class="lineno">   62</span>        <a class="code hl_variable" href="#ae2c3fbeea2c16cbaa6206ff9aaebb5fe">_binanceService</a> = binanceService;</div>
<div class="line"><span class="lineno">   63</span>        <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a> = context;</div>
<div class="line"><span class="lineno">   64</span>        <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a> = iapiService;</div>
<div class="line"><span class="lineno">   65</span>        <a class="code hl_variable" href="#a91a44041fb2de73102a3319f9edf4258">_env</a> = env;</div>
<div class="line"><span class="lineno">   66</span>        <a class="code hl_variable" href="#adf1fe67d03462035d8a1c48897dd2104">marketOpen</a> = <a class="code hl_function" href="#a249585457b73bcd269d8644a8120465e">IsMarketOpen</a>();</div>
<div class="line"><span class="lineno">   67</span>        <a class="code hl_variable" href="#adc630a604ed0b8c9e1090e965363e841">marketStatusOverride</a> = <a class="code hl_function" href="#a7ff886c42d0b6aba649b98f9935772bc">MarketStatusOverride</a>();</div>
<div class="line"><span class="lineno">   68</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a2160130492346bd22d7ce8a4ede1bf67"><div class="ttname"><a href="#a2160130492346bd22d7ce8a4ede1bf67">TaskAPI.Helpers.SpotHelper._settings</a></div><div class="ttdeci">TaskAPISettings _settings</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:29</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a249585457b73bcd269d8644a8120465e"><div class="ttname"><a href="#a249585457b73bcd269d8644a8120465e">TaskAPI.Helpers.SpotHelper.IsMarketOpen</a></div><div class="ttdeci">bool IsMarketOpen()</div><div class="ttdoc">Determines if the market for a specific instrument is currently open.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:902</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a47a7675b28528fddd0add10e0daceb3a"><div class="ttname"><a href="#a47a7675b28528fddd0add10e0daceb3a">TaskAPI.Helpers.SpotHelper._forexService</a></div><div class="ttdeci">ForexService _forexService</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:26</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a49deee18d15ec2cb2b1dd2dd9058cd1f"><div class="ttname"><a href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">TaskAPI.Helpers.SpotHelper._logService</a></div><div class="ttdeci">LogService _logService</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:25</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a7bbe8203a7ccd78f59b904ab1c6389bb"><div class="ttname"><a href="#a7bbe8203a7ccd78f59b904ab1c6389bb">TaskAPI.Helpers.SpotHelper._iapiService</a></div><div class="ttdeci">InternalAPIService _iapiService</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:31</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a7ff886c42d0b6aba649b98f9935772bc"><div class="ttname"><a href="#a7ff886c42d0b6aba649b98f9935772bc">TaskAPI.Helpers.SpotHelper.MarketStatusOverride</a></div><div class="ttdeci">MarketStatusOverrides MarketStatusOverride()</div><div class="ttdoc">Retrieves the current market status override from an external service.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:919</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a91a44041fb2de73102a3319f9edf4258"><div class="ttname"><a href="#a91a44041fb2de73102a3319f9edf4258">TaskAPI.Helpers.SpotHelper._env</a></div><div class="ttdeci">IWebHostEnvironment _env</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:32</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_aa365640b2ac3e3f84df34e8a27817f81"><div class="ttname"><a href="#aa365640b2ac3e3f84df34e8a27817f81">TaskAPI.Helpers.SpotHelper._context</a></div><div class="ttdeci">PriceappContext _context</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:30</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_ac6e63479696a9f01dc08d8bcf7fe6038"><div class="ttname"><a href="#ac6e63479696a9f01dc08d8bcf7fe6038">TaskAPI.Helpers.SpotHelper._alchemyService</a></div><div class="ttdeci">AlchemyService _alchemyService</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:27</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_adc630a604ed0b8c9e1090e965363e841"><div class="ttname"><a href="#adc630a604ed0b8c9e1090e965363e841">TaskAPI.Helpers.SpotHelper.marketStatusOverride</a></div><div class="ttdeci">MarketStatusOverrides marketStatusOverride</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:34</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_adf1fe67d03462035d8a1c48897dd2104"><div class="ttname"><a href="#adf1fe67d03462035d8a1c48897dd2104">TaskAPI.Helpers.SpotHelper.marketOpen</a></div><div class="ttdeci">bool marketOpen</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:33</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_ae2c3fbeea2c16cbaa6206ff9aaebb5fe"><div class="ttname"><a href="#ae2c3fbeea2c16cbaa6206ff9aaebb5fe">TaskAPI.Helpers.SpotHelper._binanceService</a></div><div class="ttdeci">BinanceService _binanceService</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:28</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_ae5d7f0ba6759749953e94555c9557cfb_cgraph.svg" width="100%" height="402"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a89a665897ed47f9b7065ce771100b83c" name="a89a665897ed47f9b7065ce771100b83c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89a665897ed47f9b7065ce771100b83c">&#9670;&#160;</a></span>CanSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TaskAPI.Helpers.SpotHelper.CanSync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether synchronisation with the market is possible based on the current market status. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if synchronisation is possible; otherwise, <code>false</code>.</dd></dl>
<p>Returns <code>false</code> if the market is forced closed, <code>true</code> if forced open, and the current market status if neither forced. </p>
<div class="fragment"><div class="line"><span class="lineno">  883</span>    {</div>
<div class="line"><span class="lineno">  884</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#adc630a604ed0b8c9e1090e965363e841">marketStatusOverride</a> == <a class="code hl_enumeration" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>.ForceClosed)</div>
<div class="line"><span class="lineno">  885</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  886</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#adc630a604ed0b8c9e1090e965363e841">marketStatusOverride</a> == <a class="code hl_enumeration" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>.ForceOpen) </div>
<div class="line"><span class="lineno">  887</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  888</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="#adf1fe67d03462035d8a1c48897dd2104">marketOpen</a>;</div>
<div class="line"><span class="lineno">  889</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a072bb87250d0da4285bfe85c69fa479c"><div class="ttname"><a href="#a072bb87250d0da4285bfe85c69fa479c">TaskAPI.Helpers.SpotHelper.MarketStatusOverrides</a></div><div class="ttdeci">MarketStatusOverrides</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:39</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a89a665897ed47f9b7065ce771100b83c_icgraph.svg" width="100%" height="467"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8840f6557abefd786be545a44454e246" name="a8840f6557abefd786be545a44454e246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8840f6557abefd786be545a44454e246">&#9670;&#160;</a></span>ConvertChartDataCurrency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">decimal TaskAPI.Helpers.SpotHelper.ConvertChartDataCurrency </td>
          <td>(</td>
          <td class="paramtype">string</td>          <td class="paramname"><span class="paramname"><em>convertTo</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a></td>          <td class="paramname"><span class="paramname"><em>convertItem</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>metalPrices</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts the spot price of chart data to the specified currency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">convertTo</td><td>The currency to which the spot price should be converted.</td></tr>
    <tr><td class="paramname">convertItem</td><td>The chart data item to be converted.</td></tr>
    <tr><td class="paramname">metalPrices</td><td>The list of metal prices.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The spot price converted to the specified currency. </dd></dl>
<p>This method converts the spot price of chart data to the specified currency, using AUD as the reference currency for conversion. If the specified currency is AUD or the chart data item's currency is AUD, no conversion is performed. If the conversion is not possible due to missing AUD spot price data, the method tries to find the closest available AUD spot price. </p>
<div class="fragment"><div class="line"><span class="lineno">  848</span>    {</div>
<div class="line"><span class="lineno">  849</span>        <span class="keywordflow">if</span> (convertTo.ToLower() == convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#ab2620dd19ff6e6f1513f9a1fbbfe58ee">Currency</a>.ToLower() || convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a5be5b645aa46c882e0e412c018c19689">Metal</a>.ToLower() == <span class="stringliteral">&quot;aud&quot;</span>)</div>
<div class="line"><span class="lineno">  850</span>            <span class="keywordflow">return</span> convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#af18cc37b4117018e2737b4d4227666a6">Spot</a>;</div>
<div class="line"><span class="lineno">  851</span>        var audUsd = metalPrices.FirstOrDefault(mp =&gt; mp.Timestamp == convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">Timestamp</a> &amp;&amp; mp.Metal.ToLower() == <span class="stringliteral">&quot;aud&quot;</span>)?.Spot;</div>
<div class="line"><span class="lineno">  852</span>        <span class="keywordflow">if</span> (audUsd == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  853</span>        {</div>
<div class="line"><span class="lineno">  854</span>            <span class="comment">//find closest with later date as preference</span></div>
<div class="line"><span class="lineno">  855</span>            audUsd = metalPrices.Where(mp =&gt; mp.Metal.ToLower() == <span class="stringliteral">&quot;aud&quot;</span> &amp;&amp; mp.Timestamp &gt; convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">Timestamp</a>)?.OrderBy(mp =&gt; mp.Timestamp).FirstOrDefault()?.Spot;</div>
<div class="line"><span class="lineno">  856</span>            <span class="keywordflow">if</span> (audUsd == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  857</span>            {</div>
<div class="line"><span class="lineno">  858</span>                <span class="comment">//find closest with earlier date</span></div>
<div class="line"><span class="lineno">  859</span>                audUsd = metalPrices.Where(mp =&gt; mp.Metal.ToLower() == <span class="stringliteral">&quot;aud&quot;</span> &amp;&amp; mp.Timestamp &lt; convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">Timestamp</a>)?.OrderByDescending(mp =&gt; mp.Timestamp).FirstOrDefault()?.Spot;</div>
<div class="line"><span class="lineno">  860</span>            }</div>
<div class="line"><span class="lineno">  861</span>        }</div>
<div class="line"><span class="lineno">  862</span>        <span class="keywordflow">if</span> (audUsd != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  863</span>        {</div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordflow">switch</span> (convertTo.ToLower())</div>
<div class="line"><span class="lineno">  865</span>            {</div>
<div class="line"><span class="lineno">  866</span>                <span class="keywordflow">case</span> <span class="stringliteral">&quot;aud&quot;</span>:</div>
<div class="line"><span class="lineno">  867</span>                    <span class="keywordflow">return</span> convertItem.Spot / (decimal)audUsd;</div>
<div class="line"><span class="lineno">  868</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  869</span>                    <span class="keywordflow">return</span> convertItem.Spot * (decimal)audUsd;</div>
<div class="line"><span class="lineno">  870</span>            }</div>
<div class="line"><span class="lineno">  871</span>        }</div>
<div class="line"><span class="lineno">  872</span>        <span class="keywordflow">return</span> convertItem.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#af18cc37b4117018e2737b4d4227666a6">Spot</a>;</div>
<div class="line"><span class="lineno">  873</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item_html_a4a91da49271c810a5bf525182543b08b"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">TaskAPI.Models.DTO.InternalAPI.DailyCloseChartItem.Timestamp</a></div><div class="ttdeci">long Timestamp</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:89</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item_html_a5be5b645aa46c882e0e412c018c19689"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a5be5b645aa46c882e0e412c018c19689">TaskAPI.Models.DTO.InternalAPI.DailyCloseChartItem.Metal</a></div><div class="ttdeci">string Metal</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:90</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item_html_ab2620dd19ff6e6f1513f9a1fbbfe58ee"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#ab2620dd19ff6e6f1513f9a1fbbfe58ee">TaskAPI.Models.DTO.InternalAPI.DailyCloseChartItem.Currency</a></div><div class="ttdeci">string Currency</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:91</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item_html_af18cc37b4117018e2737b4d4227666a6"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#af18cc37b4117018e2737b4d4227666a6">TaskAPI.Models.DTO.InternalAPI.DailyCloseChartItem.Spot</a></div><div class="ttdeci">decimal Spot</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:92</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a8840f6557abefd786be545a44454e246_icgraph.svg" width="440" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0a13962d034427b5047452856eb3198d" name="a0a13962d034427b5047452856eb3198d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a13962d034427b5047452856eb3198d">&#9670;&#160;</a></span>ExportChartData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool? object Result TaskAPI.Helpers.SpotHelper.ExportChartData </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  779</span>    {</div>
<div class="line"><span class="lineno">  780</span>        <span class="comment">//used for name mapping but also used for ordering results</span></div>
<div class="line"><span class="lineno">  781</span>        Dictionary&lt;string, string&gt; assetCodeToNameMap = <span class="keyword">new</span> Dictionary&lt;string, string&gt;</div>
<div class="line"><span class="lineno">  782</span>        {</div>
<div class="line"><span class="lineno">  783</span>            [<span class="stringliteral">&quot;XAU&quot;</span>] = <span class="stringliteral">&quot;gold&quot;</span>,</div>
<div class="line"><span class="lineno">  784</span>            [<span class="stringliteral">&quot;XAG&quot;</span>] = <span class="stringliteral">&quot;silver&quot;</span>,</div>
<div class="line"><span class="lineno">  785</span>            [<span class="stringliteral">&quot;XPT&quot;</span>] = <span class="stringliteral">&quot;platinum&quot;</span>,</div>
<div class="line"><span class="lineno">  786</span>            [<span class="stringliteral">&quot;AUD&quot;</span>] = <span class="stringliteral">&quot;AUD&quot;</span></div>
<div class="line"><span class="lineno">  787</span>        };</div>
<div class="line"><span class="lineno">  788</span>        <span class="comment">//use iapiservice to get chart data, order it by timestamp</span></div>
<div class="line"><span class="lineno">  789</span>        var dailyCloseChartData = <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a79988bdd459de2ee2b545fa7cac3d92a">DailyCloseChartData</a>().OrderBy(ci =&gt; ci.Timestamp).ToList();</div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">if</span> (dailyCloseChartData == <span class="keyword">null</span> || dailyCloseChartData.Count() &lt; 1)</div>
<div class="line"><span class="lineno">  791</span>        {</div>
<div class="line"><span class="lineno">  792</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;could not export chart data, response from internal api service was null or empty&quot;</span>);</div>
<div class="line"><span class="lineno">  793</span>            <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="stringliteral">&quot;chart data was null from internal api service&quot;</span>);</div>
<div class="line"><span class="lineno">  794</span>        }</div>
<div class="line"><span class="lineno">  795</span>        <span class="comment">//group by metal, order by assetcodetonamemap dictionary elements, flatten the igrouping</span></div>
<div class="line"><span class="lineno">  796</span>        var dailyCloseChartDataSorted = dailyCloseChartData</div>
<div class="line"><span class="lineno">  797</span>            .GroupBy(ci =&gt; <span class="keyword">new</span> { metal = ci.Metal, order = assetCodeToNameMap.ToList().IndexOf(assetCodeToNameMap.First(map =&gt; map.Key == ci.Metal)) })</div>
<div class="line"><span class="lineno">  798</span>            .OrderBy(grp =&gt; grp.Key.order)</div>
<div class="line"><span class="lineno">  799</span>            .SelectMany(grp =&gt; grp);</div>
<div class="line"><span class="lineno">  800</span>        <span class="comment">//select new list for AUD currency convert and asset code to name map at same time</span></div>
<div class="line"><span class="lineno">  801</span>        var dailyCloseChartDataAUD = dailyCloseChartDataSorted.ToList().Select(ci =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a>()</div>
<div class="line"><span class="lineno">  802</span>            {</div>
<div class="line"><span class="lineno">  803</span>                Currency = <span class="stringliteral">&quot;AUD&quot;</span>,</div>
<div class="line"><span class="lineno">  804</span>                Metal = assetCodeToNameMap[ci.Metal],</div>
<div class="line"><span class="lineno">  805</span>                Spot = decimal.Round(<a class="code hl_function" href="#a8840f6557abefd786be545a44454e246">ConvertChartDataCurrency</a>(<span class="stringliteral">&quot;AUD&quot;</span>, ci, dailyCloseChartData), 4),</div>
<div class="line"><span class="lineno">  806</span>                Timestamp = ci.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">Timestamp</a></div>
<div class="line"><span class="lineno">  807</span>            });</div>
<div class="line"><span class="lineno">  808</span>        <span class="comment">//select new list for USD currency convert and asset code to name map at same time</span></div>
<div class="line"><span class="lineno">  809</span>        var dailyCloseChartDataUSD = dailyCloseChartDataSorted.ToList().Select(ci =&gt; <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">DailyCloseChartItem</a>()</div>
<div class="line"><span class="lineno">  810</span>            {</div>
<div class="line"><span class="lineno">  811</span>                Currency = <span class="stringliteral">&quot;USD&quot;</span>,</div>
<div class="line"><span class="lineno">  812</span>                Metal = assetCodeToNameMap[ci.Metal],</div>
<div class="line"><span class="lineno">  813</span>                Spot = decimal.Round(<a class="code hl_function" href="#a8840f6557abefd786be545a44454e246">ConvertChartDataCurrency</a>(<span class="stringliteral">&quot;USD&quot;</span>, ci, dailyCloseChartData), 4),</div>
<div class="line"><span class="lineno">  814</span>                Timestamp = ci.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html#a4a91da49271c810a5bf525182543b08b">Timestamp</a></div>
<div class="line"><span class="lineno">  815</span>            });</div>
<div class="line"><span class="lineno">  816</span>        <span class="comment">//save files</span></div>
<div class="line"><span class="lineno">  817</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  818</span>        {</div>
<div class="line"><span class="lineno">  819</span>            <span class="keywordflow">if</span> (!Directory.Exists(<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5d429b089bd15c7c16f03c8e677f3c64">PriceappSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_priceappsettings.html#a867349af7d125c704bd2513a3f3a9e70">ChartDataExportPath</a>))</div>
<div class="line"><span class="lineno">  820</span>                Directory.CreateDirectory(<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5d429b089bd15c7c16f03c8e677f3c64">PriceappSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_priceappsettings.html#a867349af7d125c704bd2513a3f3a9e70">ChartDataExportPath</a>);</div>
<div class="line"><span class="lineno">  821</span>            File.WriteAllText($<span class="stringliteral">&quot;{_settings.PriceappSettings.ChartDataExportPath}ChartData_AUD.json&quot;</span>, JsonConvert.SerializeObject(dailyCloseChartDataAUD, Formatting.None));</div>
<div class="line"><span class="lineno">  822</span>            File.WriteAllText($<span class="stringliteral">&quot;{_settings.PriceappSettings.ChartDataExportPath}ChartData_USD.json&quot;</span>, JsonConvert.SerializeObject(dailyCloseChartDataUSD, Formatting.None));</div>
<div class="line"><span class="lineno">  823</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;chart data exported&quot;</span>);</div>
<div class="line"><span class="lineno">  824</span>            <span class="keywordflow">return</span> (<span class="keyword">false</span>, $<span class="stringliteral">&quot;chart data exported&quot;</span>);</div>
<div class="line"><span class="lineno">  825</span>        }</div>
<div class="line"><span class="lineno">  826</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  827</span>        {</div>
<div class="line"><span class="lineno">  828</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;exception exporting chart data&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  829</span>            <span class="keywordflow">return</span> (<span class="keyword">true</span>, $<span class="stringliteral">&quot;exception saving daily spot: {ex.ToString()}&quot;</span>);</div>
<div class="line"><span class="lineno">  830</span>        }</div>
<div class="line"><span class="lineno">  831</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_priceappsettings_html_a867349af7d125c704bd2513a3f3a9e70"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_priceappsettings.html#a867349af7d125c704bd2513a3f3a9e70">TaskAPI.Helpers.Settings.TaskAPISettings.Priceappsettings.ChartDataExportPath</a></div><div class="ttdeci">string ChartDataExportPath</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:45</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_a5d429b089bd15c7c16f03c8e677f3c64"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5d429b089bd15c7c16f03c8e677f3c64">TaskAPI.Helpers.Settings.TaskAPISettings.PriceappSettings</a></div><div class="ttdeci">Priceappsettings PriceappSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:7</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a8840f6557abefd786be545a44454e246"><div class="ttname"><a href="#a8840f6557abefd786be545a44454e246">TaskAPI.Helpers.SpotHelper.ConvertChartDataCurrency</a></div><div class="ttdeci">decimal ConvertChartDataCurrency(string convertTo, DailyCloseChartItem convertItem, List&lt; DailyCloseChartItem &gt; metalPrices)</div><div class="ttdoc">Converts the spot price of chart data to the specified currency.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:847</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_daily_close_chart_item.html">TaskAPI.Models.DTO.InternalAPI.DailyCloseChartItem</a></div><div class="ttdef"><b>Definition</b> InternalAPI.cs:88</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_html_a79988bdd459de2ee2b545fa7cac3d92a"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a79988bdd459de2ee2b545fa7cac3d92a">TaskAPI.Services.InternalAPIService.DailyCloseChartData</a></div><div class="ttdeci">List&lt; DailyCloseChartItem &gt; DailyCloseChartData()</div><div class="ttdoc">Fetches daily close chart data from Internal API.</div><div class="ttdef"><b>Definition</b> InternalAPIService.cs:96</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html">TaskAPI.Services.LogService</a></div><div class="ttdoc">Provides logging services for various levels of application events, including debug,...</div><div class="ttdef"><b>Definition</b> LogService.cs:27</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html_a46dc9bf58bc9605c7e17dfee38b94354"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">TaskAPI.Services.LogService.LogError</a></div><div class="ttdeci">LogEntry LogError(LogSources logSource, params object[] dataList)</div><div class="ttdoc">Logs an error message to the database.</div><div class="ttdef"><b>Definition</b> LogService.cs:100</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html_a6be037b34888bbcf6b47dca8eef472de"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">TaskAPI.Services.LogService.LogDebug</a></div><div class="ttdeci">LogEntry LogDebug(LogSources logSource, params object[] dataList)</div><div class="ttdoc">Logs a debug message to the database.</div><div class="ttdef"><b>Definition</b> LogService.cs:74</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html_ac2b08e94307168cb702773d148d166ba"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">TaskAPI.Services.LogService.LogSources</a></div><div class="ttdeci">LogSources</div><div class="ttdef"><b>Definition</b> LogService.cs:37</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a0a13962d034427b5047452856eb3198d_cgraph.svg" width="100%" height="481"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a2d5da5f529f7ec58c18cefb373466d99" name="a2d5da5f529f7ec58c18cefb373466d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5da5f529f7ec58c18cefb373466d99">&#9670;&#160;</a></span>GenerateSpecialData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TaskAPI.Helpers.SpotHelper.GenerateSpecialData </td>
          <td>(</td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>pullTime</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>finalSpotList</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates special spot data entries and adds them to the final spot list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pullTime</td><td>The date and time at which the special data is generated.</td></tr>
    <tr><td class="paramname">finalSpotList</td><td>The list of BaseSpot objects to which the special data entries will be added.</td></tr>
  </table>
  </dd>
</dl>
<p>This method creates and appends special spot data entries to the final spot list.</p>
<p>It generates spot data for:</p>
<ul>
<li>
USDTAUD: Converts the existing spot data for AUDUSD to generate spot data for USDTAUD.  </li>
<li>
GSS tokens (AUS, AGS): Copies spot data from XAU (gold) and XAG (silver) entries, converting them to grams and assigns it to the respective GSS tokens.  </li>
<li>
AUDD Token: Adds a static spot data entry for AUDD (Australian Dollar Digital), with the spot value set to 1 AUD.  </li>
</ul>
<p>If a suitable pair is not found for any special data entry, a dummy entry is created with a spot value of 0, and appropriate error logging is performed.</p>
<div class="fragment"><div class="line"><span class="lineno">  582</span>    {</div>
<div class="line"><span class="lineno">  583</span>        <span class="comment">//USDTAUD</span></div>
<div class="line"><span class="lineno">  584</span>        <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>();</div>
<div class="line"><span class="lineno">  585</span>        <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>? bsOriginal = finalSpotList.FirstOrDefault(bs =&gt; bs.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a> == <span class="stringliteral">&quot;AUD&quot;</span> &amp;&amp; bs.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53103d0d5c3876af06947e4d7be0d541">PairCode</a> == <span class="stringliteral">&quot;USD&quot;</span>);</div>
<div class="line"><span class="lineno">  586</span>        <span class="keywordflow">if</span> (bsOriginal == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  587</span>        {</div>
<div class="line"><span class="lineno">  588</span>            <span class="comment">//cant find match, create dummy entry</span></div>
<div class="line"><span class="lineno">  589</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;unable to find suitable pair in finalSpotList feed for USDT&quot;</span>);</div>
<div class="line"><span class="lineno">  590</span>            bs.AssetCode = <span class="stringliteral">&quot;USDT&quot;</span>;</div>
<div class="line"><span class="lineno">  591</span>            bs.PairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  592</span>            bs.Per = <span class="stringliteral">&quot;coin&quot;</span>;</div>
<div class="line"><span class="lineno">  593</span>            bs.Source = <span class="stringliteral">&quot;None&quot;</span>;</div>
<div class="line"><span class="lineno">  594</span>            bs.PullTime = pullTime;</div>
<div class="line"><span class="lineno">  595</span>            bs.Spot = 0;</div>
<div class="line"><span class="lineno">  596</span>        }</div>
<div class="line"><span class="lineno">  597</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  598</span>        {</div>
<div class="line"><span class="lineno">  599</span>            <span class="comment">//use current matching metal spot and convert to grams</span></div>
<div class="line"><span class="lineno">  600</span>            bs.AssetCode = <span class="stringliteral">&quot;USDT&quot;</span>;</div>
<div class="line"><span class="lineno">  601</span>            bs.PairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  602</span>            bs.Per = <span class="stringliteral">&quot;coin&quot;</span>;</div>
<div class="line"><span class="lineno">  603</span>            bs.Source = bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53f94494658ba0a6bb555b7d0346f60d">Source</a>;</div>
<div class="line"><span class="lineno">  604</span>            bs.PullTime = bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#abbb6466c0a299a01a982efb772382e5d">PullTime</a>;</div>
<div class="line"><span class="lineno">  605</span>            bs.Spot = 1 / bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#ac34435c653855618d7586ac10a5f7218">Spot</a>;</div>
<div class="line"><span class="lineno">  606</span>        }</div>
<div class="line"><span class="lineno">  607</span>        finalSpotList.Add(bs);</div>
<div class="line"><span class="lineno">  608</span>        <span class="comment">//GSS tokens</span></div>
<div class="line"><span class="lineno">  609</span>        <span class="keywordflow">foreach</span> (var x <span class="keywordflow">in</span> <span class="keyword">new</span>[] { <span class="keyword">new</span> { AssetCode = <span class="stringliteral">&quot;AUS&quot;</span>, Copy = <span class="stringliteral">&quot;XAU&quot;</span> }, <span class="keyword">new</span> { AssetCode = <span class="stringliteral">&quot;AGS&quot;</span>, Copy = <span class="stringliteral">&quot;XAG&quot;</span> } })</div>
<div class="line"><span class="lineno">  610</span>        {</div>
<div class="line"><span class="lineno">  611</span>            bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>();</div>
<div class="line"><span class="lineno">  612</span>            bsOriginal = finalSpotList.FirstOrDefault(bs =&gt; bs.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a> == x.Copy);</div>
<div class="line"><span class="lineno">  613</span>            <span class="keywordflow">if</span> (bsOriginal == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  614</span>            {</div>
<div class="line"><span class="lineno">  615</span>                <span class="comment">//cant find match, create dummy entry</span></div>
<div class="line"><span class="lineno">  616</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;unable to find suitable pair in finalSpotList feed for {x.AssetCode}&quot;</span>);</div>
<div class="line"><span class="lineno">  617</span>                bs.AssetCode = x.AssetCode;</div>
<div class="line"><span class="lineno">  618</span>                bs.PairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  619</span>                bs.Per = <span class="stringliteral">&quot;coin&quot;</span>;</div>
<div class="line"><span class="lineno">  620</span>                bs.Source = <span class="stringliteral">&quot;none&quot;</span>;</div>
<div class="line"><span class="lineno">  621</span>                bs.PullTime = pullTime;</div>
<div class="line"><span class="lineno">  622</span>                bs.Spot = 0;</div>
<div class="line"><span class="lineno">  623</span>            }</div>
<div class="line"><span class="lineno">  624</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  625</span>            {</div>
<div class="line"><span class="lineno">  626</span>                <span class="comment">//use current matching metal spot and convert to grams</span></div>
<div class="line"><span class="lineno">  627</span>                bs.AssetCode = x.AssetCode;</div>
<div class="line"><span class="lineno">  628</span>                bs.PairCode = bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53103d0d5c3876af06947e4d7be0d541">PairCode</a>;</div>
<div class="line"><span class="lineno">  629</span>                bs.Per = <span class="stringliteral">&quot;coin&quot;</span>;</div>
<div class="line"><span class="lineno">  630</span>                bs.Source = bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53f94494658ba0a6bb555b7d0346f60d">Source</a>;</div>
<div class="line"><span class="lineno">  631</span>                bs.PullTime = bsOriginal.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#abbb6466c0a299a01a982efb772382e5d">PullTime</a>;</div>
<div class="line"><span class="lineno">  632</span>                bs.Spot = bsOriginal.Spot / <a class="code hl_variable" href="#aef6b7b6e86e3a962f65aa9f929b8f49a">tOzGrams</a>;</div>
<div class="line"><span class="lineno">  633</span>            }</div>
<div class="line"><span class="lineno">  634</span>            finalSpotList.Add(bs);</div>
<div class="line"><span class="lineno">  635</span>        }</div>
<div class="line"><span class="lineno">  636</span>        <span class="comment">//AUDD Token</span></div>
<div class="line"><span class="lineno">  637</span>        bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>()</div>
<div class="line"><span class="lineno">  638</span>        {</div>
<div class="line"><span class="lineno">  639</span>            AssetCode = <span class="stringliteral">&quot;AUDD&quot;</span>,</div>
<div class="line"><span class="lineno">  640</span>            PairCode = <span class="stringliteral">&quot;AUD&quot;</span>,</div>
<div class="line"><span class="lineno">  641</span>            Per = <span class="stringliteral">&quot;coin&quot;</span>,</div>
<div class="line"><span class="lineno">  642</span>            Source = <span class="stringliteral">&quot;Static&quot;</span>,</div>
<div class="line"><span class="lineno">  643</span>            PullTime = pullTime,</div>
<div class="line"><span class="lineno">  644</span>            Spot = 1</div>
<div class="line"><span class="lineno">  645</span>        };</div>
<div class="line"><span class="lineno">  646</span>        finalSpotList.Add(bs);</div>
<div class="line"><span class="lineno">  647</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_aef6b7b6e86e3a962f65aa9f929b8f49a"><div class="ttname"><a href="#aef6b7b6e86e3a962f65aa9f929b8f49a">TaskAPI.Helpers.SpotHelper.tOzGrams</a></div><div class="ttdeci">const double tOzGrams</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:36</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html">TaskAPI.Models.BaseSpot</a></div><div class="ttdef"><b>Definition</b> BaseSpot.cs:11</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html_a53103d0d5c3876af06947e4d7be0d541"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53103d0d5c3876af06947e4d7be0d541">TaskAPI.Models.BaseSpot.PairCode</a></div><div class="ttdeci">string PairCode</div><div class="ttdef"><b>Definition</b> BaseSpot.cs:17</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html_a53f94494658ba0a6bb555b7d0346f60d"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a53f94494658ba0a6bb555b7d0346f60d">TaskAPI.Models.BaseSpot.Source</a></div><div class="ttdeci">string Source</div><div class="ttdef"><b>Definition</b> BaseSpot.cs:24</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html_a9fa574ef36b5343f32a53d5edd7addb4"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">TaskAPI.Models.BaseSpot.AssetCode</a></div><div class="ttdeci">string AssetCode</div><div class="ttdef"><b>Definition</b> BaseSpot.cs:14</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html_abbb6466c0a299a01a982efb772382e5d"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html#abbb6466c0a299a01a982efb772382e5d">TaskAPI.Models.BaseSpot.PullTime</a></div><div class="ttdeci">DateTime PullTime</div><div class="ttdef"><b>Definition</b> BaseSpot.cs:27</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_base_spot_html_ac34435c653855618d7586ac10a5f7218"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_base_spot.html#ac34435c653855618d7586ac10a5f7218">TaskAPI.Models.BaseSpot.Spot</a></div><div class="ttdeci">double Spot</div><div class="ttdef"><b>Definition</b> BaseSpot.cs:20</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a2d5da5f529f7ec58c18cefb373466d99_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a2d5da5f529f7ec58c18cefb373466d99_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a249585457b73bcd269d8644a8120465e" name="a249585457b73bcd269d8644a8120465e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a249585457b73bcd269d8644a8120465e">&#9670;&#160;</a></span>IsMarketOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool TaskAPI.Helpers.SpotHelper.IsMarketOpen </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines if the market for a specific instrument is currently open. </p>
<dl class="section return"><dt>Returns</dt><dd>A bool indicating whether the market for the specified instrument is open. Returns <code>true</code> if the market is open and tradeable; otherwise, returns <code>false</code>. </dd></dl>
<p>This method checks the tradeability of the instrument 'XAU' (Gold) against USD by querying the OANDA API for its current price and tradeable status. It utilises the IApiService.GetOandaInstrumentPriceUSD method to retrieve the price information. </p>
<div class="fragment"><div class="line"><span class="lineno">  903</span>    {</div>
<div class="line"><span class="lineno">  904</span>        <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price.html">InstrumentPrice</a>? oandaXAUUSD = <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#aa614614518048e1244ae357de18425df">GetOandaInstrumentPriceUSD</a>(<span class="stringliteral">&quot;XAU&quot;</span>);</div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">return</span> oandaXAUUSD?.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price.html#a107de5614f0f7dddc66c2aaa583d9b78">prices</a>?[0].<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price_1_1_price.html#a023b866f0cbd286e306e9441910da314">tradeable</a> ?? <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  906</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price_1_1_price_html_a023b866f0cbd286e306e9441910da314"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price_1_1_price.html#a023b866f0cbd286e306e9441910da314">TaskAPI.Models.DTO.Oanda.InstrumentPrice.Price.tradeable</a></div><div class="ttdeci">bool tradeable</div><div class="ttdef"><b>Definition</b> OandaInstrumentPrice.cs:17</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price.html">TaskAPI.Models.DTO.Oanda.InstrumentPrice</a></div><div class="ttdef"><b>Definition</b> OandaInstrumentPrice.cs:4</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price_html_a107de5614f0f7dddc66c2aaa583d9b78"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_oanda_1_1_instrument_price.html#a107de5614f0f7dddc66c2aaa583d9b78">TaskAPI.Models.DTO.Oanda.InstrumentPrice.prices</a></div><div class="ttdeci">Price[] prices</div><div class="ttdef"><b>Definition</b> OandaInstrumentPrice.cs:6</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_html_aa614614518048e1244ae357de18425df"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#aa614614518048e1244ae357de18425df">TaskAPI.Services.InternalAPIService.GetOandaInstrumentPriceUSD</a></div><div class="ttdeci">InstrumentPrice? GetOandaInstrumentPriceUSD(string assetCode)</div><div class="ttdoc">Retrieves the price of a specified OANDA instrument in USD.</div><div class="ttdef"><b>Definition</b> InternalAPIService.cs:133</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a249585457b73bcd269d8644a8120465e_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a249585457b73bcd269d8644a8120465e_icgraph.svg" width="440" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7ff886c42d0b6aba649b98f9935772bc" name="a7ff886c42d0b6aba649b98f9935772bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ff886c42d0b6aba649b98f9935772bc">&#9670;&#160;</a></span>MarketStatusOverride()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a> TaskAPI.Helpers.SpotHelper.MarketStatusOverride </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the current market status override from an external service. </p>
<dl class="section return"><dt>Returns</dt><dd>A MarketStatusOverrides value representing the current market status override. If no override is set, returns MarketStatusOverrides.UseMarket. </dd></dl>
<p>This method queries Internal API service to determine if there are any overrides on the market status. The method uses the IApiService.GetPriceappMarketStatusOverride to fetch the override status. </p>
<div class="fragment"><div class="line"><span class="lineno">  920</span>    {</div>
<div class="line"><span class="lineno">  921</span>        <span class="keywordtype">int</span>? statusOverrideResponse = <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a55b9f5404586ba97531f1cdc013ecaed">GetPriceappMarketStatusOverride</a>();</div>
<div class="line"><span class="lineno">  922</span>        <span class="keywordflow">if</span> (statusOverrideResponse.HasValue)</div>
<div class="line"><span class="lineno">  923</span>        {</div>
<div class="line"><span class="lineno">  924</span>            <a class="code hl_enumeration" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a> statusOverride = (<a class="code hl_enumeration" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>)statusOverrideResponse;</div>
<div class="line"><span class="lineno">  925</span>            <span class="keywordflow">return</span> statusOverride;</div>
<div class="line"><span class="lineno">  926</span>        }</div>
<div class="line"><span class="lineno">  927</span>        <span class="keywordflow">return</span> <a class="code hl_enumeration" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a>.UseMarket;</div>
<div class="line"><span class="lineno">  928</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_html_a55b9f5404586ba97531f1cdc013ecaed"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a55b9f5404586ba97531f1cdc013ecaed">TaskAPI.Services.InternalAPIService.GetPriceappMarketStatusOverride</a></div><div class="ttdeci">int? GetPriceappMarketStatusOverride()</div><div class="ttdoc">Gets the market status override setting from Internal API.</div><div class="ttdef"><b>Definition</b> InternalAPIService.cs:162</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a7ff886c42d0b6aba649b98f9935772bc_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a7ff886c42d0b6aba649b98f9935772bc_icgraph.svg" width="440" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a701fc9c0beaecff83beb2c806b8581d5" name="a701fc9c0beaecff83beb2c806b8581d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a701fc9c0beaecff83beb2c806b8581d5">&#9670;&#160;</a></span>PullBinanceData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; TaskAPI.Helpers.SpotHelper.PullBinanceData </td>
          <td>(</td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>pullTime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves spot data from Binance for each specified asset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pullTime</td><td>The date and time at which the data is pulled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of BaseSpot objects containing spot data from Binance. </dd></dl>
<p>This method fetches spot data from Binance for each asset specified in the Binance settings.</p>
<p>First, it checks if there is any error in retrieving the feed response from Binance. If an error occurs, the method logs it and sets a flag to indicate the error.</p>
<p>If there is no feed error, the method attempts to retrieve the spot value for each asset from the Binance feed response, prioritising different currency pairs.</p>
<p>If the spot value cannot be obtained or parsed, appropriate error logging is performed.</p>
<p>Each BaseSpot object is assigned the source name from the Binance settings, the pull time, and the spot value obtained.</p>
<div class="fragment"><div class="line"><span class="lineno">  500</span>    {</div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordtype">bool</span> feedError = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  502</span>        List&lt;BaseSpot&gt; spotList = <span class="keyword">new</span> List&lt;BaseSpot&gt;();</div>
<div class="line"><span class="lineno">  503</span>        <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html">BinanceResponse</a> binanceResponse = <a class="code hl_variable" href="#ae2c3fbeea2c16cbaa6206ff9aaebb5fe">_binanceService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_binance_service.html#a5863f72c89f66991b6ea2172de8e4687">PullFeed</a>();</div>
<div class="line"><span class="lineno">  504</span>        <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;latest data from binance feed&quot;</span>, binanceResponse);</div>
<div class="line"><span class="lineno">  505</span>        <span class="keywordflow">if</span> (binanceResponse == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  506</span>        {</div>
<div class="line"><span class="lineno">  507</span>            feedError = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  508</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;response from binance feed service is null&quot;</span>);</div>
<div class="line"><span class="lineno">  509</span>        }</div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">foreach</span> (var x <span class="keywordflow">in</span> <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a127cce7c28a6e430b091679ca27ef9a7">BinanceSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings.html#a0359754b8dd571a50996e9d5fdf21c24">Assets</a>)</div>
<div class="line"><span class="lineno">  511</span>        {</div>
<div class="line"><span class="lineno">  512</span>            <span class="keywordtype">double</span> spot = 0;</div>
<div class="line"><span class="lineno">  513</span>            <span class="keywordtype">string</span> pairCode = <span class="stringliteral">&quot;USD&quot;</span>;</div>
<div class="line"><span class="lineno">  514</span>            <span class="keywordflow">if</span> (!feedError)</div>
<div class="line"><span class="lineno">  515</span>            {</div>
<div class="line"><span class="lineno">  516</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  517</span>                {</div>
<div class="line"><span class="lineno">  518</span>                    <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(binanceResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html#abcf25f174de498b1b8b35ed21ad8ad44">Assets</a>.FirstOrDefault(ass =&gt; ass.symbol == $<span class="stringliteral">&quot;{x.AssetCode}USDT&quot;</span>)?.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_1_1_asset.html#aff5192e877aa1a4560e421e50df0b59d">price</a>, out spot))</div>
<div class="line"><span class="lineno">  519</span>                    {</div>
<div class="line"><span class="lineno">  520</span>                        <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(binanceResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html#abcf25f174de498b1b8b35ed21ad8ad44">Assets</a>.FirstOrDefault(ass =&gt; ass.symbol == $<span class="stringliteral">&quot;{x.AssetCode}AUD&quot;</span>)?.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_1_1_asset.html#aff5192e877aa1a4560e421e50df0b59d">price</a>, out spot))</div>
<div class="line"><span class="lineno">  521</span>                        {</div>
<div class="line"><span class="lineno">  522</span>                            <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(binanceResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html#abcf25f174de498b1b8b35ed21ad8ad44">Assets</a>.FirstOrDefault(ass =&gt; ass.symbol == $<span class="stringliteral">&quot;{x.AssetCode}BTC&quot;</span>)?.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_1_1_asset.html#aff5192e877aa1a4560e421e50df0b59d">price</a>, out spot))</div>
<div class="line"><span class="lineno">  523</span>                            {</div>
<div class="line"><span class="lineno">  524</span>                                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;unable to find suitable pair in binance feed for {x.AssetCode}&quot;</span>);</div>
<div class="line"><span class="lineno">  525</span>                            }</div>
<div class="line"><span class="lineno">  526</span>                            <span class="keywordflow">else</span> <span class="comment">//btc pair matched</span></div>
<div class="line"><span class="lineno">  527</span>                            {</div>
<div class="line"><span class="lineno">  528</span>                                pairCode = <span class="stringliteral">&quot;BTC&quot;</span>;</div>
<div class="line"><span class="lineno">  529</span>                            }</div>
<div class="line"><span class="lineno">  530</span>                        }</div>
<div class="line"><span class="lineno">  531</span>                        <span class="keywordflow">else</span> <span class="comment">//usdt pair matched</span></div>
<div class="line"><span class="lineno">  532</span>                        {</div>
<div class="line"><span class="lineno">  533</span>                            pairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  534</span>                        }</div>
<div class="line"><span class="lineno">  535</span>                    }</div>
<div class="line"><span class="lineno">  536</span>                }</div>
<div class="line"><span class="lineno">  537</span>                <span class="keywordflow">catch</span>(Exception ex)</div>
<div class="line"><span class="lineno">  538</span>                {</div>
<div class="line"><span class="lineno">  539</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;exception reading spot from binance feed response for {x.AssetCode}&quot;</span>, ex);</div>
<div class="line"><span class="lineno">  540</span>                }</div>
<div class="line"><span class="lineno">  541</span>            }</div>
<div class="line"><span class="lineno">  542</span>            <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>()</div>
<div class="line"><span class="lineno">  543</span>            {</div>
<div class="line"><span class="lineno">  544</span>                AssetCode = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a>,</div>
<div class="line"><span class="lineno">  545</span>                PairCode = pairCode,</div>
<div class="line"><span class="lineno">  546</span>                Per = <span class="stringliteral">&quot;coin&quot;</span>,</div>
<div class="line"><span class="lineno">  547</span>                Source = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a127cce7c28a6e430b091679ca27ef9a7">BinanceSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings.html#a599c1e6c9503b054c6805069f0b7c787">SourceName</a>,</div>
<div class="line"><span class="lineno">  548</span>                PullTime = pullTime,</div>
<div class="line"><span class="lineno">  549</span>                Spot = spot <span class="comment">//if error, enter 0 value</span></div>
<div class="line"><span class="lineno">  550</span>            };</div>
<div class="line"><span class="lineno">  551</span>            spotList.Add(bs);</div>
<div class="line"><span class="lineno">  552</span>        }</div>
<div class="line"><span class="lineno">  553</span>        <span class="keywordflow">return</span> spotList;</div>
<div class="line"><span class="lineno">  554</span>        <span class="comment">//DEBUG</span></div>
<div class="line"><span class="lineno">  555</span>        <span class="comment">//spotList.First(x =&gt; x.AssetCode == &quot;ETH&quot;).Spot = 0;</span></div>
<div class="line"><span class="lineno">  556</span>        <span class="comment">//spotList.First(x =&gt; x.AssetCode == &quot;BTC&quot;).Spot = 0;</span></div>
<div class="line"><span class="lineno">  557</span>        <span class="comment">//return spotList;</span></div>
<div class="line"><span class="lineno">  558</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings_html_a0359754b8dd571a50996e9d5fdf21c24"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings.html#a0359754b8dd571a50996e9d5fdf21c24">TaskAPI.Helpers.Settings.TaskAPISettings.Binancesettings.Assets</a></div><div class="ttdeci">Asset[] Assets</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:123</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings_html_a599c1e6c9503b054c6805069f0b7c787"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_binancesettings.html#a599c1e6c9503b054c6805069f0b7c787">TaskAPI.Helpers.Settings.TaskAPISettings.Binancesettings.SourceName</a></div><div class="ttdeci">string SourceName</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:121</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_a127cce7c28a6e430b091679ca27ef9a7"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a127cce7c28a6e430b091679ca27ef9a7">TaskAPI.Helpers.Settings.TaskAPISettings.BinanceSettings</a></div><div class="ttdeci">Binancesettings BinanceSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:14</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_1_1_asset_html_aff5192e877aa1a4560e421e50df0b59d"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_1_1_asset.html#aff5192e877aa1a4560e421e50df0b59d">TaskAPI.Models.DTO.BinanceResponse.Asset.price</a></div><div class="ttdeci">string price</div><div class="ttdef"><b>Definition</b> BinanceResponse.cs:10</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html">TaskAPI.Models.DTO.BinanceResponse</a></div><div class="ttdef"><b>Definition</b> BinanceResponse.cs:4</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response_html_abcf25f174de498b1b8b35ed21ad8ad44"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_binance_response.html#abcf25f174de498b1b8b35ed21ad8ad44">TaskAPI.Models.DTO.BinanceResponse.Assets</a></div><div class="ttdeci">Asset[] Assets</div><div class="ttdef"><b>Definition</b> BinanceResponse.cs:5</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_binance_service_html_a5863f72c89f66991b6ea2172de8e4687"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_binance_service.html#a5863f72c89f66991b6ea2172de8e4687">TaskAPI.Services.BinanceService.PullFeed</a></div><div class="ttdeci">BinanceResponse PullFeed()</div><div class="ttdoc">Retrieves the latest cryptocurrency data feed from Binance.</div><div class="ttdef"><b>Definition</b> BinanceService.cs:40</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html_a78c9df658858fa3099eed69421423898"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">TaskAPI.Services.LogService.LogException</a></div><div class="ttdeci">LogEntry LogException(LogSources logSource, params object[] dataList)</div><div class="ttdoc">Logs an exception to the database.</div><div class="ttdef"><b>Definition</b> LogService.cs:112</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a701fc9c0beaecff83beb2c806b8581d5_cgraph.svg" width="100%" height="444"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a701fc9c0beaecff83beb2c806b8581d5_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a51135865d712678dee52479c109a61fb" name="a51135865d712678dee52479c109a61fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51135865d712678dee52479c109a61fb">&#9670;&#160;</a></span>PullForexData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; TaskAPI.Helpers.SpotHelper.PullForexData </td>
          <td>(</td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>pullTime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pull data from forexfeed in one hit, check single time variation is within threshold add items to spotlist, 0 value if time threshold error </p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>    {</div>
<div class="line"><span class="lineno">  336</span>        <span class="keywordtype">bool</span> feedError = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  337</span>        List&lt;BaseSpot&gt; spotList = <span class="keyword">new</span> List&lt;BaseSpot&gt;();</div>
<div class="line"><span class="lineno">  338</span>        <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html">ForexResponse</a>? forexResponse = <span class="keyword">null</span>;</div>
<div class="line"><span class="lineno">  339</span>        <span class="comment">// if market open, pull data, otherwise leave forexResponse as null</span></div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a89a665897ed47f9b7065ce771100b83c">CanSync</a>()) { </div>
<div class="line"><span class="lineno">  341</span>            forexResponse = <a class="code hl_variable" href="#a47a7675b28528fddd0add10e0daceb3a">_forexService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_forex_service.html#a45ca436cc529b87e410d8b208abea3b1">PullFeed</a>();</div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;latest data from forex feed for&quot;</span>, forexResponse);</div>
<div class="line"><span class="lineno">  343</span>            <span class="keywordflow">if</span> (forexResponse == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  344</span>            {</div>
<div class="line"><span class="lineno">  345</span>                feedError = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  346</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;response from forex feed service is null&quot;</span>, forexResponse);</div>
<div class="line"><span class="lineno">  347</span>            }</div>
<div class="line"><span class="lineno">  348</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  349</span>            {</div>
<div class="line"><span class="lineno">  350</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  351</span>                {</div>
<div class="line"><span class="lineno">  352</span>                    <span class="comment">//check feed time variation</span></div>
<div class="line"><span class="lineno">  353</span>                    var feedTime = DateTimeOffset.FromUnixTimeSeconds(<span class="keywordtype">long</span>.Parse(forexResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a887a42c887a5585d9c99c9d8694fa263">head</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_head.html#adf13bd6ff354f29411018a289d04143f">utc_time</a>.ToString())).UtcDateTime.ToLocalTime();</div>
<div class="line"><span class="lineno">  354</span>                    <span class="keywordflow">if</span> ((pullTime - feedTime).TotalMinutes &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#ab263694d641e1015ecc390a0f685d585">TimeDifferenceThresholdMinutes</a>)</div>
<div class="line"><span class="lineno">  355</span>                    {</div>
<div class="line"><span class="lineno">  356</span>                        feedError = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  357</span>                        <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;time variation beyond threshold for forex feed data&quot;</span>, forexResponse);</div>
<div class="line"><span class="lineno">  358</span>                    }</div>
<div class="line"><span class="lineno">  359</span>                }</div>
<div class="line"><span class="lineno">  360</span>                <span class="keywordflow">catch</span>(Exception ex)</div>
<div class="line"><span class="lineno">  361</span>                {</div>
<div class="line"><span class="lineno">  362</span>                    feedError = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  363</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;exception checking feed time from forex feed response&quot;</span>, forexResponse, ex);</div>
<div class="line"><span class="lineno">  364</span>                }</div>
<div class="line"><span class="lineno">  365</span>            }</div>
<div class="line"><span class="lineno">  366</span>        }</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">foreach</span> (var x <span class="keywordflow">in</span> <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a0eb4318ad18306881384e7097caaa9f0">ForexSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings.html#aac3ce432f05195e369540151cedc8c23">Assets</a>)</div>
<div class="line"><span class="lineno">  368</span>        {</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordtype">double</span> spot = 0;</div>
<div class="line"><span class="lineno">  370</span>            <span class="keywordtype">string</span> pairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  371</span>            <span class="comment">// if forexResponse popualted, create basespots with live data.  if forexResponse is null, create dummy basespots with 0</span></div>
<div class="line"><span class="lineno">  372</span>            <span class="keywordflow">if</span> (!feedError &amp;&amp; forexResponse != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  373</span>            {</div>
<div class="line"><span class="lineno">  374</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  375</span>                {</div>
<div class="line"><span class="lineno">  376</span>                    <span class="keywordflow">if</span>(!<span class="keywordtype">double</span>.TryParse(((<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html">ForexResponse</a>.<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data.html">Data</a>.<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data_1_1_spot_instance.html">SpotInstance</a>[])forexResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a945a66fb427a67f5d20d34c39b869d74">data</a>.GetType().GetProperty($<span class="stringliteral">&quot;{x.AssetCode}AUD&quot;</span>)?.GetValue(forexResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a945a66fb427a67f5d20d34c39b869d74">data</a>))?[0].ask, out spot))</div>
<div class="line"><span class="lineno">  377</span>                    {</div>
<div class="line"><span class="lineno">  378</span>                        <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(((<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html">ForexResponse</a>.<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data.html">Data</a>.<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data_1_1_spot_instance.html">SpotInstance</a>[])forexResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a945a66fb427a67f5d20d34c39b869d74">data</a>.GetType().GetProperty($<span class="stringliteral">&quot;{x.AssetCode}USD&quot;</span>)?.GetValue(forexResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a945a66fb427a67f5d20d34c39b869d74">data</a>))?[0].ask, out spot))</div>
<div class="line"><span class="lineno">  379</span>                        {</div>
<div class="line"><span class="lineno">  380</span>                            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;unable to find suitable pair in forex feed for {x.AssetCode}&quot;</span>, forexResponse);</div>
<div class="line"><span class="lineno">  381</span>                        }</div>
<div class="line"><span class="lineno">  382</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  383</span>                        {</div>
<div class="line"><span class="lineno">  384</span>                            pairCode = <span class="stringliteral">&quot;USD&quot;</span>;</div>
<div class="line"><span class="lineno">  385</span>                        }</div>
<div class="line"><span class="lineno">  386</span>                    }</div>
<div class="line"><span class="lineno">  387</span>                }</div>
<div class="line"><span class="lineno">  388</span>                <span class="keywordflow">catch</span>(Exception ex)</div>
<div class="line"><span class="lineno">  389</span>                {</div>
<div class="line"><span class="lineno">  390</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;exception reading spot from forex feed response for {x.AssetCode}&quot;</span>, forexResponse, ex);</div>
<div class="line"><span class="lineno">  391</span>                }</div>
<div class="line"><span class="lineno">  392</span>            }</div>
<div class="line"><span class="lineno">  393</span>            <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>()</div>
<div class="line"><span class="lineno">  394</span>            {</div>
<div class="line"><span class="lineno">  395</span>                AssetCode = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a>,</div>
<div class="line"><span class="lineno">  396</span>                PairCode = pairCode,</div>
<div class="line"><span class="lineno">  397</span>                Per = x.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span> ? <span class="stringliteral">&quot;$&quot;</span> : <span class="stringliteral">&quot;oz&quot;</span>,</div>
<div class="line"><span class="lineno">  398</span>                Source = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a0eb4318ad18306881384e7097caaa9f0">ForexSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings.html#a81e4b95c98d601fcb21cc42c2b4a32ba">SourceName</a>,</div>
<div class="line"><span class="lineno">  399</span>                PullTime = pullTime,</div>
<div class="line"><span class="lineno">  400</span>                Spot = spot</div>
<div class="line"><span class="lineno">  401</span>            };</div>
<div class="line"><span class="lineno">  402</span>            spotList.Add(bs);</div>
<div class="line"><span class="lineno">  403</span>        }</div>
<div class="line"><span class="lineno">  404</span>        <span class="keywordflow">return</span> spotList;</div>
<div class="line"><span class="lineno">  405</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings_html_a81e4b95c98d601fcb21cc42c2b4a32ba"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings.html#a81e4b95c98d601fcb21cc42c2b4a32ba">TaskAPI.Helpers.Settings.TaskAPISettings.Forexsettings.SourceName</a></div><div class="ttdeci">string SourceName</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:68</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings_html_aac3ce432f05195e369540151cedc8c23"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_forexsettings.html#aac3ce432f05195e369540151cedc8c23">TaskAPI.Helpers.Settings.TaskAPISettings.Forexsettings.Assets</a></div><div class="ttdeci">Asset[] Assets</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:70</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings_html_ab263694d641e1015ecc390a0f685d585"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#ab263694d641e1015ecc390a0f685d585">TaskAPI.Helpers.Settings.TaskAPISettings.Spotfeedsettings.TimeDifferenceThresholdMinutes</a></div><div class="ttdeci">int TimeDifferenceThresholdMinutes</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:30</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_a0eb4318ad18306881384e7097caaa9f0"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a0eb4318ad18306881384e7097caaa9f0">TaskAPI.Helpers.Settings.TaskAPISettings.ForexSettings</a></div><div class="ttdeci">Forexsettings ForexSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:9</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_abc5a23cce7a98ce3cd109ecb1c3122ae"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">TaskAPI.Helpers.Settings.TaskAPISettings.SpotFeedSettings</a></div><div class="ttdeci">Spotfeedsettings SpotFeedSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:13</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a89a665897ed47f9b7065ce771100b83c"><div class="ttname"><a href="#a89a665897ed47f9b7065ce771100b83c">TaskAPI.Helpers.SpotHelper.CanSync</a></div><div class="ttdeci">bool CanSync()</div><div class="ttdoc">Determines whether synchronisation with the market is possible based on the current market status.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:882</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data_1_1_spot_instance_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data_1_1_spot_instance.html">TaskAPI.Models.DTO.ForexResponse.Data.SpotInstance</a></div><div class="ttdef"><b>Definition</b> ForexResponse.cs:38</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_data.html">TaskAPI.Models.DTO.ForexResponse.Data</a></div><div class="ttdef"><b>Definition</b> ForexResponse.cs:30</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_head_html_adf13bd6ff354f29411018a289d04143f"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_1_1_head.html#adf13bd6ff354f29411018a289d04143f">TaskAPI.Models.DTO.ForexResponse.Head.utc_time</a></div><div class="ttdeci">int utc_time</div><div class="ttdef"><b>Definition</b> ForexResponse.cs:17</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html">TaskAPI.Models.DTO.ForexResponse</a></div><div class="ttdef"><b>Definition</b> ForexResponse.cs:4</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_html_a887a42c887a5585d9c99c9d8694fa263"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a887a42c887a5585d9c99c9d8694fa263">TaskAPI.Models.DTO.ForexResponse.head</a></div><div class="ttdeci">Head head</div><div class="ttdef"><b>Definition</b> ForexResponse.cs:6</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response_html_a945a66fb427a67f5d20d34c39b869d74"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_forex_response.html#a945a66fb427a67f5d20d34c39b869d74">TaskAPI.Models.DTO.ForexResponse.data</a></div><div class="ttdeci">Data data</div><div class="ttdef"><b>Definition</b> ForexResponse.cs:7</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_forex_service_html_a45ca436cc529b87e410d8b208abea3b1"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_forex_service.html#a45ca436cc529b87e410d8b208abea3b1">TaskAPI.Services.ForexService.PullFeed</a></div><div class="ttdeci">ForexResponse PullFeed()</div><div class="ttdoc">Retrieves the latest Forex data from the configured feed.</div><div class="ttdef"><b>Definition</b> ForexService.cs:38</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a51135865d712678dee52479c109a61fb_cgraph.svg" width="100%" height="488"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a51135865d712678dee52479c109a61fb_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0fd06a80c097c9b6fcd5ddd8b1889c18" name="a0fd06a80c097c9b6fcd5ddd8b1889c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd06a80c097c9b6fcd5ddd8b1889c18">&#9670;&#160;</a></span>PullOandaData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; TaskAPI.Helpers.SpotHelper.PullOandaData </td>
          <td>(</td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>pullTime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves spot data from Oanda for each specified asset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pullTime</td><td>The date and time at which the data is pulled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of BaseSpot objects containing spot data from Oanda. </dd></dl>
<p>This method fetches spot data from Oanda for each asset specified in the Oanda settings.</p>
<p>If the method CanSync returns true, indicating that data synchronization is allowed, it proceeds to fetch data.</p>
<p>The spot data retrieved includes the asset's spot value and pair code.</p>
<p>For each asset, the method attempts to retrieve the spot value from Oanda's feed, prioritising different price sources.</p>
<p>If the spot value cannot be obtained or is zero, appropriate error logging is performed.</p>
<p>Each BaseSpot object is assigned the source name from the Oanda settings and the pull time.</p>
<div class="fragment"><div class="line"><span class="lineno">  423</span>    {</div>
<div class="line"><span class="lineno">  424</span>        List&lt;BaseSpot&gt; spotList = <span class="keyword">new</span> List&lt;BaseSpot&gt;();</div>
<div class="line"><span class="lineno">  425</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="#a89a665897ed47f9b7065ce771100b83c">CanSync</a>())</div>
<div class="line"><span class="lineno">  426</span>        {</div>
<div class="line"><span class="lineno">  427</span>            <span class="keywordflow">foreach</span> (var x <span class="keywordflow">in</span> <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5dfa2605f71620cafd59a7159f2c3488">OandaSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings.html#ab542487a4c6f5b4e9e39d2d63b70bf14">Assets</a>)</div>
<div class="line"><span class="lineno">  428</span>            {</div>
<div class="line"><span class="lineno">  429</span>                <span class="keywordtype">double</span> spot = 0;</div>
<div class="line"><span class="lineno">  430</span>                var oandaAssetResponse = <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#aa614614518048e1244ae357de18425df">GetOandaInstrumentPriceUSD</a>(x.AssetCode);</div>
<div class="line"><span class="lineno">  431</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;latest data from oanda feed for {x.AssetCode}&quot;</span>, oandaAssetResponse);</div>
<div class="line"><span class="lineno">  432</span>                <span class="keywordflow">if</span> (oandaAssetResponse == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  433</span>                {</div>
<div class="line"><span class="lineno">  434</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;response from oanda via internalapi for asset {x.AssetCode} is null&quot;</span>);</div>
<div class="line"><span class="lineno">  435</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  436</span>                }</div>
<div class="line"><span class="lineno">  437</span>                <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  438</span>                {</div>
<div class="line"><span class="lineno">  439</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  440</span>                    {</div>
<div class="line"><span class="lineno">  441</span>                        <span class="comment">//check feed time variation</span></div>
<div class="line"><span class="lineno">  442</span>                        var feedTime = Convert.ToDateTime(oandaAssetResponse.prices?.FirstOrDefault()?.time).ToLocalTime();</div>
<div class="line"><span class="lineno">  443</span>                        <span class="keywordflow">if</span> ((pullTime - feedTime).TotalMinutes &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#ab263694d641e1015ecc390a0f685d585">TimeDifferenceThresholdMinutes</a>)</div>
<div class="line"><span class="lineno">  444</span>                        {</div>
<div class="line"><span class="lineno">  445</span>                            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;time variation beyond threshold for oanda feed data for asset {x.AssetCode}&quot;</span>, oandaAssetResponse);</div>
<div class="line"><span class="lineno">  446</span>                        }</div>
<div class="line"><span class="lineno">  447</span>                    }</div>
<div class="line"><span class="lineno">  448</span>                    <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  449</span>                    {</div>
<div class="line"><span class="lineno">  450</span>                        <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;exception checking feed time from oanda feed response for asset {x.AssetCode}&quot;</span>, oandaAssetResponse, ex);</div>
<div class="line"><span class="lineno">  451</span>                    }</div>
<div class="line"><span class="lineno">  452</span>                    <span class="comment">//try first ask</span></div>
<div class="line"><span class="lineno">  453</span>                    <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(oandaAssetResponse?.prices?.FirstOrDefault()?.asks?.OrderBy(ask =&gt; ask.price).FirstOrDefault()?.price ?? <span class="stringliteral">&quot;0&quot;</span>, out spot) || spot == 0)</div>
<div class="line"><span class="lineno">  454</span>                    {</div>
<div class="line"><span class="lineno">  455</span>                        <span class="comment">//try closeoutask</span></div>
<div class="line"><span class="lineno">  456</span>                        <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(oandaAssetResponse?.prices?.FirstOrDefault()?.closeoutAsk ?? <span class="stringliteral">&quot;0&quot;</span>, out spot) || spot == 0)</div>
<div class="line"><span class="lineno">  457</span>                        {</div>
<div class="line"><span class="lineno">  458</span>                            <span class="comment">//try first bid</span></div>
<div class="line"><span class="lineno">  459</span>                            <span class="keywordflow">if</span> (!<span class="keywordtype">double</span>.TryParse(oandaAssetResponse?.prices?.FirstOrDefault()?.bids?.OrderByDescending(bid =&gt; bid.price).FirstOrDefault()?.price ?? <span class="stringliteral">&quot;0&quot;</span>, out spot) || spot == 0)</div>
<div class="line"><span class="lineno">  460</span>                            {</div>
<div class="line"><span class="lineno">  461</span>                                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;unable to find suitable price in oanda feed for {x.AssetCode}&quot;</span>, oandaAssetResponse);</div>
<div class="line"><span class="lineno">  462</span>                            }</div>
<div class="line"><span class="lineno">  463</span>                        }</div>
<div class="line"><span class="lineno">  464</span>                    }</div>
<div class="line"><span class="lineno">  465</span>                }</div>
<div class="line"><span class="lineno">  466</span>                <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  467</span>                {</div>
<div class="line"><span class="lineno">  468</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;exception getting spot from oanda feed for {x.AssetCode}&quot;</span>, oandaAssetResponse, ex);</div>
<div class="line"><span class="lineno">  469</span>                }</div>
<div class="line"><span class="lineno">  470</span>                <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>()</div>
<div class="line"><span class="lineno">  471</span>                {</div>
<div class="line"><span class="lineno">  472</span>                    AssetCode = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a>,</div>
<div class="line"><span class="lineno">  473</span>                    PairCode = <span class="stringliteral">&quot;USD&quot;</span>,</div>
<div class="line"><span class="lineno">  474</span>                    Per = x.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span> ? <span class="stringliteral">&quot;$&quot;</span> : <span class="stringliteral">&quot;oz&quot;</span>,</div>
<div class="line"><span class="lineno">  475</span>                    Source = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5dfa2605f71620cafd59a7159f2c3488">OandaSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings.html#af22b7fd07aa26d2b2fd4d28c4179f83b">SourceName</a>,</div>
<div class="line"><span class="lineno">  476</span>                    PullTime = pullTime,</div>
<div class="line"><span class="lineno">  477</span>                    Spot = spot</div>
<div class="line"><span class="lineno">  478</span>                };</div>
<div class="line"><span class="lineno">  479</span>                spotList.Add(bs);</div>
<div class="line"><span class="lineno">  480</span>            }</div>
<div class="line"><span class="lineno">  481</span>        }</div>
<div class="line"><span class="lineno">  482</span>        <span class="keywordflow">return</span> spotList;</div>
<div class="line"><span class="lineno">  483</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings_html_ab542487a4c6f5b4e9e39d2d63b70bf14"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings.html#ab542487a4c6f5b4e9e39d2d63b70bf14">TaskAPI.Helpers.Settings.TaskAPISettings.Oandasettings.Assets</a></div><div class="ttdeci">Asset[] Assets</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:76</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings_html_af22b7fd07aa26d2b2fd4d28c4179f83b"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_oandasettings.html#af22b7fd07aa26d2b2fd4d28c4179f83b">TaskAPI.Helpers.Settings.TaskAPISettings.Oandasettings.SourceName</a></div><div class="ttdeci">string SourceName</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:75</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_a5dfa2605f71620cafd59a7159f2c3488"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#a5dfa2605f71620cafd59a7159f2c3488">TaskAPI.Helpers.Settings.TaskAPISettings.OandaSettings</a></div><div class="ttdeci">Oandasettings OandaSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:10</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a0fd06a80c097c9b6fcd5ddd8b1889c18_cgraph.svg" width="100%" height="510"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a0fd06a80c097c9b6fcd5ddd8b1889c18_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2ad64affbfeec15e4217d8bfccd982ff" name="a2ad64affbfeec15e4217d8bfccd982ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ad64affbfeec15e4217d8bfccd982ff">&#9670;&#160;</a></span>PullPolygonOracleData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; TaskAPI.Helpers.SpotHelper.PullPolygonOracleData </td>
          <td>(</td>
          <td class="paramtype">DateTime</td>          <td class="paramname"><span class="paramname"><em>pullTime</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pulls spot data from Polygon Oracle for each specified asset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pullTime</td><td>The date and time at which the data is pulled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of BaseSpot objects containing spot data from Polygon Oracle. </dd></dl>
<p>This method iterates through each asset specified in the Polygon Oracle settings.</p>
<p>If the market is open, it retrieves the latest round data from Polygon Oracle for the asset.</p>
<p>The retrieved data includes the asset's spot value and pair code.</p>
<p>If the market is closed or no data is available, it creates a dummy BaseSpot object with a spot value of 0.</p>
<p>The spot value is converted to the appropriate unit of measurement based on the asset code.</p>
<p>Each BaseSpot object is assigned the source name from the Polygon Oracle settings and the pull time.</p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>    {</div>
<div class="line"><span class="lineno">  278</span>        List&lt;BaseSpot&gt; spotList = <span class="keyword">new</span> List&lt;BaseSpot&gt;();</div>
<div class="line"><span class="lineno">  279</span>        <span class="keywordflow">foreach</span> (var x <span class="keywordflow">in</span> <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#acd65b4bef8f036a74d81ec16546914ac">Assets</a>)</div>
<div class="line"><span class="lineno">  280</span>        {</div>
<div class="line"><span class="lineno">  281</span>            <span class="keywordtype">double</span> spot = 0;</div>
<div class="line"><span class="lineno">  282</span>            <span class="keywordtype">string</span> pairCode = <span class="stringliteral">&quot;USD&quot;</span>;</div>
<div class="line"><span class="lineno">  283</span>            <span class="comment">//if market open, pull data and create basespot with live data, otherwise create dummy basespot with 0</span></div>
<div class="line"><span class="lineno">  284</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="#a89a665897ed47f9b7065ce771100b83c">CanSync</a>())</div>
<div class="line"><span class="lineno">  285</span>            {</div>
<div class="line"><span class="lineno">  286</span>                <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html">LatestRoundDataResponse</a> latestRoundResponse = <a class="code hl_variable" href="#ac6e63479696a9f01dc08d8bcf7fe6038">_alchemyService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html#a8db06c3be654656ef61b3177a0624787">LatestRoundData</a>(x.Contract);</div>
<div class="line"><span class="lineno">  287</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;latest round data from polygon oracle for {x.AssetCode}&quot;</span>, latestRoundResponse);</div>
<div class="line"><span class="lineno">  288</span>                <span class="keywordflow">if</span> (latestRoundResponse == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  289</span>                {</div>
<div class="line"><span class="lineno">  290</span>                    <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;response from polygon oracle service is null&quot;</span>);</div>
<div class="line"><span class="lineno">  291</span>                }</div>
<div class="line"><span class="lineno">  292</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  293</span>                {</div>
<div class="line"><span class="lineno">  294</span>                    <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  295</span>                    {</div>
<div class="line"><span class="lineno">  296</span>                        <span class="comment">//check feed time variation</span></div>
<div class="line"><span class="lineno">  297</span>                        var feedTime = DateTimeOffset.FromUnixTimeSeconds(<span class="keywordtype">long</span>.Parse(latestRoundResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html#a7db191933c35e3102a10675915da067b">updatedAt</a>.ToString())).UtcDateTime.ToLocalTime();</div>
<div class="line"><span class="lineno">  298</span>                        <span class="keywordflow">if</span> ((pullTime - feedTime).TotalMinutes &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#ab263694d641e1015ecc390a0f685d585">TimeDifferenceThresholdMinutes</a>)</div>
<div class="line"><span class="lineno">  299</span>                        {</div>
<div class="line"><span class="lineno">  300</span>                            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;polygon oracle time variation is above threshold&quot;</span>);</div>
<div class="line"><span class="lineno">  301</span>                        }</div>
<div class="line"><span class="lineno">  302</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  303</span>                        {</div>
<div class="line"><span class="lineno">  304</span>                            spot = Convert.ToDouble(latestRoundResponse.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html#a8fe6a5db07c172b21544944fb620cbaa">answer</a>.ToString()) / Math.Pow(10, <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a4f533d1a75a099c6f314b5b176b3c468">ContractDecimals</a>);</div>
<div class="line"><span class="lineno">  305</span>                        }</div>
<div class="line"><span class="lineno">  306</span>                    }</div>
<div class="line"><span class="lineno">  307</span>                    <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  308</span>                    {</div>
<div class="line"><span class="lineno">  309</span>                        <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a78c9df658858fa3099eed69421423898">LogException</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;exception reading values from polygon oracle response&quot;</span>, ex);</div>
<div class="line"><span class="lineno">  310</span>                    }</div>
<div class="line"><span class="lineno">  311</span>                }</div>
<div class="line"><span class="lineno">  312</span>            }</div>
<div class="line"><span class="lineno">  313</span>            <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a>()</div>
<div class="line"><span class="lineno">  314</span>            {</div>
<div class="line"><span class="lineno">  315</span>                AssetCode = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a>,</div>
<div class="line"><span class="lineno">  316</span>                PairCode = pairCode,</div>
<div class="line"><span class="lineno">  317</span>                Per = x.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span> ? <span class="stringliteral">&quot;$&quot;</span> : <span class="stringliteral">&quot;oz&quot;</span>,</div>
<div class="line"><span class="lineno">  318</span>                Source = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>,</div>
<div class="line"><span class="lineno">  319</span>                PullTime = pullTime,</div>
<div class="line"><span class="lineno">  320</span>                Spot = spot</div>
<div class="line"><span class="lineno">  321</span>            };</div>
<div class="line"><span class="lineno">  322</span>            spotList.Add(bs);</div>
<div class="line"><span class="lineno">  323</span>        }</div>
<div class="line"><span class="lineno">  324</span>        <span class="keywordflow">return</span> spotList;</div>
<div class="line"><span class="lineno">  325</span>        <span class="comment">//DEBUG</span></div>
<div class="line"><span class="lineno">  326</span>        <span class="comment">//spotList.First(x =&gt; x.AssetCode == &quot;AUD&quot;).Spot = 0;</span></div>
<div class="line"><span class="lineno">  327</span>        <span class="comment">//return spotList;</span></div>
<div class="line"><span class="lineno">  328</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings_html_a4f533d1a75a099c6f314b5b176b3c468"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a4f533d1a75a099c6f314b5b176b3c468">TaskAPI.Helpers.Settings.TaskAPISettings.Polygonoraclesettings.ContractDecimals</a></div><div class="ttdeci">int ContractDecimals</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:88</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings_html_a9cce11d1062ce85664de5bf6bb1da49e"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">TaskAPI.Helpers.Settings.TaskAPISettings.Polygonoraclesettings.SourceName</a></div><div class="ttdeci">string SourceName</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:87</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings_html_acd65b4bef8f036a74d81ec16546914ac"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#acd65b4bef8f036a74d81ec16546914ac">TaskAPI.Helpers.Settings.TaskAPISettings.Polygonoraclesettings.Assets</a></div><div class="ttdeci">Asset[] Assets</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:89</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_ac56f44c706202b85f9a949eefd802a4b"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">TaskAPI.Helpers.Settings.TaskAPISettings.PolygonOracleSettings</a></div><div class="ttdeci">Polygonoraclesettings PolygonOracleSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:12</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html">TaskAPI.Models.DTO.PolygonOracle.LatestRoundDataResponse</a></div><div class="ttdef"><b>Definition</b> LatestRoundDataResponse.cs:12</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response_html_a7db191933c35e3102a10675915da067b"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html#a7db191933c35e3102a10675915da067b">TaskAPI.Models.DTO.PolygonOracle.LatestRoundDataResponse.updatedAt</a></div><div class="ttdeci">System.Numerics.BigInteger updatedAt</div><div class="ttdef"><b>Definition</b> LatestRoundDataResponse.cs:24</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response_html_a8fe6a5db07c172b21544944fb620cbaa"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_polygon_oracle_1_1_latest_round_data_response.html#a8fe6a5db07c172b21544944fb620cbaa">TaskAPI.Models.DTO.PolygonOracle.LatestRoundDataResponse.answer</a></div><div class="ttdeci">System.Numerics.BigInteger answer</div><div class="ttdef"><b>Definition</b> LatestRoundDataResponse.cs:18</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_alchemy_service_html_a8db06c3be654656ef61b3177a0624787"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html#a8db06c3be654656ef61b3177a0624787">TaskAPI.Services.AlchemyService.LatestRoundData</a></div><div class="ttdeci">LatestRoundDataResponse? LatestRoundData(string contractAddress)</div><div class="ttdoc">Retrieves the latest round data for a given smart contract address using the Alchemy API.</div><div class="ttdef"><b>Definition</b> AlchemyService.cs:45</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a2ad64affbfeec15e4217d8bfccd982ff_cgraph.svg" width="100%" height="519"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a2ad64affbfeec15e4217d8bfccd982ff_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a7b75f44b3310036d4de7f0f2956bbac1" name="a7b75f44b3310036d4de7f0f2956bbac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b75f44b3310036d4de7f0f2956bbac1">&#9670;&#160;</a></span>PullSaveTrim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt; <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> &gt; TaskAPI.Helpers.SpotHelper.PullSaveTrim </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pulls, saves, and trims spot data from various sources. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of BaseSpot objects representing spot data after processing. </dd></dl>
<p>This method pulls spot data from multiple sources including forex, Polygon Oracle, Oanda, and Binance.</p>
<p>It groups spot data by asset code and removes redundant entries with zero values.</p>
<p>If necessary, it retrieves the latest AUD price and BTC/AUD exchange rate for currency conversion.</p>
<p>USD values are converted to AUD except for AUD itself, and BTC values are converted to AUD using the BTC/AUD exchange rate.</p>
<p>It compares metal duplicates against threshold percentages and logs any variations beyond the thresholds.</p>
<p>Redundant/duplicate assets are removed, selecting either the preferred source or the highest price.</p>
<p>Finally, it generates special data, adds the processed spot data to the database, trims the spot data, and returns the final list.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>    {        </div>
<div class="line"><span class="lineno">   87</span>        List&lt;BaseSpot&gt; finalSpotList = <span class="keyword">new</span> List&lt;BaseSpot&gt;();</div>
<div class="line"><span class="lineno">   88</span>        var pullTime = DateTime.Now;</div>
<div class="line"><span class="lineno">   89</span>        var forexData = <a class="code hl_function" href="#a51135865d712678dee52479c109a61fb">PullForexData</a>(pullTime);</div>
<div class="line"><span class="lineno">   90</span>        var polygonOracleData = <a class="code hl_function" href="#a2ad64affbfeec15e4217d8bfccd982ff">PullPolygonOracleData</a>(pullTime);</div>
<div class="line"><span class="lineno">   91</span>        var oandaData = <a class="code hl_function" href="#a0fd06a80c097c9b6fcd5ddd8b1889c18">PullOandaData</a>(pullTime);</div>
<div class="line"><span class="lineno">   92</span>        var binanceData = <a class="code hl_function" href="#a701fc9c0beaecff83beb2c806b8581d5">PullBinanceData</a>(pullTime);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        finalSpotList.AddRange(polygonOracleData);</div>
<div class="line"><span class="lineno">   95</span>        finalSpotList.AddRange(forexData);</div>
<div class="line"><span class="lineno">   96</span>        finalSpotList.AddRange(oandaData);</div>
<div class="line"><span class="lineno">   97</span>        finalSpotList.AddRange(binanceData);</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>        <span class="comment">//group by assetcode, take only groups &gt; 0 count</span></div>
<div class="line"><span class="lineno">  100</span>        var assetGroups = finalSpotList.GroupBy(bs =&gt; bs.AssetCode).Where(grp =&gt; grp.Count() &gt; 1);</div>
<div class="line"><span class="lineno">  101</span>        <span class="keywordflow">foreach</span> (var grp <span class="keywordflow">in</span> assetGroups)</div>
<div class="line"><span class="lineno">  102</span>        {</div>
<div class="line"><span class="lineno">  103</span>            <span class="keywordflow">if</span> (grp.Any(bs =&gt; bs.Spot == 0) &amp;&amp; !grp.All(bs =&gt; bs.Spot == 0))</div>
<div class="line"><span class="lineno">  104</span>            {</div>
<div class="line"><span class="lineno">  105</span>                <span class="comment">//group has some 0&#39;s but not all - remove 0&#39;s</span></div>
<div class="line"><span class="lineno">  106</span>                <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> grp.Where(bs =&gt; bs.Spot == 0))</div>
<div class="line"><span class="lineno">  107</span>                {</div>
<div class="line"><span class="lineno">  108</span>                    finalSpotList.Remove(bs);</div>
<div class="line"><span class="lineno">  109</span>                }</div>
<div class="line"><span class="lineno">  110</span>            }</div>
<div class="line"><span class="lineno">  111</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!grp.All(bs =&gt; bs.Spot == 0))</div>
<div class="line"><span class="lineno">  112</span>            {</div>
<div class="line"><span class="lineno">  113</span>                <span class="comment">//group has all 0&#39;s - remove all but one for placeholder</span></div>
<div class="line"><span class="lineno">  114</span>                <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> grp.Where(bs =&gt; bs.Spot == 0).Take(grp.Count() - 1))</div>
<div class="line"><span class="lineno">  115</span>                {</div>
<div class="line"><span class="lineno">  116</span>                    finalSpotList.Remove(bs);</div>
<div class="line"><span class="lineno">  117</span>                }</div>
<div class="line"><span class="lineno">  118</span>            }</div>
<div class="line"><span class="lineno">  119</span>        }</div>
<div class="line"><span class="lineno">  120</span> </div>
<div class="line"><span class="lineno">  121</span>        <span class="keywordflow">foreach</span> (<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a> bs <span class="keywordflow">in</span> finalSpotList.Where(bs =&gt; bs.Spot == 0))</div>
<div class="line"><span class="lineno">  122</span>        {</div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_function" href="#a95400211c9214b34c8427e09776449a9">RecyclePreviousSpot</a>(bs);</div>
<div class="line"><span class="lineno">  124</span>        }</div>
<div class="line"><span class="lineno">  125</span> </div>
<div class="line"><span class="lineno">  126</span>        <span class="comment">//convert all usd and btc to aud excluding aud itself </span></div>
<div class="line"><span class="lineno">  127</span>        <span class="keywordtype">double</span> audusd = Convert.ToDouble(finalSpotList.FirstOrDefault(bs =&gt; bs.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span> &amp;&amp; bs.Source == <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>)?.Spot);</div>
<div class="line"><span class="lineno">  128</span>        <span class="keywordflow">if</span> (audusd == 0)</div>
<div class="line"><span class="lineno">  129</span>        {</div>
<div class="line"><span class="lineno">  130</span>            var fallbackAUD = finalSpotList.FirstOrDefault(bs =&gt; bs.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span>);</div>
<div class="line"><span class="lineno">  131</span>            audusd = Convert.ToDouble(fallbackAUD?.Spot);</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">if</span>(fallbackAUD == <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  133</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;polygon oracle AUD unavailable, NO FALLBACK SOURCE AVAILABLE, price ${audusd}&quot;</span>);</div>
<div class="line"><span class="lineno">  134</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  135</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a5c2a67dbd8beb6f821c46b8d052d59ea">LogInformation</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;polygon oracle AUD unavailable, falling back to {fallbackAUD.Source }, price ${audusd}&quot;</span>);</div>
<div class="line"><span class="lineno">  136</span>        }</div>
<div class="line"><span class="lineno">  137</span>        <span class="keywordtype">double</span> btcaud = Convert.ToDouble(finalSpotList.FirstOrDefault(bs =&gt; bs.AssetCode == <span class="stringliteral">&quot;BTC&quot;</span> &amp;&amp; bs.PairCode == <span class="stringliteral">&quot;AUD&quot;</span>)?.Spot);</div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">if</span> (btcaud == 0 &amp;&amp; audusd &gt; 0)</div>
<div class="line"><span class="lineno">  139</span>        {</div>
<div class="line"><span class="lineno">  140</span>            <span class="keywordtype">double</span> btcusd = Convert.ToDouble(finalSpotList.FirstOrDefault(bs =&gt; bs.AssetCode == <span class="stringliteral">&quot;BTC&quot;</span> &amp;&amp; bs.PairCode == <span class="stringliteral">&quot;USD&quot;</span>)?.Spot);</div>
<div class="line"><span class="lineno">  141</span>            btcaud = btcusd / audusd;</div>
<div class="line"><span class="lineno">  142</span>            <span class="comment">//comment out while using USD as default market</span></div>
<div class="line"><span class="lineno">  143</span>            <span class="comment">//_logService.LogError(LogService.LogSources.SpotHelper, $&quot;binance feed BTCAUD unavailable, falling back to BTCUSD&quot;);</span></div>
<div class="line"><span class="lineno">  144</span>        }</div>
<div class="line"><span class="lineno">  145</span>        <span class="keywordflow">if</span> (audusd &gt; 0)</div>
<div class="line"><span class="lineno">  146</span>        {</div>
<div class="line"><span class="lineno">  147</span>            <span class="comment">//convert usd values to aud except audusd</span></div>
<div class="line"><span class="lineno">  148</span>            <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> finalSpotList.Where(bs =&gt; bs.PairCode == <span class="stringliteral">&quot;USD&quot;</span> &amp;&amp; !(bs.AssetCode == <span class="stringliteral">&quot;AUD&quot;</span>)))</div>
<div class="line"><span class="lineno">  149</span>            {</div>
<div class="line"><span class="lineno">  150</span>                bs.Spot = bs.Spot / audusd;</div>
<div class="line"><span class="lineno">  151</span>                bs.PairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  152</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;converted {bs.AssetCode} from USD to AUD&quot;</span>);</div>
<div class="line"><span class="lineno">  153</span>            }</div>
<div class="line"><span class="lineno">  154</span>        }</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  156</span>        {</div>
<div class="line"><span class="lineno">  157</span>            <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#aeffeb1d3d59aeeab65dfe72691d21600">SendEmail</a>(<span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_email_post.html">EmailPost</a>()</div>
<div class="line"><span class="lineno">  158</span>            {</div>
<div class="line"><span class="lineno">  159</span>                EmailFrom = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#af39dc0933cd608b26e7bc4f82951d356">GeneralSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#ac0a0b89d2e7cf7f820e5663a1a4cffbf">NotificationEmailFrom</a>,</div>
<div class="line"><span class="lineno">  160</span>                EmailTo = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#af39dc0933cd608b26e7bc4f82951d356">GeneralSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#a25434a5471214771ae507f7152073898">NotificationEmailTo</a>,</div>
<div class="line"><span class="lineno">  161</span>                NameFrom = <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#af39dc0933cd608b26e7bc4f82951d356">GeneralSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#a082a8e92b97a7d83196f1d0056241042">NotificationEmailName</a>,</div>
<div class="line"><span class="lineno">  162</span>                Subject = <span class="stringliteral">&quot;Error getting AUD from price feeds&quot;</span>,</div>
<div class="line"><span class="lineno">  163</span>                HTMLBody = $<span class="stringliteral">&quot;Task API was unable to find the AUD price in this round&quot;</span></div>
<div class="line"><span class="lineno">  164</span>            });</div>
<div class="line"><span class="lineno">  165</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;AUD not found, unable to convert USD and BTC values&quot;</span>);</div>
<div class="line"><span class="lineno">  166</span>        }</div>
<div class="line"><span class="lineno">  167</span>        <span class="keywordflow">if</span> (btcaud &gt; 0)</div>
<div class="line"><span class="lineno">  168</span>        {</div>
<div class="line"><span class="lineno">  169</span>            <span class="comment">//convert btc values to aud</span></div>
<div class="line"><span class="lineno">  170</span>            <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> finalSpotList.Where(bs =&gt; bs.PairCode == <span class="stringliteral">&quot;BTC&quot;</span>))</div>
<div class="line"><span class="lineno">  171</span>            {</div>
<div class="line"><span class="lineno">  172</span>                bs.Spot = bs.Spot * btcaud;</div>
<div class="line"><span class="lineno">  173</span>                bs.PairCode = <span class="stringliteral">&quot;AUD&quot;</span>;</div>
<div class="line"><span class="lineno">  174</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;converted {bs.AssetCode} from BTC to AUD&quot;</span>);</div>
<div class="line"><span class="lineno">  175</span>            }</div>
<div class="line"><span class="lineno">  176</span>        }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>        <span class="comment">//compare metal duplcates against thresholds</span></div>
<div class="line"><span class="lineno">  179</span>        var compareGroups = finalSpotList.GroupBy(bs =&gt; bs.AssetCode).Where(grp =&gt; grp.Count() &gt; 1);</div>
<div class="line"><span class="lineno">  180</span>        <span class="comment">//XAU</span></div>
<div class="line"><span class="lineno">  181</span>        var grpXAU = compareGroups.FirstOrDefault(grp =&gt; grp.Key ==<span class="stringliteral">&quot;XAU&quot;</span>);</div>
<div class="line"><span class="lineno">  182</span>        <span class="keywordflow">if</span> (grpXAU != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  183</span>        {</div>
<div class="line"><span class="lineno">  184</span>            var variations = <span class="keyword">new</span> List&lt;(string description, double variation)&gt;();</div>
<div class="line"><span class="lineno">  185</span>            <span class="comment">//primary value to compare all others against should be polygon oracle, otherwise choose first</span></div>
<div class="line"><span class="lineno">  186</span>            <span class="keywordtype">double</span>? primaryValue = grpXAU.FirstOrDefault(bs =&gt; bs.Source==<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>)?.Spot ??</div>
<div class="line"><span class="lineno">  187</span>                grpXAU.FirstOrDefault()?.Spot;</div>
<div class="line"><span class="lineno">  188</span>            <span class="keywordflow">if</span> (primaryValue != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  189</span>            {</div>
<div class="line"><span class="lineno">  190</span>                <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> grpXAU)</div>
<div class="line"><span class="lineno">  191</span>                {</div>
<div class="line"><span class="lineno">  192</span>                    <span class="comment">//% difference calculation</span></div>
<div class="line"><span class="lineno">  193</span>                    variations.Add(($<span class="stringliteral">&quot;AssetCode: {bs.AssetCode} Source: {bs.Source} Primary Value: {primaryValue.ToString()} Comparison Value: {bs.Spot}&quot;</span>, ((<span class="keywordtype">double</span>)primaryValue - bs.Spot) / (((<span class="keywordtype">double</span>)primaryValue + bs.Spot) / 2) * 100));</div>
<div class="line"><span class="lineno">  194</span>                }</div>
<div class="line"><span class="lineno">  195</span>            }</div>
<div class="line"><span class="lineno">  196</span>            <span class="keywordflow">if</span> (variations.Any(var =&gt; var.variation &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abce48cfdd32d7c339d09d27193deb7c4">XAUFeedVariationThresholdPercent</a> || var.variation &lt; -<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abce48cfdd32d7c339d09d27193deb7c4">XAUFeedVariationThresholdPercent</a>))</div>
<div class="line"><span class="lineno">  197</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;XAU feeds are outside variation threshold&quot;</span>, variations);</div>
<div class="line"><span class="lineno">  198</span>        }</div>
<div class="line"><span class="lineno">  199</span>        <span class="comment">//XAG</span></div>
<div class="line"><span class="lineno">  200</span>        var grpXAG = compareGroups.FirstOrDefault(grp =&gt; grp.Key == <span class="stringliteral">&quot;XAG&quot;</span>);</div>
<div class="line"><span class="lineno">  201</span>        <span class="keywordflow">if</span> (grpXAG != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  202</span>        {</div>
<div class="line"><span class="lineno">  203</span>            var variations = <span class="keyword">new</span> List&lt;(string description, double variation)&gt;();</div>
<div class="line"><span class="lineno">  204</span>            <span class="comment">//primary value to compare all others against should be polygon oracle, otherwise choose first</span></div>
<div class="line"><span class="lineno">  205</span>            <span class="keywordtype">double</span>? primaryValue = grpXAG.FirstOrDefault(bs =&gt; bs.Source == <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>)?.Spot ??</div>
<div class="line"><span class="lineno">  206</span>                grpXAG.FirstOrDefault()?.Spot;</div>
<div class="line"><span class="lineno">  207</span>            <span class="keywordflow">if</span> (primaryValue != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  208</span>            {</div>
<div class="line"><span class="lineno">  209</span>                <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> grpXAG)</div>
<div class="line"><span class="lineno">  210</span>                {</div>
<div class="line"><span class="lineno">  211</span>                    <span class="comment">//% difference calculation</span></div>
<div class="line"><span class="lineno">  212</span>                    variations.Add(($<span class="stringliteral">&quot;AssetCode: {bs.AssetCode} Source: {bs.Source} Primary Value: {primaryValue.ToString()} Comparison Value: {bs.Spot}&quot;</span>, ((<span class="keywordtype">double</span>)primaryValue - bs.Spot) / (((<span class="keywordtype">double</span>)primaryValue + bs.Spot) / 2) * 100));</div>
<div class="line"><span class="lineno">  213</span>                }</div>
<div class="line"><span class="lineno">  214</span>            }</div>
<div class="line"><span class="lineno">  215</span>            <span class="keywordflow">if</span> (variations.Any(var =&gt; var.variation &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#acf22a3188f3d0473175cbd5ac65dd2b9">XAGFeedVariationThresholdPercent</a> || var.variation &lt; -<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#acf22a3188f3d0473175cbd5ac65dd2b9">XAGFeedVariationThresholdPercent</a>))</div>
<div class="line"><span class="lineno">  216</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;XAG feeds are outside variation threshold&quot;</span>, variations);</div>
<div class="line"><span class="lineno">  217</span>        }</div>
<div class="line"><span class="lineno">  218</span>        <span class="comment">//AUD</span></div>
<div class="line"><span class="lineno">  219</span>        var grpAUD = compareGroups.FirstOrDefault(grp =&gt; grp.Key == <span class="stringliteral">&quot;AUD&quot;</span>);</div>
<div class="line"><span class="lineno">  220</span>        <span class="keywordflow">if</span> (grpAUD != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  221</span>        {</div>
<div class="line"><span class="lineno">  222</span>            var variations = <span class="keyword">new</span> List&lt;(string description, double variation)&gt;();</div>
<div class="line"><span class="lineno">  223</span>            <span class="comment">//primary value to compare all others against should be polygon oracle, otherwise choose first</span></div>
<div class="line"><span class="lineno">  224</span>            <span class="keywordtype">double</span>? primaryValue = grpAUD.FirstOrDefault(bs =&gt; bs.Source == <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>)?.Spot ??</div>
<div class="line"><span class="lineno">  225</span>                grpAUD.FirstOrDefault()?.Spot;</div>
<div class="line"><span class="lineno">  226</span>            <span class="keywordflow">if</span> (primaryValue != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  227</span>            {</div>
<div class="line"><span class="lineno">  228</span>                <span class="keywordflow">foreach</span> (var bs <span class="keywordflow">in</span> grpAUD)</div>
<div class="line"><span class="lineno">  229</span>                {</div>
<div class="line"><span class="lineno">  230</span>                    <span class="comment">//% difference calculation</span></div>
<div class="line"><span class="lineno">  231</span>                    variations.Add(($<span class="stringliteral">&quot;AssetCode: {bs.AssetCode} Source: {bs.Source} Primary Value: {primaryValue.ToString()} Comparison Value: {bs.Spot}&quot;</span>, ((<span class="keywordtype">double</span>)primaryValue - bs.Spot) / (((<span class="keywordtype">double</span>)primaryValue + bs.Spot) / 2) * 100));</div>
<div class="line"><span class="lineno">  232</span>                }</div>
<div class="line"><span class="lineno">  233</span>            }</div>
<div class="line"><span class="lineno">  234</span>            <span class="keywordflow">if</span> (variations.Any(var =&gt; var.variation &gt; <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abe038aab4e92b88aab47caf734aa8a3e">AUDFeedVariationThresholdPercent</a> || var.variation &lt; -<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abe038aab4e92b88aab47caf734aa8a3e">AUDFeedVariationThresholdPercent</a>))</div>
<div class="line"><span class="lineno">  235</span>                <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;AUD feeds are outside variation threshold&quot;</span>, variations);</div>
<div class="line"><span class="lineno">  236</span>        }</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>        <span class="comment">//remove redundant/duplicate assets selecting preferred source or highest price</span></div>
<div class="line"><span class="lineno">  239</span>        <span class="keywordflow">foreach</span> (var grp <span class="keywordflow">in</span> compareGroups)</div>
<div class="line"><span class="lineno">  240</span>        {</div>
<div class="line"><span class="lineno">  241</span>            <span class="comment">//polygon oracle is preferred source</span></div>
<div class="line"><span class="lineno">  242</span>            <span class="keywordflow">if</span> (grp.Any(bs =&gt; bs.Source == <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>))</div>
<div class="line"><span class="lineno">  243</span>            {</div>
<div class="line"><span class="lineno">  244</span>                <span class="comment">//group has preferred source - remove others</span></div>
<div class="line"><span class="lineno">  245</span>                finalSpotList = finalSpotList.Except(grp.Where(bs =&gt; bs.Source != <a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#ac56f44c706202b85f9a949eefd802a4b">PolygonOracleSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_polygonoraclesettings.html#a9cce11d1062ce85664de5bf6bb1da49e">SourceName</a>)).ToList();</div>
<div class="line"><span class="lineno">  246</span>            }</div>
<div class="line"><span class="lineno">  247</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  248</span>            {</div>
<div class="line"><span class="lineno">  249</span>                <span class="comment">//group has no preferred source - remove all but most expensive</span></div>
<div class="line"><span class="lineno">  250</span>                finalSpotList = finalSpotList.Except(grp.Where(bs =&gt; bs != grp.OrderByDescending(bs =&gt; bs.Spot).First())).ToList();</div>
<div class="line"><span class="lineno">  251</span>            }</div>
<div class="line"><span class="lineno">  252</span>        }</div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>        <a class="code hl_function" href="#a2d5da5f529f7ec58c18cefb373466d99">GenerateSpecialData</a>(pullTime, finalSpotList);</div>
<div class="line"><span class="lineno">  255</span>        <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a5e7d6eb59fabb7c28af0d9a97551a83d">BaseSpots</a>.AddRange(finalSpotList);</div>
<div class="line"><span class="lineno">  256</span>        <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.SaveChanges();</div>
<div class="line"><span class="lineno">  257</span>        <a class="code hl_function" href="#adeeda07d908e3644d9ba13213077d205">TrimSpotData</a>();</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">return</span> finalSpotList;</div>
<div class="line"><span class="lineno">  259</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_contexts_1_1_priceapp_context_html_a5e7d6eb59fabb7c28af0d9a97551a83d"><div class="ttname"><a href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a5e7d6eb59fabb7c28af0d9a97551a83d">TaskAPI.Contexts.PriceappContext.BaseSpots</a></div><div class="ttdeci">virtual DbSet&lt; BaseSpot &gt; BaseSpots</div><div class="ttdef"><b>Definition</b> PriceappContext.cs:39</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_html_a082a8e92b97a7d83196f1d0056241042"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#a082a8e92b97a7d83196f1d0056241042">TaskAPI.Helpers.Settings.TaskAPISettings.Generalsettings.NotificationEmailName</a></div><div class="ttdeci">string NotificationEmailName</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:18</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_html_a25434a5471214771ae507f7152073898"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#a25434a5471214771ae507f7152073898">TaskAPI.Helpers.Settings.TaskAPISettings.Generalsettings.NotificationEmailTo</a></div><div class="ttdeci">string NotificationEmailTo</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:20</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings_html_ac0a0b89d2e7cf7f820e5663a1a4cffbf"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_generalsettings.html#ac0a0b89d2e7cf7f820e5663a1a4cffbf">TaskAPI.Helpers.Settings.TaskAPISettings.Generalsettings.NotificationEmailFrom</a></div><div class="ttdeci">string NotificationEmailFrom</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:19</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings_html_abce48cfdd32d7c339d09d27193deb7c4"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abce48cfdd32d7c339d09d27193deb7c4">TaskAPI.Helpers.Settings.TaskAPISettings.Spotfeedsettings.XAUFeedVariationThresholdPercent</a></div><div class="ttdeci">float XAUFeedVariationThresholdPercent</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:31</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings_html_abe038aab4e92b88aab47caf734aa8a3e"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abe038aab4e92b88aab47caf734aa8a3e">TaskAPI.Helpers.Settings.TaskAPISettings.Spotfeedsettings.AUDFeedVariationThresholdPercent</a></div><div class="ttdeci">float AUDFeedVariationThresholdPercent</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:33</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings_html_acf22a3188f3d0473175cbd5ac65dd2b9"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#acf22a3188f3d0473175cbd5ac65dd2b9">TaskAPI.Helpers.Settings.TaskAPISettings.Spotfeedsettings.XAGFeedVariationThresholdPercent</a></div><div class="ttdeci">float XAGFeedVariationThresholdPercent</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:32</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_html_af39dc0933cd608b26e7bc4f82951d356"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#af39dc0933cd608b26e7bc4f82951d356">TaskAPI.Helpers.Settings.TaskAPISettings.GeneralSettings</a></div><div class="ttdeci">Generalsettings GeneralSettings</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:5</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a0fd06a80c097c9b6fcd5ddd8b1889c18"><div class="ttname"><a href="#a0fd06a80c097c9b6fcd5ddd8b1889c18">TaskAPI.Helpers.SpotHelper.PullOandaData</a></div><div class="ttdeci">List&lt; BaseSpot &gt; PullOandaData(DateTime pullTime)</div><div class="ttdoc">Retrieves spot data from Oanda for each specified asset.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:422</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a2ad64affbfeec15e4217d8bfccd982ff"><div class="ttname"><a href="#a2ad64affbfeec15e4217d8bfccd982ff">TaskAPI.Helpers.SpotHelper.PullPolygonOracleData</a></div><div class="ttdeci">List&lt; BaseSpot &gt; PullPolygonOracleData(DateTime pullTime)</div><div class="ttdoc">Pulls spot data from Polygon Oracle for each specified asset.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:276</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a2d5da5f529f7ec58c18cefb373466d99"><div class="ttname"><a href="#a2d5da5f529f7ec58c18cefb373466d99">TaskAPI.Helpers.SpotHelper.GenerateSpecialData</a></div><div class="ttdeci">void GenerateSpecialData(DateTime pullTime, List&lt; BaseSpot &gt; finalSpotList)</div><div class="ttdoc">Generates special spot data entries and adds them to the final spot list.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:581</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a51135865d712678dee52479c109a61fb"><div class="ttname"><a href="#a51135865d712678dee52479c109a61fb">TaskAPI.Helpers.SpotHelper.PullForexData</a></div><div class="ttdeci">List&lt; BaseSpot &gt; PullForexData(DateTime pullTime)</div><div class="ttdoc">pull data from forexfeed in one hit, check single time variation is within threshold add items to spo...</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:334</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a701fc9c0beaecff83beb2c806b8581d5"><div class="ttname"><a href="#a701fc9c0beaecff83beb2c806b8581d5">TaskAPI.Helpers.SpotHelper.PullBinanceData</a></div><div class="ttdeci">List&lt; BaseSpot &gt; PullBinanceData(DateTime pullTime)</div><div class="ttdoc">Retrieves spot data from Binance for each specified asset.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:499</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a95400211c9214b34c8427e09776449a9"><div class="ttname"><a href="#a95400211c9214b34c8427e09776449a9">TaskAPI.Helpers.SpotHelper.RecyclePreviousSpot</a></div><div class="ttdeci">void RecyclePreviousSpot(BaseSpot bs)</div><div class="ttdoc">Recycles the previous spot data for the given BaseSpot from the database.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:658</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_adeeda07d908e3644d9ba13213077d205"><div class="ttname"><a href="#adeeda07d908e3644d9ba13213077d205">TaskAPI.Helpers.SpotHelper.TrimSpotData</a></div><div class="ttdeci">void TrimSpotData()</div><div class="ttdoc">Removes spot data entries older than a specified number of days from the database.</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:680</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_email_post_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_email_post.html">TaskAPI.Models.DTO.InternalAPI.EmailPost</a></div><div class="ttdef"><b>Definition</b> InternalAPI.cs:4</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_html_aeffeb1d3d59aeeab65dfe72691d21600"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#aeffeb1d3d59aeeab65dfe72691d21600">TaskAPI.Services.InternalAPIService.SendEmail</a></div><div class="ttdeci">bool SendEmail(EmailPost email)</div><div class="ttdoc">Sends an email using Internal API's email endpoint.</div><div class="ttdef"><b>Definition</b> InternalAPIService.cs:45</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_log_service_html_a5c2a67dbd8beb6f821c46b8d052d59ea"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_log_service.html#a5c2a67dbd8beb6f821c46b8d052d59ea">TaskAPI.Services.LogService.LogInformation</a></div><div class="ttdeci">LogEntry LogInformation(LogSources logSource, params object[] dataList)</div><div class="ttdoc">Logs an informational message to the database.</div><div class="ttdef"><b>Definition</b> LogService.cs:87</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a7b75f44b3310036d4de7f0f2956bbac1_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a7b75f44b3310036d4de7f0f2956bbac1_icgraph.svg" width="416" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a95400211c9214b34c8427e09776449a9" name="a95400211c9214b34c8427e09776449a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95400211c9214b34c8427e09776449a9">&#9670;&#160;</a></span>RecyclePreviousSpot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TaskAPI.Helpers.SpotHelper.RecyclePreviousSpot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html">BaseSpot</a></td>          <td class="paramname"><span class="paramname"><em>bs</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recycles the previous spot data for the given BaseSpot from the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bs</td><td>The BaseSpot object for which the previous spot data will be recycled.</td></tr>
  </table>
  </dd>
</dl>
<p>This method retrieves the most recent spot data entry for the specified <em>bs</em>  from the database and updates the provided <em>bs</em>  object with the recycled spot data.</p>
<p>If a previous spot data entry is found in the database for the same asset code, the method updates the <em>bs</em>  object with the recycled data, including pair code, source, and spot value.</p>
<p>If no previous spot data entry is found for the specified asset code, the method logs an error indicating that recycling is not possible.</p>
<div class="fragment"><div class="line"><span class="lineno">  659</span>    {</div>
<div class="line"><span class="lineno">  660</span>        var bsRecycle = <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a5e7d6eb59fabb7c28af0d9a97551a83d">BaseSpots</a>.Where(bsr =&gt; bsr.AssetCode == bs.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#a9fa574ef36b5343f32a53d5edd7addb4">AssetCode</a>)?.OrderByDescending(bs =&gt; bs.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#abbb6466c0a299a01a982efb772382e5d">PullTime</a>).Take(1)?.FirstOrDefault();</div>
<div class="line"><span class="lineno">  661</span>        <span class="keywordflow">if</span> (bsRecycle != <span class="keyword">null</span>)</div>
<div class="line"><span class="lineno">  662</span>        {</div>
<div class="line"><span class="lineno">  663</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a6be037b34888bbcf6b47dca8eef472de">LogDebug</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;recycling spot for {bs.AssetCode} from database&quot;</span>, bsRecycle);</div>
<div class="line"><span class="lineno">  664</span>            bs.PairCode = bsRecycle.PairCode;</div>
<div class="line"><span class="lineno">  665</span>            bs.Source = <span class="stringliteral">&quot;database&quot;</span>;</div>
<div class="line"><span class="lineno">  666</span>            bs.Spot = bsRecycle.Spot;</div>
<div class="line"><span class="lineno">  667</span>        }</div>
<div class="line"><span class="lineno">  668</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  669</span>        {</div>
<div class="line"><span class="lineno">  670</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, $<span class="stringliteral">&quot;cannot recycle spot for {bs.AssetCode} from database&quot;</span>);</div>
<div class="line"><span class="lineno">  671</span>        }</div>
<div class="line"><span class="lineno">  672</span>    }</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a95400211c9214b34c8427e09776449a9_cgraph.svg" width="100%" height="390"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a95400211c9214b34c8427e09776449a9_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a6b975ced6fddc4826a8950c8a250b926" name="a6b975ced6fddc4826a8950c8a250b926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b975ced6fddc4826a8950c8a250b926">&#9670;&#160;</a></span>SaveDailySpot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool? object Result TaskAPI.Helpers.SpotHelper.SaveDailySpot </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  698</span>    {</div>
<div class="line"><span class="lineno">  699</span>        <span class="keywordtype">bool</span> isDebug = <a class="code hl_variable" href="#a91a44041fb2de73102a3319f9edf4258">_env</a>.IsDevelopment() || <a class="code hl_variable" href="#a91a44041fb2de73102a3319f9edf4258">_env</a>.IsStaging();</div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">try</span></div>
<div class="line"><span class="lineno">  701</span>        {</div>
<div class="line"><span class="lineno">  702</span>            <span class="keywordtype">int</span> Year = DateTime.Now.Year;</div>
<div class="line"><span class="lineno">  703</span>            <span class="keywordtype">int</span> Month = DateTime.Now.Month;</div>
<div class="line"><span class="lineno">  704</span>            <span class="keywordtype">int</span> Day = DateTime.Now.Day;</div>
<div class="line"><span class="lineno">  705</span>            <span class="comment">//5 mins before is ok, allow 1 hr after in case retries are required</span></div>
<div class="line"><span class="lineno">  706</span>            var WindowOpen = <span class="keyword">new</span> DateTime(Year, Month, Day, 15, 55, 0);</div>
<div class="line"><span class="lineno">  707</span>            var WindowClose = <span class="keyword">new</span> DateTime(Year, Month, Day, 16, 05, 0);</div>
<div class="line"><span class="lineno">  708</span>            <span class="keywordflow">if</span> (!isDebug &amp;&amp; !(DateTime.Now &gt; WindowOpen &amp; DateTime.Now &lt; WindowClose))</div>
<div class="line"><span class="lineno">  709</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="keyword">new</span> { success = <span class="keyword">false</span>, message = <span class="stringliteral">&quot;request does not fall within daily save time window&quot;</span> });</div>
<div class="line"><span class="lineno">  710</span>            <span class="comment">//check if done today already</span></div>
<div class="line"><span class="lineno">  711</span>            <span class="keywordflow">if</span> (!isDebug &amp;&amp; <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a0a63b303899246b496a42f08da57bd43">DailyCloses</a>.Where(dc =&gt; dc.Year == Year &amp;&amp; dc.Month == Month &amp;&amp; dc.Day == Day).Count() &gt; 0) </div>
<div class="line"><span class="lineno">  712</span>                <span class="keywordflow">return</span> (<span class="keyword">false</span>, <span class="keyword">new</span> { success = <span class="keyword">false</span>, message = <span class="stringliteral">&quot;daily closes already completed for today&quot;</span>, Data = <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a0a63b303899246b496a42f08da57bd43">DailyCloses</a>.Where(dc =&gt; dc.Year == Year &amp;&amp; dc.Month == Month &amp;&amp; dc.Day == Day).ToList() });</div>
<div class="line"><span class="lineno">  713</span>            <span class="comment">//get current asset list from priceapp</span></div>
<div class="line"><span class="lineno">  714</span>            var assetList = <a class="code hl_variable" href="#a7bbe8203a7ccd78f59b904ab1c6389bb">_iapiService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a7e3600841f53749e6c915ace609dfa11">PriceappAssets</a>();</div>
<div class="line"><span class="lineno">  715</span>            <span class="keywordflow">if</span> (assetList == <span class="keyword">null</span> || assetList.Count == 0)</div>
<div class="line"><span class="lineno">  716</span>            {</div>
<div class="line"><span class="lineno">  717</span>                <span class="keywordflow">return</span> (<span class="keyword">true</span>, <span class="keyword">new</span> { success = <span class="keyword">false</span>, message = <span class="stringliteral">&quot;asset list from priceapp was null&quot;</span> });</div>
<div class="line"><span class="lineno">  718</span>            }</div>
<div class="line"><span class="lineno">  719</span>            List&lt;DailyClose&gt; dailyCloses = <span class="keyword">new</span> List&lt;DailyClose&gt;();</div>
<div class="line"><span class="lineno">  720</span>            <span class="comment">//create a daily close for AUD</span></div>
<div class="line"><span class="lineno">  721</span>            var first = assetList.FirstOrDefault();</div>
<div class="line"><span class="lineno">  722</span>            var audusd = Math.Truncate(10000 * first.audusd) / 10000;</div>
<div class="line"><span class="lineno">  723</span>            <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_daily_close.html">DailyClose</a> AUDClose = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_daily_close.html">DailyClose</a>()</div>
<div class="line"><span class="lineno">  724</span>            {</div>
<div class="line"><span class="lineno">  725</span>                Year = Year,</div>
<div class="line"><span class="lineno">  726</span>                Month = Month,</div>
<div class="line"><span class="lineno">  727</span>                Day = Day,</div>
<div class="line"><span class="lineno">  728</span>                AssetCode = <span class="stringliteral">&quot;AUD&quot;</span>,</div>
<div class="line"><span class="lineno">  729</span>                PairCode = <span class="stringliteral">&quot;USD&quot;</span>,</div>
<div class="line"><span class="lineno">  730</span>                Per = <span class="stringliteral">&quot;$&quot;</span>,</div>
<div class="line"><span class="lineno">  731</span>                Buy = audusd,</div>
<div class="line"><span class="lineno">  732</span>                Spot = audusd,</div>
<div class="line"><span class="lineno">  733</span>                Sell = audusd</div>
<div class="line"><span class="lineno">  734</span>            };</div>
<div class="line"><span class="lineno">  735</span>            dailyCloses.Add(AUDClose);</div>
<div class="line"><span class="lineno">  736</span>            <span class="comment">//create daily close for all else</span></div>
<div class="line"><span class="lineno">  737</span>            <span class="keywordflow">foreach</span> (<a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html">PriceappAsset</a> x <span class="keywordflow">in</span> assetList)</div>
<div class="line"><span class="lineno">  738</span>            {</div>
<div class="line"><span class="lineno">  739</span>                <span class="keywordflow">if</span> (x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#acb2a7c7f2ddd8fa7c579322de264f035">assetCode</a> == <span class="stringliteral">&quot;XX1&quot;</span>)</div>
<div class="line"><span class="lineno">  740</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  741</span>                <span class="comment">// all assets from internal api are AUD</span></div>
<div class="line"><span class="lineno">  742</span>                <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_daily_close.html">DailyClose</a> dc = <span class="keyword">new</span> <a class="code hl_class" href="class_task_a_p_i_1_1_models_1_1_daily_close.html">DailyClose</a>()</div>
<div class="line"><span class="lineno">  743</span>                {</div>
<div class="line"><span class="lineno">  744</span>                    Year = Year,</div>
<div class="line"><span class="lineno">  745</span>                    Month = Month,</div>
<div class="line"><span class="lineno">  746</span>                    Day = Day,</div>
<div class="line"><span class="lineno">  747</span>                    AssetCode = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#acb2a7c7f2ddd8fa7c579322de264f035">assetCode</a>,</div>
<div class="line"><span class="lineno">  748</span>                    PairCode = <span class="stringliteral">&quot;AUD&quot;</span>,</div>
<div class="line"><span class="lineno">  749</span>                    Per = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a74613f64ecc58f8cd0d4496e02d6fe30">spotUnit</a>?.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_1_1_spotunit.html#a362ee02b811e851f1a58a49e5d4fac46">unitName</a> ?? <span class="stringliteral">&quot;&quot;</span> ,</div>
<div class="line"><span class="lineno">  750</span>                    Buy = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a4bc64e34a3e1a3037fe6c618bef375f9">environmentBuy</a>,</div>
<div class="line"><span class="lineno">  751</span>                    Spot = x.<a class="code hl_property" href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a6843f4b4444d004a9e86462e1615a481">environmentSpot</a>,</div>
<div class="line"><span class="lineno">  752</span>                    Sell = x.environmentSell</div>
<div class="line"><span class="lineno">  753</span>                };</div>
<div class="line"><span class="lineno">  754</span>                dailyCloses.Add(dc);</div>
<div class="line"><span class="lineno">  755</span>            }</div>
<div class="line"><span class="lineno">  756</span>            <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a0a63b303899246b496a42f08da57bd43">DailyCloses</a>.AddRange(dailyCloses);</div>
<div class="line"><span class="lineno">  757</span>            <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.SaveChanges();</div>
<div class="line"><span class="lineno">  758</span>            var exportResult = <a class="code hl_function" href="#a0a13962d034427b5047452856eb3198d">ExportChartData</a>();</div>
<div class="line"><span class="lineno">  759</span>            <span class="keywordflow">return</span> (exportResult.Error, <span class="keyword">new</span> { SaveDailtySpot = dailyCloses, ExportChartData = exportResult.Result });</div>
<div class="line"><span class="lineno">  760</span>        }</div>
<div class="line"><span class="lineno">  761</span>        <span class="keywordflow">catch</span> (Exception ex)</div>
<div class="line"><span class="lineno">  762</span>        {</div>
<div class="line"><span class="lineno">  763</span>            <a class="code hl_variable" href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">_logService</a>.<a class="code hl_function" href="class_task_a_p_i_1_1_services_1_1_log_service.html#a46dc9bf58bc9605c7e17dfee38b94354">LogError</a>(<a class="code hl_class" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a>.<a class="code hl_enumeration" href="class_task_a_p_i_1_1_services_1_1_log_service.html#ac2b08e94307168cb702773d148d166ba">LogSources</a>.SpotHelper, <span class="stringliteral">&quot;exception saving daily spot&quot;</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  764</span>            <span class="keywordflow">return</span> (<span class="keyword">true</span>, ex.ToString());</div>
<div class="line"><span class="lineno">  765</span>        }</div>
<div class="line"><span class="lineno">  766</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_contexts_1_1_priceapp_context_html_a0a63b303899246b496a42f08da57bd43"><div class="ttname"><a href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a0a63b303899246b496a42f08da57bd43">TaskAPI.Contexts.PriceappContext.DailyCloses</a></div><div class="ttdeci">virtual DbSet&lt; DailyClose &gt; DailyCloses</div><div class="ttdef"><b>Definition</b> PriceappContext.cs:40</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_spot_helper_html_a0a13962d034427b5047452856eb3198d"><div class="ttname"><a href="#a0a13962d034427b5047452856eb3198d">TaskAPI.Helpers.SpotHelper.ExportChartData</a></div><div class="ttdeci">bool? object Result ExportChartData()</div><div class="ttdef"><b>Definition</b> SpotHelper.cs:778</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_1_1_spotunit_html_a362ee02b811e851f1a58a49e5d4fac46"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_1_1_spotunit.html#a362ee02b811e851f1a58a49e5d4fac46">TaskAPI.Models.DTO.InternalAPI.PriceappAsset.Spotunit.unitName</a></div><div class="ttdeci">string unitName</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:49</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html">TaskAPI.Models.DTO.InternalAPI.PriceappAsset</a></div><div class="ttdef"><b>Definition</b> InternalAPI.cs:13</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_html_a4bc64e34a3e1a3037fe6c618bef375f9"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a4bc64e34a3e1a3037fe6c618bef375f9">TaskAPI.Models.DTO.InternalAPI.PriceappAsset.environmentBuy</a></div><div class="ttdeci">double environmentBuy</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:36</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_html_a6843f4b4444d004a9e86462e1615a481"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a6843f4b4444d004a9e86462e1615a481">TaskAPI.Models.DTO.InternalAPI.PriceappAsset.environmentSpot</a></div><div class="ttdeci">double environmentSpot</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:35</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_html_a74613f64ecc58f8cd0d4496e02d6fe30"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#a74613f64ecc58f8cd0d4496e02d6fe30">TaskAPI.Models.DTO.InternalAPI.PriceappAsset.spotUnit</a></div><div class="ttdeci">Spotunit spotUnit</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:20</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset_html_acb2a7c7f2ddd8fa7c579322de264f035"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_d_t_o_1_1_internal_a_p_i_1_1_priceapp_asset.html#acb2a7c7f2ddd8fa7c579322de264f035">TaskAPI.Models.DTO.InternalAPI.PriceappAsset.assetCode</a></div><div class="ttdeci">string assetCode</div><div class="ttdef"><b>Definition</b> InternalAPI.cs:16</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_models_1_1_daily_close_html"><div class="ttname"><a href="class_task_a_p_i_1_1_models_1_1_daily_close.html">TaskAPI.Models.DailyClose</a></div><div class="ttdef"><b>Definition</b> DailyClose.cs:11</div></div>
<div class="ttc" id="aclass_task_a_p_i_1_1_services_1_1_internal_a_p_i_service_html_a7e3600841f53749e6c915ace609dfa11"><div class="ttname"><a href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html#a7e3600841f53749e6c915ace609dfa11">TaskAPI.Services.InternalAPIService.PriceappAssets</a></div><div class="ttdeci">List&lt; PriceappAsset &gt;? PriceappAssets()</div><div class="ttdoc">Retrieves a list of Priceapp assets from Internal API.</div><div class="ttdef"><b>Definition</b> InternalAPIService.cs:70</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_a6b975ced6fddc4826a8950c8a250b926_icgraph.svg" width="416" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adeeda07d908e3644d9ba13213077d205" name="adeeda07d908e3644d9ba13213077d205"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeeda07d908e3644d9ba13213077d205">&#9670;&#160;</a></span>TrimSpotData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TaskAPI.Helpers.SpotHelper.TrimSpotData </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes spot data entries older than a specified number of days from the database. </p>
<p>This method deletes spot data entries where <a class="el" href="class_task_a_p_i_1_1_models_1_1_base_spot.html#abbb6466c0a299a01a982efb772382e5d">BaseSpot.PullTime</a> is older than the defined threshold. </p>
<div class="fragment"><div class="line"><span class="lineno">  681</span>    {</div>
<div class="line"><span class="lineno">  682</span>        <span class="comment">//_context.Database.ExecuteSqlAsync($&quot;delete from basespots where pulltime &lt; {DateTime.Now.AddDays(-_settings.SpotFeedSettings.DaysToKeepSpotData)}&quot;);</span></div>
<div class="line"><span class="lineno">  683</span>        <a class="code hl_variable" href="#aa365640b2ac3e3f84df34e8a27817f81">_context</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html#a5e7d6eb59fabb7c28af0d9a97551a83d">BaseSpots</a>.Where(bs =&gt; bs.PullTime &lt; DateTime.Now.AddDays(-<a class="code hl_variable" href="#a2160130492346bd22d7ce8a4ede1bf67">_settings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html#abc5a23cce7a98ce3cd109ecb1c3122ae">SpotFeedSettings</a>.<a class="code hl_property" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abb0c70613a3122807a0a9f0b4dd57b50">DaysToKeepSpotData</a>)).ExecuteDelete();</div>
<div class="line"><span class="lineno">  684</span>    }</div>
<div class="ttc" id="aclass_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings_html_abb0c70613a3122807a0a9f0b4dd57b50"><div class="ttname"><a href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings_1_1_spotfeedsettings.html#abb0c70613a3122807a0a9f0b4dd57b50">TaskAPI.Helpers.Settings.TaskAPISettings.Spotfeedsettings.DaysToKeepSpotData</a></div><div class="ttdeci">int DaysToKeepSpotData</div><div class="ttdef"><b>Definition</b> TaskAPISettings.cs:34</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="class_task_a_p_i_1_1_helpers_1_1_spot_helper_adeeda07d908e3644d9ba13213077d205_icgraph.svg" width="655" height="54"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ac6e63479696a9f01dc08d8bcf7fe6038" name="ac6e63479696a9f01dc08d8bcf7fe6038"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6e63479696a9f01dc08d8bcf7fe6038">&#9670;&#160;</a></span>_alchemyService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_services_1_1_alchemy_service.html">AlchemyService</a> TaskAPI.Helpers.SpotHelper._alchemyService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae2c3fbeea2c16cbaa6206ff9aaebb5fe" name="ae2c3fbeea2c16cbaa6206ff9aaebb5fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2c3fbeea2c16cbaa6206ff9aaebb5fe">&#9670;&#160;</a></span>_binanceService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_services_1_1_binance_service.html">BinanceService</a> TaskAPI.Helpers.SpotHelper._binanceService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa365640b2ac3e3f84df34e8a27817f81" name="aa365640b2ac3e3f84df34e8a27817f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa365640b2ac3e3f84df34e8a27817f81">&#9670;&#160;</a></span>_context</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_contexts_1_1_priceapp_context.html">PriceappContext</a> TaskAPI.Helpers.SpotHelper._context</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a91a44041fb2de73102a3319f9edf4258" name="a91a44041fb2de73102a3319f9edf4258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91a44041fb2de73102a3319f9edf4258">&#9670;&#160;</a></span>_env</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IWebHostEnvironment TaskAPI.Helpers.SpotHelper._env</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a47a7675b28528fddd0add10e0daceb3a" name="a47a7675b28528fddd0add10e0daceb3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a7675b28528fddd0add10e0daceb3a">&#9670;&#160;</a></span>_forexService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_services_1_1_forex_service.html">ForexService</a> TaskAPI.Helpers.SpotHelper._forexService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7bbe8203a7ccd78f59b904ab1c6389bb" name="a7bbe8203a7ccd78f59b904ab1c6389bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bbe8203a7ccd78f59b904ab1c6389bb">&#9670;&#160;</a></span>_iapiService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_services_1_1_internal_a_p_i_service.html">InternalAPIService</a> TaskAPI.Helpers.SpotHelper._iapiService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a49deee18d15ec2cb2b1dd2dd9058cd1f" name="a49deee18d15ec2cb2b1dd2dd9058cd1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49deee18d15ec2cb2b1dd2dd9058cd1f">&#9670;&#160;</a></span>_logService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_services_1_1_log_service.html">LogService</a> TaskAPI.Helpers.SpotHelper._logService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2160130492346bd22d7ce8a4ede1bf67" name="a2160130492346bd22d7ce8a4ede1bf67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2160130492346bd22d7ce8a4ede1bf67">&#9670;&#160;</a></span>_settings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_task_a_p_i_1_1_helpers_1_1_settings_1_1_task_a_p_i_settings.html">TaskAPISettings</a> TaskAPI.Helpers.SpotHelper._settings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d8458171af3cac5a7fc1fc1f35de115" name="a1d8458171af3cac5a7fc1fc1f35de115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8458171af3cac5a7fc1fc1f35de115">&#9670;&#160;</a></span>Error</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TaskAPI.Helpers.SpotHelper.Error</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves daily spot data to the database and exports chart data. </p>
<p>Exports chart data to JSON files for AUD and USD currencies.</p>
<dl class="section return"><dt>Returns</dt><dd>A tuple indicating whether an error occurred during the process and providing details about the result of the operation. </dd></dl>
<p>This method retrieves asset data from Priceapp, creates daily close records for each asset, saves them to the database, and exports chart data. It ensures that the operation falls within a specified time window and checks whether daily closes have already been completed for the current day. </p>
<dl class="section return"><dt>Returns</dt><dd>A tuple indicating whether an error occurred during the export process and providing a message about the result. </dd></dl>
<p>This method retrieves chart data from Internal API, groups it by metal, and orders it according to a specified mapping. Then, it converts the chart data to AUD and USD currencies, saves them as JSON files, and logs the export process. </p>

</div>
</div>
<a id="adf1fe67d03462035d8a1c48897dd2104" name="adf1fe67d03462035d8a1c48897dd2104"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf1fe67d03462035d8a1c48897dd2104">&#9670;&#160;</a></span>marketOpen</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool TaskAPI.Helpers.SpotHelper.marketOpen</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adc630a604ed0b8c9e1090e965363e841" name="adc630a604ed0b8c9e1090e965363e841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc630a604ed0b8c9e1090e965363e841">&#9670;&#160;</a></span>marketStatusOverride</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a072bb87250d0da4285bfe85c69fa479c">MarketStatusOverrides</a> TaskAPI.Helpers.SpotHelper.marketStatusOverride</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aef6b7b6e86e3a962f65aa9f929b8f49a" name="aef6b7b6e86e3a962f65aa9f929b8f49a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef6b7b6e86e3a962f65aa9f929b8f49a">&#9670;&#160;</a></span>tOzGrams</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const double TaskAPI.Helpers.SpotHelper.tOzGrams = 31.1035</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/STRIDER/source/repos/TaskAPI/Helpers/<a class="el" href="_spot_helper_8cs.html">SpotHelper.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
